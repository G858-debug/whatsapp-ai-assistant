=== AUTO FIX GENERATOR DEBUG ===
Current directory: /home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant
test-results.json exists: True
JSON keys: ['created', 'duration', 'exitcode', 'root', 'environment', 'summary', 'collectors', 'tests', 'warnings']
Total tests in JSON: 56
Failed tests in JSON: 25
First failure: tests/test_phase1_registration.py::TestTrainerRegistrationRe
Error type: <class 'str'>
Error preview: tests/test_phase1_registration.py:72: in test_complete_trainer_registration_flow
    assert "step 1" in response.lower()
E   assert 'step 1' in "welcome back, there! you're already registered. how can
=== END DEBUG ===

🔍 Analyzing test failures...

Found 25 failed tests
Analyzing: tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_tr...
  Error snippet: tests/test_phase1_registration.py:72: in test_complete_trainer_registration_flow
    assert "step 1" in response.lower()
E   assert 'step 1' in "welco
  → Matched duplicate registration issue
✅ Generated fix for: duplicate_check
Analyzing: tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_rec...
  Error snippet: tests/test_phase1_registration.py:189: in test_trainer_recognition_after_registration
    with patch('services.refiloe.AIIntentHandler') as mock_ai:
/
  → Matched Mock object issue
  → Matched trainer recognition issue
✅ Generated fix for: trainer_recognition
Analyzing: tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_recei...
  Error snippet: tests/test_phase1_registration.py:235: in test_client_receives_welcome_after_registration
    with patch('services.refiloe.AIIntentHandler') as mock_a
  → Matched Mock object issue
  → Matched client registration issue
✅ Generated fix for: client_registration
Analyzing: tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email...
  Error snippet: tests/test_phase1_registration.py:288: in test_invalid_email_format
    assert result['success'] == False
E   assert True == False
  → No fix pattern matched
Analyzing: tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_nor...
  Error snippet: tests/test_phase2_client_management.py:98: in test_phone_number_normalization
    assert normalized == expected_phone, \
E   AssertionError: Expected 
  → Matched phone format issue
✅ Generated fix for: phone_format
Analyzing: tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_c...
  Error snippet: tests/test_phase2_client_management.py:160: in test_view_clients_commands
    assert 'sarah' in message or 'john' in message or 'mike' in message or \
  → Matched AI intent issue
✅ Generated fix for: ai_intent
Analyzing: tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client...
  Error snippet: tests/test_phase2_client_management.py:239: in test_check_client_pricing
    assert 'r' in message or 'rand' in message or \
E   AssertionError: Faile
  → No fix pattern matched
Analyzing: tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_...
  Error snippet: tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone
    assert 'already' in response.get('message', '').lower() or \
E
  → No fix pattern matched
Analyzing: tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_clie...
  Error snippet: tests/test_phase2_client_management.py:311: in test_client_not_found
    assert 'not found' in response.get('message', '').lower() or \
E   assert ('n
  → No fix pattern matched
Analyzing: tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_comman...
  Error snippet: tests/test_phase3_scheduling.py:74: in test_view_schedule_commands
    assert 'schedule' in message or 'booking' in message or \
E   AssertionError: F
  → Matched AI intent issue
Analyzing: tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats...
  Error snippet: tests/test_phase3_scheduling.py:168: in test_booking_time_formats
    assert is_valid == True, f"Failed to validate time: {time_format}"
E   Assertion
  → Matched time format issue
✅ Generated fix for: missing_method
Analyzing: tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_on...
  Error snippet: tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding
    assert "welcome" in response['message'].lower()
E   AssertionError: assert 'welc
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recogn...
  Error snippet: tests/test_refiloe_complete.py:134: in test_trainer_recognition
    assert "john" in response['message'].lower()
E   AssertionError: assert 'john' in 
  → Matched Mock object issue
  → Matched trainer recognition issue
Analyzing: tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_var...
  Error snippet: tests/test_refiloe_complete.py:158: in test_add_client_variations
    assert "added" in response['message'].lower() or "registered" in response['messa
  → Matched Mock object issue
  → Matched client registration issue
Analyzing: tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients...
  Error snippet: tests/test_refiloe_complete.py:179: in test_view_clients
    assert "sarah" in response['message'].lower()
E   AssertionError: assert 'sarah' in 'mock
  → Matched Mock object issue
  → Matched AI intent issue
Analyzing: tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pri...
  Error snippet: tests/test_refiloe_complete.py:196: in test_set_custom_pricing
    assert "updated" in response['message'].lower() or "set" in response['message'].low
  → Matched Mock object issue
  → Matched trainer recognition issue
Analyzing: tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedul...
  Error snippet: tests/test_refiloe_complete.py:223: in test_view_schedule
    assert "schedule" in response['message'].lower() or "booking" in response['message'].low
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_session...
  Error snippet: tests/test_refiloe_complete.py:239: in test_book_sessions
    assert "booked" in response['message'].lower() or "scheduled" in response['message'].low
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits...
  Error snippet: tests/test_refiloe_complete.py:273: in test_setup_habits
    assert "habit" in response['message'].lower() or "tracking" in response['message'].lower(
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workou...
  Error snippet: tests/test_refiloe_complete.py:293: in test_send_workouts
    assert "workout" in response['message'].lower() or "sent" in response['message'].lower()
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment...
  Error snippet: tests/test_refiloe_complete.py:313: in test_request_payment
    assert "payment" in response['message'].lower() or "invoice" in response['message'].lo
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking...
  Error snippet: tests/test_refiloe_complete.py:349: in test_client_booking
    assert "book" in response['message'].lower() or "session" in response['message'].lower(
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_log...
  Error snippet: tests/test_refiloe_complete.py:365: in test_client_habit_logging
    assert "logged" in response['message'].lower() or "recorded" in response['message
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handlin...
  Error snippet: tests/test_refiloe_complete.py:403: in test_error_handling
    assert any(word in response['message'].lower() for word in expected_words)
E   assert F
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step...
  Error snippet: tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing
    assert result['data'].get('pricing') == expected_value
E 
  → Matched Mock object issue
  → Matched currency parsing issue
✅ Generated fix for: currency_parsing

📝 Generated 7 fixes
✅ Created generated_fixes.json
✅ Created fix_summary.json
✅ Fix generation complete!
