=== AUTO FIX GENERATOR DEBUG ===
Current directory: /home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant
test-results.json exists: True
JSON keys: ['created', 'duration', 'exitcode', 'root', 'environment', 'summary', 'collectors', 'tests', 'warnings']
Total tests in JSON: 56
Failed tests in JSON: 13
First failure: tests/test_phase1_registration.py::TestTrainerRegistrationRe
Error type: <class 'str'>
Error preview: tests/test_phase1_registration.py:72: in test_complete_trainer_registration_flow
    assert "step 1" in response.lower()
E   assert 'step 1' in "welcome back, there! you're already registered. how can
=== END DEBUG ===

🔍 Analyzing test failures...

Found 13 failed tests
Analyzing: tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_tr...
  Error snippet: tests/test_phase1_registration.py:72: in test_complete_trainer_registration_flow
    assert "step 1" in response.lower()
E   assert 'step 1' in "welco
  → Matched duplicate registration issue
✅ Generated fix for: duplicate_check
Analyzing: tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_rec...
  Error snippet: tests/test_phase1_registration.py:201: in test_trainer_recognition_after_registration
    assert response.get('success') == True
E   assert False == T
  → Matched trainer recognition issue
✅ Generated fix for: trainer_recognition
Analyzing: tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_recei...
  Error snippet: tests/test_phase1_registration.py:246: in test_client_receives_welcome_after_registration
    assert response.get('success') == True
E   assert False 
  → Matched client registration issue
✅ Generated fix for: client_registration
Analyzing: tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_nor...
  Error snippet: tests/test_phase2_client_management.py:98: in test_phone_number_normalization
    assert normalized == expected_phone, \
E   AssertionError: Expected 
  → Matched phone format issue
✅ Generated fix for: phone_format
Analyzing: tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_c...
  Error snippet: tests/test_phase2_client_management.py:160: in test_view_clients_commands
    assert 'sarah' in message or 'john' in message or 'mike' in message or \
  → Matched AI intent issue
✅ Generated fix for: ai_intent
Analyzing: tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client...
  Error snippet: tests/test_phase2_client_management.py:239: in test_check_client_pricing
    assert 'r' in message or 'rand' in message or \
E   AssertionError: Faile
  → No fix pattern matched
Analyzing: tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_...
  Error snippet: tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone
    assert 'already' in response.get('message', '').lower() or \
E
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_clie...
  Error snippet: tests/test_phase2_client_management.py:311: in test_client_not_found
    assert 'not found' in response.get('message', '').lower() or \
E   assert ('n
  → Matched Mock object issue
  → No fix pattern matched
Analyzing: tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_comman...
  Error snippet: tests/test_phase3_scheduling.py:74: in test_view_schedule_commands
    assert 'schedule' in message or 'booking' in message or \
E   AssertionError: F
  → Matched AI intent issue
Analyzing: tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats...
  Error snippet: tests/test_phase3_scheduling.py:168: in test_booking_time_formats
    assert is_valid == True, f"Failed to validate time: {time_format}"
E   Assertion
  → Matched time format issue
✅ Generated fix for: missing_method
Analyzing: tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_resch...
  Error snippet: tests/test_refiloe_complete.py:329: in test_cancel_reschedule
    assert "reschedul" in response['message'].lower() or "moved" in response['message'].
  → Matched trainer recognition issue
Analyzing: tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment...
  Error snippet: tests/test_refiloe_complete.py:368: in test_request_payment
    assert "payment" in response['message'].lower() or "invoice" in response['message'].lo
  → No fix pattern matched
Analyzing: tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handlin...
  Error snippet: tests/test_refiloe_complete.py:424: in test_error_handling
    assert any(word in response['message'].lower() for word in ["past", "future", "cannot"]
  → No fix pattern matched

📝 Generated 6 fixes
✅ Created generated_fixes.json
✅ Created fix_summary.json
✅ Fix generation complete!
