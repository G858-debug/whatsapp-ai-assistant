============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-7.4.2, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.13/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.11.13', 'Platform': 'Linux-6.11.0-1018-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '7.4.2', 'pluggy': '1.6.0'}, 'Plugins': {'json-report': '1.5.0', 'metadata': '3.1.1', 'cov': '4.1.0', 'html': '4.1.1', 'anyio': '4.11.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64'}
rootdir: /home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant
plugins: json-report-1.5.0, metadata-3.1.1, cov-4.1.0, html-4.1.1, anyio-4.11.0
collecting ... collected 56 items

tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work PASSED
tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message PASSED
tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock PASSED
tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup PASSED
tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow PASSED
tests/test_debug.py::test_python_version Python version: 3.11.13 (main, Jun  4 2025, 04:12:12) [GCC 13.3.0]
PASSED
tests/test_debug.py::test_can_import_basic_modules ✅ pytest imported successfully
✅ json imported successfully
PASSED
tests/test_debug.py::test_project_structure Current directory: /home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant
Directory contents: ['app_core.py', 'test-report.html', 'claude_response.md', 'utils', 'README.md', 'payment_integration.py', 'runtime.txt', 'requirements.txt', 'services', 'voice_helpers.py', 'static', 'claude.md', 'test_railway_api.py', '.git', 'debug_time.py', 'supabase', '.github', 'routes', 'tests', '.test_failure_history.json', 'test-output.log', '.claude-config.json', 'payment_manager.py', 'backups', 'config.py', 'fix_test_issues.py', 'app.py', 'test-results.json', 'app_routes.py', 'fix-generator.log', 'apply-fixes.log', '.gitignore', 'Procfile', 'comment.txt', 'summary.txt', '__pycache__', 'templates', 'nixpacks.toml', 'models', 'payfast_webhook.py']
✅ services/ directory exists
   Contents: ['helpers', 'ai_intent_handler.py', 'registration', 'ai_intent_core.py', 'ai_intent_responses.py']...
✅ utils/ directory exists
   Contents: ['logger.py', 'validators.py', 'railway_api.py', '__init__.py', 'input_sanitizer.py']...
PASSED
tests/test_debug.py::test_can_import_refiloe_modules ✅ services.refiloe imported successfully
✅ services.ai_intent_handler imported successfully
✅ services.registration.trainer_registration imported successfully
✅ utils.logger imported successfully
✅ config imported successfully
PASSED
tests/test_debug.py::test_check_requirements ✅ flask is installed
✅ supabase is installed
✅ anthropic is installed
✅ pytz is installed
✅ requests is installed
PASSED
tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow PASSED
tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations PASSED
tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields PASSED
tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration FAILED
tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration FAILED
tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt PASSED
tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format PASSED
tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input PASSED
tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name PASSED
tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations PASSED
tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization PASSED
tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names PASSED
tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands FAILED
tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations PASSED
tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing FAILED
tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone FAILED
tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers PASSED
tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing PASSED
tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found FAILED
tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands FAILED
tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language PASSED
tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats PASSED
tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing PASSED
tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations PASSED
tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking PASSED
tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention PASSED
tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention PASSED
tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots PASSED
tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding PASSED
tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition PASSED
tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations PASSED
tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients PASSED
tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing PASSED
tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule PASSED
tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions PASSED
tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule FAILED
tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits PASSED
tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts PASSED
tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment FAILED
tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue PASSED
tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking PASSED
tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging PASSED
tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding PASSED
tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling FAILED
tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing PASSED
tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands PASSED

=================================== FAILURES ===================================
___ TestTrainerRegistrationReal.test_trainer_recognition_after_registration ____
tests/test_phase1_registration.py:253: in test_trainer_recognition_after_registration
    assert 'john' in response.get('response', '').lower() or \
E   AssertionError: assert ('john' in <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> or 'welcome' in <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'>)
E    +  where <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> = <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'>()
E    +    where <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'> = <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>.lower
E    +      where <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'> = <built-in method get of dict object at 0x7f82ea7bec40>('response', '')
E    +        where <built-in method get of dict object at 0x7f82ea7bec40> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
E    +  and   <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> = <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'>()
E    +    where <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'> = <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>.lower
E    +      where <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'> = <built-in method get of dict object at 0x7f82ea7bec40>('response', '')
E    +        where <built-in method get of dict object at 0x7f82ea7bec40> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
------------------------------ Captured log call -------------------------------
INFO     refiloe:logger.py:21 Background scheduler started
INFO     refiloe:logger.py:21 Routes setup complete
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
__ TestClientRegistrationReal.test_client_receives_welcome_after_registration __
tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration
    assert response.get('success') == True
E   assert False == True
E    +  where False = <built-in method get of dict object at 0x7f82e9697e00>('success')
E    +    where <built-in method get of dict object at 0x7f82e9697e00> = {'response': "Sorry, I'm having a bit of trouble right now. Please try again in a moment! 😊", 'success': False}.get
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting user context: 'list' object has no attribute 'get'
ERROR    refiloe:logger.py:25 Error handling message: 'list' object has no attribute 'get'
________________ TestViewClientsReal.test_view_clients_commands ________________
tests/test_phase2_client_management.py:160: in test_view_clients_commands
    assert 'sarah' in message or 'john' in message or 'mike' in message or \
E   AssertionError: Failed to list clients with command: Show my clients
E   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting user context: Mock.keys() returned a non-iterable (type Mock)
ERROR    refiloe:logger.py:25 Error getting conversation history: 'Mock' object is not reversible
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
_______________ TestCustomPricingReal.test_check_client_pricing ________________
tests/test_phase2_client_management.py:239: in test_check_client_pricing
    assert 'r' in message or 'rand' in message or \
E   AssertionError: Failed to show pricing with: What is Sarah's rate?
E   assert ('r' in '' or 'rand' in '' or False)
E    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f82ea8e7920>)
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting user context: object of type 'Mock' has no len()
ERROR    refiloe:logger.py:25 Error getting conversation history: 'Mock' object is not reversible
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
______ TestClientManagementEdgeCases.test_add_client_with_duplicate_phone ______
tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone
    assert 'already' in response.get('message', '').lower() or \
E   AssertionError: assert ('already' in '' or 'exists' in '')
E    +  where '' = <built-in method lower of str object at 0x7f82fd33fba0>()
E    +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
E    +      where '' = <built-in method get of dict object at 0x7f82e9420540>('message', '')
E    +        where <built-in method get of dict object at 0x7f82e9420540> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
E    +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
E    +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
E    +      where '' = <built-in method get of dict object at 0x7f82e9420540>('message', '')
E    +        where <built-in method get of dict object at 0x7f82e9420540> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting user context: object of type 'Mock' has no len()
ERROR    refiloe:logger.py:25 Error getting conversation history: 'Mock' object is not reversible
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
_____________ TestClientManagementEdgeCases.test_client_not_found ______________
tests/test_phase2_client_management.py:311: in test_client_not_found
    assert 'not found' in response.get('message', '').lower() or \
E   assert ('not found' in '' or "doesn't exist" in '' or 'no client' in '')
E    +  where '' = <built-in method lower of str object at 0x7f82fd33fba0>()
E    +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
E    +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
E    +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
E    +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
E    +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
E    +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
E    +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
E    +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
E    +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
E    +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
E    +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting conversation history: 'Mock' object is not reversible
ERROR    refiloe:logger.py:25 Error creating conversation state: 'Mock' object is not subscriptable
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
_______________ TestViewScheduleReal.test_view_schedule_commands _______________
tests/test_phase3_scheduling.py:74: in test_view_schedule_commands
    assert 'schedule' in message or 'booking' in message or \
E   AssertionError: Failed to show schedule with: Show my schedule
E   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')
------------------------------ Captured log call -------------------------------
ERROR    refiloe:logger.py:25 Error getting user context: Mock.keys() returned a non-iterable (type Mock)
ERROR    refiloe:logger.py:25 Error getting conversation history: 'Mock' object is not reversible
ERROR    refiloe:logger.py:25 Error sending WhatsApp message: Object of type MagicMock is not JSON serializable
_____________ TestPhase3_SchedulingBookings.test_cancel_reschedule _____________
tests/test_refiloe_complete.py:329: in test_cancel_reschedule
    assert "reschedul" in response['message'].lower() or "moved" in response['message'].lower()
E   assert ('reschedul' in "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" or 'moved' in "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe")
E    +  where "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" = <built-in method lower of str object at 0x7f82f99d8880>()
E    +    where <built-in method lower of str object at 0x7f82f99d8880> = "Today's schedule:\n9:00 AM - Sarah Johnson\n2:00 PM - John Doe".lower
E    +  and   "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" = <built-in method lower of str object at 0x7f82f99d8880>()
E    +    where <built-in method lower of str object at 0x7f82f99d8880> = "Today's schedule:\n9:00 AM - Sarah Johnson\n2:00 PM - John Doe".lower
_______________ TestPhase6_PaymentsRevenue.test_request_payment ________________
tests/test_refiloe_complete.py:368: in test_request_payment
    assert "payment" in response['message'].lower() or "invoice" in response['message'].lower()
E   assert ('payment' in "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" or 'invoice' in "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?")
E    +  where "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" = <built-in method lower of str object at 0x7f82f993e0b0>()
E    +    where <built-in method lower of str object at 0x7f82f993e0b0> = "Welcome to Refiloe! I'm here to help you manage your personal training business. Are you a trainer or a client?".lower
E    +  and   "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" = <built-in method lower of str object at 0x7f82f993e0b0>()
E    +    where <built-in method lower of str object at 0x7f82f993e0b0> = "Welcome to Refiloe! I'm here to help you manage your personal training business. Are you a trainer or a client?".lower
_______________ TestPhase10_AdvancedFeatures.test_error_handling _______________
tests/test_refiloe_complete.py:424: in test_error_handling
    assert any(word in response['message'].lower() for word in ["past", "future", "cannot"])
E   assert False
E    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f82e9639fc0>)
=============================== warnings summary ===============================
../../../../../opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py:679: 19 warnings
  /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py:679: PydanticDeprecatedSince20: The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    model.update_forward_refs()

tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration
  /home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py:7: DeprecationWarning: 
  Pyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),
  (to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)
  but was not found to be installed on your system.
  If this would cause problems for you,
  please provide us feedback at https://github.com/pandas-dev/pandas/issues/54466
          
    import pandas as pd

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
--------------------------------- JSON report ----------------------------------
report saved to: test-results.json
- Generated html report: file:///home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/test-report.html -
=========================== short test summary info ============================
FAILED tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration - AssertionError: assert ('john' in <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> or 'welcome' in <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'>)
 +  where <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> = <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'>()
 +    where <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'> = <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>.lower
 +      where <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'> = <built-in method get of dict object at 0x7f82ea7bec40>('response', '')
 +        where <built-in method get of dict object at 0x7f82ea7bec40> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
 +  and   <MagicMock name='AIIntentHandler().generate_smart_response().lower()' id='140200256619344'> = <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'>()
 +    where <MagicMock name='AIIntentHandler().generate_smart_response().lower' id='140200256608016'> = <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>.lower
 +      where <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'> = <built-in method get of dict object at 0x7f82ea7bec40>('response', '')
 +        where <built-in method get of dict object at 0x7f82ea7bec40> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
FAILED tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration - assert False == True
 +  where False = <built-in method get of dict object at 0x7f82e9697e00>('success')
 +    where <built-in method get of dict object at 0x7f82e9697e00> = {'response': "Sorry, I'm having a bit of trouble right now. Please try again in a moment! 😊", 'success': False}.get
FAILED tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands - AssertionError: Failed to list clients with command: Show my clients
assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')
FAILED tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing - AssertionError: Failed to show pricing with: What is Sarah's rate?
assert ('r' in '' or 'rand' in '' or False)
 +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f82ea8e7920>)
FAILED tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone - AssertionError: assert ('already' in '' or 'exists' in '')
 +  where '' = <built-in method lower of str object at 0x7f82fd33fba0>()
 +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
 +      where '' = <built-in method get of dict object at 0x7f82e9420540>('message', '')
 +        where <built-in method get of dict object at 0x7f82e9420540> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
 +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
 +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
 +      where '' = <built-in method get of dict object at 0x7f82e9420540>('message', '')
 +        where <built-in method get of dict object at 0x7f82e9420540> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
FAILED tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found - assert ('not found' in '' or "doesn't exist" in '' or 'no client' in '')
 +  where '' = <built-in method lower of str object at 0x7f82fd33fba0>()
 +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
 +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
 +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
 +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
 +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
 +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
 +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
 +  and   '' = <built-in method lower of str object at 0x7f82fd33fba0>()
 +    where <built-in method lower of str object at 0x7f82fd33fba0> = ''.lower
 +      where '' = <built-in method get of dict object at 0x7f82e95a2800>('message', '')
 +        where <built-in method get of dict object at 0x7f82e95a2800> = {'response': <MagicMock name='AIIntentHandler().generate_smart_response()' id='140200256471376'>, 'success': True}.get
FAILED tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands - AssertionError: Failed to show schedule with: Show my schedule
assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')
FAILED tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule - assert ('reschedul' in "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" or 'moved' in "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe")
 +  where "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" = <built-in method lower of str object at 0x7f82f99d8880>()
 +    where <built-in method lower of str object at 0x7f82f99d8880> = "Today's schedule:\n9:00 AM - Sarah Johnson\n2:00 PM - John Doe".lower
 +  and   "today's schedule:\n9:00 am - sarah johnson\n2:00 pm - john doe" = <built-in method lower of str object at 0x7f82f99d8880>()
 +    where <built-in method lower of str object at 0x7f82f99d8880> = "Today's schedule:\n9:00 AM - Sarah Johnson\n2:00 PM - John Doe".lower
FAILED tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment - assert ('payment' in "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" or 'invoice' in "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?")
 +  where "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" = <built-in method lower of str object at 0x7f82f993e0b0>()
 +    where <built-in method lower of str object at 0x7f82f993e0b0> = "Welcome to Refiloe! I'm here to help you manage your personal training business. Are you a trainer or a client?".lower
 +  and   "welcome to refiloe! i'm here to help you manage your personal training business. are you a trainer or a client?" = <built-in method lower of str object at 0x7f82f993e0b0>()
 +    where <built-in method lower of str object at 0x7f82f993e0b0> = "Welcome to Refiloe! I'm here to help you manage your personal training business. Are you a trainer or a client?".lower
FAILED tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling - assert False
 +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f82e9639fc0>)
================= 10 failed, 46 passed, 20 warnings in 54.14s ==================
