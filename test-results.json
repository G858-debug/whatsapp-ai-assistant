{"created": 1758557428.4900575, "duration": 207.95547151565552, "exitcode": 1, "root": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant", "environment": {}, "summary": {"passed": 31, "failed": 26, "total": 57, "collected": 57}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/__init__.py", "type": "Package"}]}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "type": "Function", "lineno": 130}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "type": "Function", "lineno": 136}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "type": "Function", "lineno": 143}]}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "type": "Function", "lineno": 170}]}, {"nodeid": "tests/test_conversation_flows.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "type": "Class"}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "type": "Class"}]}, {"nodeid": "tests/test_debug.py", "outcome": "passed", "result": [{"nodeid": "tests/test_debug.py::test_python_version", "type": "Function", "lineno": 9}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "type": "Function", "lineno": 14}, {"nodeid": "tests/test_debug.py::test_project_structure", "type": "Function", "lineno": 28}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "type": "Function", "lineno": 48}, {"nodeid": "tests/test_debug.py::test_check_requirements", "type": "Function", "lineno": 84}]}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "type": "Function", "lineno": 46}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "type": "Function", "lineno": 140}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "type": "Function", "lineno": 199}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "type": "Function", "lineno": 214}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "type": "Function", "lineno": 234}]}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "type": "Function", "lineno": 324}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "type": "Function", "lineno": 341}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "type": "Function", "lineno": 366}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "type": "Function", "lineno": 385}]}, {"nodeid": "tests/test_phase1_registration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "type": "Function", "lineno": 47}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "type": "Function", "lineno": 100}]}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "type": "Function", "lineno": 140}]}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "type": "Function", "lineno": 188}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "type": "Function", "lineno": 220}]}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "type": "Function", "lineno": 253}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "type": "Function", "lineno": 270}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "type": "Function", "lineno": 300}]}, {"nodeid": "tests/test_phase2_client_management.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "type": "Function", "lineno": 53}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "type": "Function", "lineno": 110}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "type": "Function", "lineno": 144}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "type": "Function", "lineno": 169}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "type": "Function", "lineno": 223}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "type": "Function", "lineno": 248}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "type": "Function", "lineno": 283}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "type": "Function", "lineno": 313}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "type": "Function", "lineno": 334}]}, {"nodeid": "tests/test_phase3_scheduling.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "type": "Class"}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "type": "Function", "lineno": 120}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "type": "Function", "lineno": 143}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "type": "Function", "lineno": 159}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "type": "Function", "lineno": 181}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "type": "Function", "lineno": 206}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "type": "Function", "lineno": 224}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "type": "Function", "lineno": 240}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "type": "Function", "lineno": 257}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "type": "Function", "lineno": 278}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "type": "Function", "lineno": 298}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "type": "Function", "lineno": 314}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "type": "Function", "lineno": 334}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "type": "Function", "lineno": 350}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "type": "Function", "lineno": 370}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "type": "Function", "lineno": 388}]}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "type": "Function", "lineno": 408}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "type": "Function", "lineno": 438}]}, {"nodeid": "tests/test_refiloe_complete.py", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "type": "Class"}]}, {"nodeid": "tests/__init__.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py", "type": "Module"}, {"nodeid": "tests/test_debug.py", "type": "Module"}, {"nodeid": "tests/test_phase1_registration.py", "type": "Module"}, {"nodeid": "tests/test_phase2_client_management.py", "type": "Module"}, {"nodeid": "tests/test_phase3_scheduling.py", "type": "Module"}, {"nodeid": "tests/test_refiloe_complete.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "lineno": 130, "outcome": "passed", "keywords": ["test_imports_work", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000620906999998283, "outcome": "passed"}, "call": {"duration": 0.03395165899999597, "outcome": "passed"}, "teardown": {"duration": 1.6632253289999994, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "lineno": 136, "outcome": "passed", "keywords": ["test_mock_message", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003154480000091553, "outcome": "passed"}, "call": {"duration": 0.022716075000005276, "outcome": "passed"}, "teardown": {"duration": 1.1851636069999927, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "lineno": 143, "outcome": "passed", "keywords": ["test_trainer_registration_mock", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003312780000044313, "outcome": "passed"}, "call": {"duration": 0.022577676999986807, "outcome": "passed"}, "teardown": {"duration": 1.1078812619999923, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "lineno": 165, "outcome": "passed", "keywords": ["test_basic_setup", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023265274999999974, "outcome": "passed"}, "call": {"duration": 0.00012557399999479912, "outcome": "passed"}, "teardown": {"duration": 0.5748862220000035, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "lineno": 170, "outcome": "passed", "keywords": ["test_mock_registration_flow", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02236542800000052, "outcome": "passed"}, "call": {"duration": 0.00022333600000479237, "outcome": "passed"}, "teardown": {"duration": 1.4885708820000048, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_python_version", "lineno": 9, "outcome": "passed", "keywords": ["test_python_version", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002815249999912339, "outcome": "passed"}, "call": {"duration": 0.00011786999999685577, "outcome": "passed"}, "teardown": {"duration": 1.1573069920000023, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "lineno": 14, "outcome": "passed", "keywords": ["test_can_import_basic_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002811739999941665, "outcome": "passed"}, "call": {"duration": 8.936700000106157e-05, "outcome": "passed"}, "teardown": {"duration": 0.6910520670000011, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_project_structure", "lineno": 28, "outcome": "passed", "keywords": ["test_project_structure", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002849310000101468, "outcome": "passed"}, "call": {"duration": 0.0002281459999977642, "outcome": "passed"}, "teardown": {"duration": 1.1717136540000013, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "lineno": 48, "outcome": "passed", "keywords": ["test_can_import_refiloe_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00027309899999750087, "outcome": "passed"}, "call": {"duration": 0.0004204939999965518, "outcome": "passed"}, "teardown": {"duration": 1.1891629980000005, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_check_requirements", "lineno": 84, "outcome": "passed", "keywords": ["test_check_requirements", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002782489999901827, "outcome": "passed"}, "call": {"duration": 0.08083456500000352, "outcome": "passed"}, "teardown": {"duration": 0.6914741339999892, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "lineno": 46, "outcome": "failed", "keywords": ["test_complete_trainer_registration_flow", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0016026370000048473, "outcome": "passed"}, "call": {"duration": 0.0021653259999965258, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 107, "message": "assert False == True"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 107, "message": "in test_complete_trainer_registration_flow"}], "log": [{"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557232.1487532, "msecs": 148.0, "relativeCreated": 12248.599290847778, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557232.1490197, "msecs": 149.0, "relativeCreated": 12248.865842819214, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557232.1492183, "msecs": 149.0, "relativeCreated": 12249.064445495605, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557232.1495516, "msecs": 149.0, "relativeCreated": 12249.39775466919, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557232.1497705, "msecs": 149.0, "relativeCreated": 12249.616622924805, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase1_registration.py:107: in test_complete_trainer_registration_flow\n    assert result['success'] == True\nE   assert False == True"}, "teardown": {"duration": 1.190865844000001, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "lineno": 140, "outcome": "passed", "keywords": ["test_currency_parsing_variations", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0015225580000048922, "outcome": "passed"}, "call": {"duration": 0.012034522999996966, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4046202, "msecs": 404.0, "relativeCreated": 13504.46629524231, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4058337, "msecs": 405.0, "relativeCreated": 13505.679845809937, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4063551, "msecs": 406.0, "relativeCreated": 13506.201267242432, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.406878, "msecs": 406.0, "relativeCreated": 13506.724119186401, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4073422, "msecs": 407.0, "relativeCreated": 13507.188320159912, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4078248, "msecs": 407.0, "relativeCreated": 13507.670879364014, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4084342, "msecs": 408.0, "relativeCreated": 13508.280277252197, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4089162, "msecs": 408.0, "relativeCreated": 13508.76235961914, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4093766, "msecs": 409.0, "relativeCreated": 13509.222745895386, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4098427, "msecs": 409.0, "relativeCreated": 13509.68885421753, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.410291, "msecs": 410.0, "relativeCreated": 13510.13708114624, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4107573, "msecs": 410.0, "relativeCreated": 13510.603427886963, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4112175, "msecs": 411.0, "relativeCreated": 13511.063575744629, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4118207, "msecs": 411.0, "relativeCreated": 13511.666774749756, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4122653, "msecs": 412.0, "relativeCreated": 13512.11142539978, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.412729, "msecs": 412.0, "relativeCreated": 13512.575149536133, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557233.4131775, "msecs": 413.0, "relativeCreated": 13513.023614883423, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 1.2679247040000092, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "lineno": 199, "outcome": "passed", "keywords": ["test_registration_with_missing_fields", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00373967999999536, "outcome": "passed"}, "call": {"duration": 0.0008541720000039277, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557234.6864858, "msecs": 686.0, "relativeCreated": 14786.33189201355, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 1.0990514640000129, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "lineno": 214, "outcome": "failed", "keywords": ["test_trainer_recognition_after_registration", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.003858531999995307, "outcome": "passed"}, "call": {"duration": 3.959253197999999, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 231, "message": "AssertionError: Should recognize and greet trainer by name\nassert ('john' in '' or 'welcome back' in '')\n +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa569cd840>('message', '')\n +        where <built-in method get of dict object at 0x7faa569cd840> = {'response': 'Hey there! \ud83d\udc4b\\n\\nI can help you achieve your fitness goals! \ud83d\udcaa\\n\\nWhat brings you here today?', 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa569cd840>('message', '')\n +        where <built-in method get of dict object at 0x7faa569cd840> = {'response': 'Hey there! \ud83d\udc4b\\n\\nI can help you achieve your fitness goals! \ud83d\udcaa\\n\\nWhat brings you here today?', 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 231, "message": "in test_trainer_recognition_after_registration"}], "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557236.572647, "msecs": 572.0, "relativeCreated": 16672.49321937561, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Background scheduler started", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557236.6107318, "msecs": 610.0, "relativeCreated": 16710.577964782715, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Routes setup complete", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557236.6118236, "msecs": 611.0, "relativeCreated": 16711.66968345642, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557236.6174438, "msecs": 617.0, "relativeCreated": 16717.289924621582, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557236.618156, "msecs": 618.0, "relativeCreated": 16718.00208091736, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: greeting with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557239.6307569, "msecs": 630.0, "relativeCreated": 19730.602979660034, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aw5tJlvAwqKq1ezR6gi4u8l\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557239.7475746, "msecs": 747.0, "relativeCreated": 19847.420692443848, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Created new conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557239.7487783, "msecs": 748.0, "relativeCreated": 19848.62446784973, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase1_registration.py:231: in test_trainer_recognition_after_registration\n    assert 'john' in response.get('message', '').lower() or \\\nE   AssertionError: Should recognize and greet trainer by name\nE   assert ('john' in '' or 'welcome back' in '')\nE    +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa569cd840>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa569cd840> = {'response': 'Hey there! \ud83d\udc4b\\n\\nI can help you achieve your fitness goals! \ud83d\udcaa\\n\\nWhat brings you here today?', 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa569cd840>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa569cd840> = {'response': 'Hey there! \ud83d\udc4b\\n\\nI can help you achieve your fitness goals! \ud83d\udcaa\\n\\nWhat brings you here today?', 'success': True}.get"}, "teardown": {"duration": 0.6753831350000041, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "lineno": 234, "outcome": "passed", "keywords": ["test_registration_saves_all_fields_correctly", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0016400159999960806, "outcome": "passed"}, "call": {"duration": 0.0032603840000007267, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Trainer registered: John Smith (trainer-123)", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557240.4350648, "msecs": 435.0, "relativeCreated": 20534.910917282104, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5179023129999933, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "lineno": 288, "outcome": "failed", "keywords": ["test_client_receives_welcome_after_registration", "TestClientRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011554929999988417, "outcome": "passed"}, "call": {"duration": 3.419786909999999, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 297, "message": "assert ('added' in '' or 'registered' in '')\n +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa56a5bc40>('message', '')\n +        where <built-in method get of dict object at 0x7faa56a5bc40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa56a5bc40>('message', '')\n +        where <built-in method get of dict object at 0x7faa56a5bc40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 297, "message": "in test_client_receives_welcome_after_registration"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557240.9587827, "msecs": 958.0, "relativeCreated": 21058.628797531128, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557240.9594288, "msecs": 959.0, "relativeCreated": 21059.274911880493, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557244.256942, "msecs": 256.0, "relativeCreated": 24356.788158416748, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ATn11hbVDry6RpOwOuJQ_75\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557244.374015, "msecs": 374.0, "relativeCreated": 24473.86121749878, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration\n    assert 'added' in response.get('message', '').lower() or \\\nE   assert ('added' in '' or 'registered' in '')\nE    +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa56a5bc40>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa56a5bc40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa56a5bc40>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa56a5bc40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 1.2251501700000063, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "lineno": 324, "outcome": "failed", "keywords": ["test_duplicate_registration_attempt", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005211510000009412, "outcome": "passed"}, "call": {"duration": 0.004087004000012939, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 339, "message": "assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\n +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55f822b130a0>()\n +    where <built-in method lower of str object at 0x55f822b130a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\n +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55f822b130a0>()\n +    where <built-in method lower of str object at 0x55f822b130a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 339, "message": "in test_duplicate_registration_attempt"}], "log": [{"name": "refiloe", "msg": "Error checking existing registration: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557245.6079335, "msecs": 607.0, "relativeCreated": 25707.7796459198, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557245.610728, "msecs": 610.0, "relativeCreated": 25710.57415008545, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase1_registration.py:339: in test_duplicate_registration_attempt\n    assert 'already' in response.lower() or \\\nE   assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\nE    +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55f822b130a0>()\nE    +    where <built-in method lower of str object at 0x55f822b130a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\nE    +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55f822b130a0>()\nE    +    where <built-in method lower of str object at 0x55f822b130a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "teardown": {"duration": 0.4967925039999983, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "lineno": 341, "outcome": "passed", "keywords": ["test_invalid_email_format", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005256999999971868, "outcome": "passed"}, "call": {"duration": 0.0002610159999960615, "outcome": "passed"}, "teardown": {"duration": 1.2187645059999994, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "lineno": 366, "outcome": "failed", "keywords": ["test_extremely_long_input", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004966760000115755, "outcome": "passed"}, "call": {"duration": 0.0012708790000033332, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 382, "message": "AssertionError: assert 500 <= 255\n +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 382, "message": "in test_extremely_long_input"}], "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.3354137, "msecs": 335.0, "relativeCreated": 27435.25981903076, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase1_registration.py:382: in test_extremely_long_input\n    assert len(result['data']['name']) <= 255  # Reasonable limit\nE   AssertionError: assert 500 <= 255\nE    +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "teardown": {"duration": 0.501922356999998, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "lineno": 385, "outcome": "passed", "keywords": ["test_special_characters_in_name", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004969259999967335, "outcome": "passed"}, "call": {"duration": 0.0038753639999953293, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.844408, "msecs": 844.0, "relativeCreated": 27944.254159927368, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.8446162, "msecs": 844.0, "relativeCreated": 27944.462299346924, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.8465903, "msecs": 846.0, "relativeCreated": 27946.436405181885, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.8468068, "msecs": 846.0, "relativeCreated": 27946.65288925171, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.846973, "msecs": 846.0, "relativeCreated": 27946.819067001343, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557247.8471282, "msecs": 847.0, "relativeCreated": 27946.974277496338, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.830397430000005, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "lineno": 47, "outcome": "passed", "keywords": ["test_add_client_command_variations", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023646546999998463, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557248.7015846, "msecs": 701.0, "relativeCreated": 28801.430702209473, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 33.798757957999996, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557248.7026691, "msecs": 702.0, "relativeCreated": 28802.515268325806, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557248.7033122, "msecs": 703.0, "relativeCreated": 28803.158283233643, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557252.048204, "msecs": 48.0, "relativeCreated": 32148.05006980896, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A1s7Yr60WRgcHGk_a1Pg0CU\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557252.1598933, "msecs": 159.0, "relativeCreated": 32259.7393989563, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557252.161241, "msecs": 161.0, "relativeCreated": 32261.08717918396, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557252.1614199, "msecs": 161.0, "relativeCreated": 32261.265993118286, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557255.5339735, "msecs": 533.0, "relativeCreated": 35633.819580078125, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A50ZySxuyMJp-oqCdailh_x\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557255.6556077, "msecs": 655.0, "relativeCreated": 35755.45382499695, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557255.6569352, "msecs": 656.0, "relativeCreated": 35756.781339645386, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557255.6571114, "msecs": 657.0, "relativeCreated": 35756.95753097534, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557258.4833183, "msecs": 483.0, "relativeCreated": 38583.16445350647, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Adu8gFWl7lwX8Di_qFQukrt\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557258.5900428, "msecs": 590.0, "relativeCreated": 38689.8889541626, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557258.5915434, "msecs": 591.0, "relativeCreated": 38691.38956069946, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557258.591741, "msecs": 591.0, "relativeCreated": 38691.58720970154, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557261.6762202, "msecs": 676.0, "relativeCreated": 41776.066303253174, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AGGfyeDXlAMyYJIlvcRpwgo\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557261.7867377, "msecs": 786.0, "relativeCreated": 41886.58380508423, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557261.8337703, "msecs": 833.0, "relativeCreated": 41933.616399765015, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557261.8340316, "msecs": 834.0, "relativeCreated": 41933.87770652771, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557266.6714952, "msecs": 671.0, "relativeCreated": 46771.34132385254, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ABQONVjP8HMArX239pvw8F9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557266.7862833, "msecs": 786.0, "relativeCreated": 46886.12937927246, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557266.787906, "msecs": 787.0, "relativeCreated": 46887.752056121826, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557266.788129, "msecs": 788.0, "relativeCreated": 46887.975215911865, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557269.7365084, "msecs": 736.0, "relativeCreated": 49836.35449409485, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJmqNgbIQQIGERuc56LyeXN\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557269.8489707, "msecs": 848.0, "relativeCreated": 49948.816776275635, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557269.850385, "msecs": 850.0, "relativeCreated": 49950.231075286865, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557269.8508396, "msecs": 850.0, "relativeCreated": 49950.68573951721, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557272.936353, "msecs": 936.0, "relativeCreated": 53036.19909286499, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AOQ6RDF7aUDVI0ldXmrGG30\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557273.0520546, "msecs": 52.0, "relativeCreated": 53151.90076828003, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557273.053513, "msecs": 53.0, "relativeCreated": 53153.35917472839, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557273.0537915, "msecs": 53.0, "relativeCreated": 53153.637647628784, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557275.8480177, "msecs": 848.0, "relativeCreated": 55947.863817214966, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AX4fATRv2K1lEncgKKV82fh\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557275.9729438, "msecs": 972.0, "relativeCreated": 56072.789907455444, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557275.9744632, "msecs": 974.0, "relativeCreated": 56074.30934906006, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557275.97464, "msecs": 974.0, "relativeCreated": 56074.48601722717, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557279.3738248, "msecs": 373.0, "relativeCreated": 59473.670959472656, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AyPW6OVPDKDcEyzzC7NFFLn\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557279.479447, "msecs": 479.0, "relativeCreated": 59579.29301261902, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557279.4808886, "msecs": 480.0, "relativeCreated": 59580.734729766846, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557279.481067, "msecs": 481.0, "relativeCreated": 59580.913066864014, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557282.3803532, "msecs": 380.0, "relativeCreated": 62480.199337005615, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ARfrEpv5i-AOttHXTlFEWP3\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557282.4993024, "msecs": 499.0, "relativeCreated": 62599.1485118866, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5451845929999877, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "lineno": 75, "outcome": "failed", "keywords": ["test_phone_number_normalization", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02302527699998791, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557283.0693696, "msecs": 69.0, "relativeCreated": 63169.2156791687, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 0.0025197470000080102, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 98, "message": "AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nassert '+27821234567' == '27821234567'\n  - 27821234567\n  + +27821234567\n  ? +"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 98, "message": "in test_phone_number_normalization"}], "longrepr": "tests/test_phase2_client_management.py:98: in test_phone_number_normalization\n    assert normalized == expected_phone, \\\nE   AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nE   assert '+27821234567' == '27821234567'\nE     - 27821234567\nE     + +27821234567\nE     ? +"}, "teardown": {"duration": 0.7160360880000098, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "lineno": 100, "outcome": "passed", "keywords": ["test_add_client_with_special_names", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022577933999997413, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557283.815818, "msecs": 815.0, "relativeCreated": 63915.664196014404, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 24.448119515000002, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557283.8191624, "msecs": 819.0, "relativeCreated": 63919.00849342346, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557283.8197887, "msecs": 819.0, "relativeCreated": 63919.63481903076, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557286.8579545, "msecs": 857.0, "relativeCreated": 66957.80062675476, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AavO_cY90lUI2WdnF4-ic-Y\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557286.960956, "msecs": 960.0, "relativeCreated": 67060.80222129822, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557286.9622822, "msecs": 962.0, "relativeCreated": 67062.12830543518, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557286.9625382, "msecs": 962.0, "relativeCreated": 67062.38436698914, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557290.5208824, "msecs": 520.0, "relativeCreated": 70620.72849273682, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aq52rB6xsIuGjMRp7NROWmY\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557290.6263895, "msecs": 626.0, "relativeCreated": 70726.23562812805, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557290.6277232, "msecs": 627.0, "relativeCreated": 70727.56934165955, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557290.6278987, "msecs": 627.0, "relativeCreated": 70727.74481773376, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557293.7613003, "msecs": 761.0, "relativeCreated": 73861.14645004272, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A9VQcY68QrAe1WmRxRUlSRk\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557293.8681483, "msecs": 868.0, "relativeCreated": 73967.99445152283, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557293.8694932, "msecs": 869.0, "relativeCreated": 73969.33937072754, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557293.8697124, "msecs": 869.0, "relativeCreated": 73969.55847740173, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557297.3921888, "msecs": 392.0, "relativeCreated": 77492.03491210938, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Axr6_CM5GFk9EX-h3VIp7Wl\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557297.5105, "msecs": 510.0, "relativeCreated": 77610.34607887268, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557297.5119982, "msecs": 511.0, "relativeCreated": 77611.84430122375, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557297.5121734, "msecs": 512.0, "relativeCreated": 77612.0195388794, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557301.8466513, "msecs": 846.0, "relativeCreated": 81946.49744033813, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A3vvR3HMtDaYPOAVCcxz6os\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557301.9639282, "msecs": 963.0, "relativeCreated": 82063.7743473053, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557301.9654827, "msecs": 965.0, "relativeCreated": 82065.32883644104, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557301.9656672, "msecs": 965.0, "relativeCreated": 82065.51337242126, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557304.7854598, "msecs": 785.0, "relativeCreated": 84885.30588150024, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AmxU9XoafcXcMzz5AYhengJ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557304.8904014, "msecs": 890.0, "relativeCreated": 84990.24748802185, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557304.8920834, "msecs": 892.0, "relativeCreated": 84991.92953109741, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557304.892268, "msecs": 892.0, "relativeCreated": 84992.11406707764, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557308.15185, "msecs": 151.0, "relativeCreated": 88251.69610977173, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aa6c6hAyszWx-NKUah0RIX-\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557308.2628326, "msecs": 262.0, "relativeCreated": 88362.67876625061, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5479475390000061, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "lineno": 140, "outcome": "failed", "keywords": ["test_view_clients_commands", "TestViewClientsReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0014678860000003624, "outcome": "passed"}, "call": {"duration": 4.124344039999983, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 160, "message": "AssertionError: Failed to list clients with command: Show my clients\nassert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 160, "message": "in test_view_clients_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557308.8156636, "msecs": 815.0, "relativeCreated": 88915.50970077515, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557308.816305, "msecs": 816.0, "relativeCreated": 88916.15104675293, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557312.8195338, "msecs": 819.0, "relativeCreated": 92919.3799495697, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUbIAQdiMPSs2bHeBFH_daH\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557312.9364383, "msecs": 936.0, "relativeCreated": 93036.28444671631, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557312.9384072, "msecs": 938.0, "relativeCreated": 93038.25330734253, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase2_client_management.py:160: in test_view_clients_commands\n    assert 'sarah' in message or 'john' in message or 'mike' in message or \\\nE   AssertionError: Failed to list clients with command: Show my clients\nE   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "teardown": {"duration": 0.546983167999997, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "lineno": 188, "outcome": "passed", "keywords": ["test_set_custom_pricing_variations", "critical", "pytestmark", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0014319699999987279, "outcome": "passed"}, "call": {"duration": 32.71292439800001, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557313.4929013, "msecs": 492.0, "relativeCreated": 93592.74744987488, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557313.4956503, "msecs": 495.0, "relativeCreated": 93595.49641609192, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557317.5182981, "msecs": 518.0, "relativeCreated": 97618.14427375793, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AeK-bMjBxxyOkzoRu1bXZze\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557317.728052, "msecs": 728.0, "relativeCreated": 97827.8980255127, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557317.7294807, "msecs": 729.0, "relativeCreated": 97829.32686805725, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557317.7297513, "msecs": 729.0, "relativeCreated": 97829.59747314453, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557321.354107, "msecs": 354.0, "relativeCreated": 101453.95302772522, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUyhHy_9NZ2qQ3HZF3nng62\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557321.458127, "msecs": 458.0, "relativeCreated": 101557.9731464386, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557321.4594986, "msecs": 459.0, "relativeCreated": 101559.34476852417, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557321.4596686, "msecs": 459.0, "relativeCreated": 101559.51476097107, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557325.30673, "msecs": 306.0, "relativeCreated": 105406.57615661621, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A7v-ILsM7l-1LOqvN0Oz3rN\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557325.4204533, "msecs": 420.0, "relativeCreated": 105520.29943466187, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557325.4218085, "msecs": 421.0, "relativeCreated": 105521.65460586548, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557325.4220016, "msecs": 422.0, "relativeCreated": 105521.84772491455, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557330.457391, "msecs": 457.0, "relativeCreated": 110557.23714828491, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A3XDSGpvuT-lCTPhKTIxSeI\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557330.569463, "msecs": 569.0, "relativeCreated": 110669.30913925171, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557330.571131, "msecs": 571.0, "relativeCreated": 110670.9771156311, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557330.5713205, "msecs": 571.0, "relativeCreated": 110671.16665840149, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557334.1407065, "msecs": 140.0, "relativeCreated": 114240.5526638031, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ArnV1KazWTz4CY-_jzJGcrG\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557334.2519574, "msecs": 251.0, "relativeCreated": 114351.80354118347, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557334.2534401, "msecs": 253.0, "relativeCreated": 114353.2862663269, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557334.2538652, "msecs": 253.0, "relativeCreated": 114353.71136665344, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557339.250646, "msecs": 250.0, "relativeCreated": 119350.49223899841, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWej8m1T02kH1yYfrJ6WJdQ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557339.3556437, "msecs": 355.0, "relativeCreated": 119455.48987388611, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557339.357265, "msecs": 357.0, "relativeCreated": 119457.111120224, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557339.357527, "msecs": 357.0, "relativeCreated": 119457.37314224243, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557341.8332734, "msecs": 833.0, "relativeCreated": 121933.11953544617, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A-wE8T31XX1XqJjp48Qsu5e\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557341.9460201, "msecs": 946.0, "relativeCreated": 122045.86625099182, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557341.947637, "msecs": 947.0, "relativeCreated": 122047.48320579529, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557341.9478676, "msecs": 947.0, "relativeCreated": 122047.71375656128, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557346.060845, "msecs": 60.0, "relativeCreated": 126160.69102287292, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUt48Qr9f1c9dMrDzq7urCc\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557346.2034733, "msecs": 203.0, "relativeCreated": 126303.31945419312, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5412954789999844, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "lineno": 220, "outcome": "failed", "keywords": ["test_check_client_pricing", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013583420000031765, "outcome": "passed"}, "call": {"duration": 4.874500683000008, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 239, "message": "AssertionError: Failed to show pricing with: What is Sarah's rate?\nassert ('r' in '' or 'rand' in '' or False)\n +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7faa6573f060>)"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 239, "message": "in test_check_client_pricing"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557346.7512748, "msecs": 751.0, "relativeCreated": 126851.1209487915, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557346.751954, "msecs": 751.0, "relativeCreated": 126851.80020332336, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557351.4917002, "msecs": 491.0, "relativeCreated": 131591.54629707336, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVNVo9EZiFavYUnQl4SGvPJ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557351.6216264, "msecs": 621.0, "relativeCreated": 131721.47250175476, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase2_client_management.py:239: in test_check_client_pricing\n    assert 'r' in message or 'rand' in message or \\\nE   AssertionError: Failed to show pricing with: What is Sarah's rate?\nE   assert ('r' in '' or 'rand' in '' or False)\nE    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7faa6573f060>)"}, "teardown": {"duration": 1.2288083079999979, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "lineno": 253, "outcome": "failed", "keywords": ["test_add_client_with_duplicate_phone", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004331170000000384, "outcome": "passed"}, "call": {"duration": 2.59301554999999, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 268, "message": "assert ('already' in '' or 'exists' in '')\n +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa55814880>('message', '')\n +        where <built-in method get of dict object at 0x7faa55814880> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa55814880>('message', '')\n +        where <built-in method get of dict object at 0x7faa55814880> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 268, "message": "in test_add_client_with_duplicate_phone"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557352.858467, "msecs": 858.0, "relativeCreated": 132958.31322669983, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557352.8613775, "msecs": 861.0, "relativeCreated": 132961.22360229492, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557355.334739, "msecs": 334.0, "relativeCreated": 135434.5850944519, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Azt60V_5w5YRRr-KIrOLXbX\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557355.448794, "msecs": 448.0, "relativeCreated": 135548.6400127411, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone\n    assert 'already' in response.get('message', '').lower() or \\\nE   assert ('already' in '' or 'exists' in '')\nE    +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa55814880>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa55814880> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa55814880>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa55814880> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.5337488309999969, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "lineno": 270, "outcome": "passed", "keywords": ["test_invalid_phone_numbers", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004499989999828813, "outcome": "passed"}, "call": {"duration": 0.00010104899999419104, "outcome": "passed"}, "teardown": {"duration": 0.5416323139999975, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "lineno": 286, "outcome": "passed", "keywords": ["test_set_negative_pricing", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00039937399998279943, "outcome": "passed"}, "call": {"duration": 9.327399999392583e-05, "outcome": "passed"}, "teardown": {"duration": 0.5212211909999951, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "lineno": 300, "outcome": "failed", "keywords": ["test_client_not_found", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00044524099999421196, "outcome": "passed"}, "call": {"duration": 4.168161101999999, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 311, "message": "assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\n +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\n +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\n +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\n +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\n +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 311, "message": "in test_client_not_found"}], "log": [{"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557357.0587149, "msecs": 58.0, "relativeCreated": 137158.56099128723, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error creating conversation state: 'Mock' object is not subscriptable", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557357.059362, "msecs": 59.0, "relativeCreated": 137159.2080593109, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557361.1108365, "msecs": 110.0, "relativeCreated": 141210.68263053894, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Asnh_QylT7wOmXPgcImf291\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557361.2212713, "msecs": 221.0, "relativeCreated": 141321.11740112305, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase2_client_management.py:311: in test_client_not_found\n    assert 'not found' in response.get('message', '').lower() or \\\nE   assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\nE    +  where '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7faa6953fba0>()\nE    +    where <built-in method lower of str object at 0x7faa6953fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7faa557ed900>('message', '')\nE    +        where <built-in method get of dict object at 0x7faa557ed900> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.6983663069999864, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "lineno": 53, "outcome": "failed", "keywords": ["test_view_schedule_commands", "TestViewScheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.002123309000012341, "outcome": "passed"}, "call": {"duration": 3.109433972000005, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 74, "message": "AssertionError: Failed to show schedule with: Show my schedule\nassert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 74, "message": "in test_view_schedule_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557361.93004, "msecs": 930.0, "relativeCreated": 142029.88600730896, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557361.9337459, "msecs": 933.0, "relativeCreated": 142033.59198570251, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557364.9200468, "msecs": 920.0, "relativeCreated": 145019.8929309845, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AENHd5uWlytoujFp5JQks1l\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557365.0353255, "msecs": 35.0, "relativeCreated": 145135.1716518402, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557365.037513, "msecs": 37.0, "relativeCreated": 145137.35914230347, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}], "longrepr": "tests/test_phase3_scheduling.py:74: in test_view_schedule_commands\n    assert 'schedule' in message or 'booking' in message or \\\nE   AssertionError: Failed to show schedule with: Show my schedule\nE   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "teardown": {"duration": 0.9904862829999956, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "lineno": 110, "outcome": "passed", "keywords": ["test_book_session_natural_language", "critical", "pytestmark", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.024053200999986757, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557366.0571072, "msecs": 57.0, "relativeCreated": 146156.95333480835, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 0.6402595579999968, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHLXA7CxkWLupEmGPT'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHLXA7CxkWLupEmGPT'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.1277218, "msecs": 127.0, "relativeCreated": 146227.56791114807, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHLioyv1cMdMMUQHaR'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHLioyv1cMdMMUQHaR'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.273788, "msecs": 273.0, "relativeCreated": 146373.63409996033, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMMGB7YLkLFiKpcVe'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMMGB7YLkLFiKpcVe'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.3186426, "msecs": 318.0, "relativeCreated": 146418.48874092102, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMYfoLKZ6QFPr5sne'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMYfoLKZ6QFPr5sne'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.3654773, "msecs": 365.0, "relativeCreated": 146465.32344818115, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMm54eDYPEAiGZLZA'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMm54eDYPEAiGZLZA'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.4183679, "msecs": 418.0, "relativeCreated": 146518.21398735046, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMxDyKNHGHUpMcMbp'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHMxDyKNHGHUpMcMbp'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.4601438, "msecs": 460.0, "relativeCreated": 146559.98992919922, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHN9t2GYn1zdpnxJZo'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHN9t2GYn1zdpnxJZo'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.509664, "msecs": 509.0, "relativeCreated": 146609.51018333435, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNM369SsJRRtc8tnB'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNM369SsJRRtc8tnB'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.5470192, "msecs": 547.0, "relativeCreated": 146646.8653678894, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNWiM1hycdfBNa2TD'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNWiM1hycdfBNa2TD'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.5859623, "msecs": 585.0, "relativeCreated": 146685.80842018127, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNfdttzJ1zwo8AP2D'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNfdttzJ1zwo8AP2D'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.6278872, "msecs": 627.0, "relativeCreated": 146727.73337364197, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNxWBKie6oKZYYf9G'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPjHNxWBKie6oKZYYf9G'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557366.6970792, "msecs": 697.0, "relativeCreated": 146796.9253063202, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5299312850000035, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "lineno": 144, "outcome": "failed", "keywords": ["test_booking_time_formats", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022899606999999378, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557367.2511084, "msecs": 251.0, "relativeCreated": 147350.9545326233, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 0.0010848029999976916, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 168, "message": "AssertionError: Failed to validate time: 9am\nassert False == True"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 168, "message": "in test_booking_time_formats"}], "longrepr": "tests/test_phase3_scheduling.py:168: in test_booking_time_formats\n    assert is_valid == True, f\"Failed to validate time: {time_format}\"\nE   AssertionError: Failed to validate time: 9am\nE   assert False == True"}, "teardown": {"duration": 1.0178497880000066, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "lineno": 169, "outcome": "passed", "keywords": ["test_booking_date_parsing", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.024090282999992496, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557368.2988608, "msecs": 298.0, "relativeCreated": 148398.70691299438, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "call": {"duration": 0.0005098009999926489, "outcome": "passed"}, "teardown": {"duration": 0.510374459000019, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "lineno": 223, "outcome": "passed", "keywords": ["test_cancel_booking_variations", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011278430000061235, "outcome": "passed"}, "call": {"duration": 27.00613049399999, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557368.8124588, "msecs": 812.0, "relativeCreated": 148912.30487823486, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557368.813268, "msecs": 813.0, "relativeCreated": 148913.11407089233, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557372.2120633, "msecs": 212.0, "relativeCreated": 152311.90943717957, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AKoocZXBguDg4HQsurFcFQB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557372.3295681, "msecs": 329.0, "relativeCreated": 152429.41427230835, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557372.330884, "msecs": 330.0, "relativeCreated": 152430.7301044464, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557372.331058, "msecs": 331.0, "relativeCreated": 152430.90415000916, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557375.1862712, "msecs": 186.0, "relativeCreated": 155286.11731529236, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ApbkbsDj8aqjKcnLlhRvkqt\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557375.2981243, "msecs": 298.0, "relativeCreated": 155397.97043800354, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557375.299516, "msecs": 299.0, "relativeCreated": 155399.36208724976, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557375.2997127, "msecs": 299.0, "relativeCreated": 155399.55878257751, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557378.6065958, "msecs": 606.0, "relativeCreated": 158706.44187927246, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUU2sn-pGA8SHLeHC1G2jKB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557378.7954793, "msecs": 795.0, "relativeCreated": 158895.325422287, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557378.796785, "msecs": 796.0, "relativeCreated": 158896.63124084473, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557378.7969608, "msecs": 796.0, "relativeCreated": 158896.80695533752, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: booking_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557381.608704, "msecs": 608.0, "relativeCreated": 161708.55021476746, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ALXL-t6HrltVC5Ie5Bfbvqa\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557381.7219734, "msecs": 721.0, "relativeCreated": 161821.8195438385, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557381.7234325, "msecs": 723.0, "relativeCreated": 161823.2786655426, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557381.7236178, "msecs": 723.0, "relativeCreated": 161823.46391677856, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557384.4865584, "msecs": 486.0, "relativeCreated": 164586.40456199646, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aawe1KWdjXD0AwABm5vGcl5\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557384.6046581, "msecs": 604.0, "relativeCreated": 164704.5042514801, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557384.6114388, "msecs": 611.0, "relativeCreated": 164711.28487586975, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557384.6135333, "msecs": 613.0, "relativeCreated": 164713.37938308716, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557388.760145, "msecs": 760.0, "relativeCreated": 168859.9910736084, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVZ0Y0b6C6lAVd2pmQj3V9l\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557388.8757815, "msecs": 875.0, "relativeCreated": 168975.62766075134, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557388.8772044, "msecs": 877.0, "relativeCreated": 168977.05054283142, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557388.8776212, "msecs": 877.0, "relativeCreated": 168977.4672985077, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557392.2688692, "msecs": 268.0, "relativeCreated": 172368.71528625488, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AsSPMsJ-qkpSUavI8e6vCHU\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557392.386411, "msecs": 386.0, "relativeCreated": 172486.25707626343, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557392.3879077, "msecs": 387.0, "relativeCreated": 172487.75386810303, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557392.3883457, "msecs": 388.0, "relativeCreated": 172488.19184303284, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557395.6985035, "msecs": 698.0, "relativeCreated": 175798.34961891174, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AAIakP_l2tBmLRDpoYPBMYC\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557395.8164723, "msecs": 816.0, "relativeCreated": 175916.31841659546, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5050396919999969, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "lineno": 248, "outcome": "passed", "keywords": ["test_reschedule_booking", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011823329999742782, "outcome": "passed"}, "call": {"duration": 17.69471345400001, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557396.3256269, "msecs": 325.0, "relativeCreated": 176425.47297477722, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557396.3285925, "msecs": 328.0, "relativeCreated": 176428.43866348267, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557399.66407, "msecs": 664.0, "relativeCreated": 179763.916015625, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"APnLN_bhQmLqfTGzcQZ2wzn\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557399.7776256, "msecs": 777.0, "relativeCreated": 179877.47168540955, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557399.7791643, "msecs": 779.0, "relativeCreated": 179879.01043891907, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557399.779336, "msecs": 779.0, "relativeCreated": 179879.18210029602, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557403.8379421, "msecs": 837.0, "relativeCreated": 183937.78824806213, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJ7L1j3Ajhgr_kg8RsrdJrm\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557403.9538276, "msecs": 953.0, "relativeCreated": 184053.67374420166, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557403.9551804, "msecs": 955.0, "relativeCreated": 184055.02653121948, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557403.955377, "msecs": 955.0, "relativeCreated": 184055.22322654724, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: booking_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557406.7690322, "msecs": 769.0, "relativeCreated": 186868.878364563, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"As5VTF-WduPldDVKAneojnm\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557406.8838027, "msecs": 883.0, "relativeCreated": 186983.64877700806, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557406.8853185, "msecs": 885.0, "relativeCreated": 186985.16464233398, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557406.8854933, "msecs": 885.0, "relativeCreated": 186985.33940315247, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557410.0559974, "msecs": 55.0, "relativeCreated": 190155.84349632263, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Al1-Xnhva2qj17XjAwlg576\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557410.171571, "msecs": 171.0, "relativeCreated": 190271.4171409607, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557410.173208, "msecs": 173.0, "relativeCreated": 190273.0541229248, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557410.1733904, "msecs": 173.0, "relativeCreated": 190273.23651313782, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Error parsing datetime 'afternoon': String does not contain a date: afternoon", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557413.8903623, "msecs": 890.0, "relativeCreated": 193990.20838737488, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "AI Intent detected: session_modification with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758557413.890454, "msecs": 890.0, "relativeCreated": 193990.30017852783, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AqBJ_HPelFUf8GVAbTF8gbt\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557414.0182457, "msecs": 18.0, "relativeCreated": 194118.09182167053, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.5908713540000008, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "lineno": 283, "outcome": "passed", "keywords": ["test_double_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005031180000401037, "outcome": "passed"}, "call": {"duration": 0.00139247599997816, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557414.6131253, "msecs": 613.0, "relativeCreated": 194712.97144889832, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.516431429000022, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "lineno": 313, "outcome": "passed", "keywords": ["test_past_date_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005849710000234154, "outcome": "passed"}, "call": {"duration": 0.0013483739999742284, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758557415.1321633, "msecs": 132.0, "relativeCreated": 195232.00941085815, "thread": 140369889426304, "threadName": "MainThread", "processName": "MainProcess", "process": 2183}]}, "teardown": {"duration": 0.6838075560000334, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "lineno": 334, "outcome": "passed", "keywords": ["test_invalid_time_slots", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005130260000214548, "outcome": "passed"}, "call": {"duration": 0.0001886019999801647, "outcome": "passed"}, "teardown": {"duration": 0.5496312070000045, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "lineno": 79, "outcome": "failed", "keywords": ["test_new_trainer_onboarding", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00030059100004109496, "outcome": "passed"}, "call": {"duration": 0.001415878999978304, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 89, "message": "AssertionError: assert 'welcome' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7faa555be010>()\n +    where <built-in method lower of str object at 0x7faa555be010> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 89, "message": "in test_new_trainer_onboarding"}], "longrepr": "tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding\n    assert \"welcome\" in response['message'].lower()\nE   AssertionError: assert 'welcome' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7faa555be010>()\nE    +    where <built-in method lower of str object at 0x7faa555be010> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 1.0270979919999945, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "lineno": 120, "outcome": "failed", "keywords": ["test_trainer_recognition", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002659659999721953, "outcome": "passed"}, "call": {"duration": 0.0013648450000118828, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 134, "message": "AssertionError: assert 'john' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7faa5574b0a0>()\n +    where <built-in method lower of str object at 0x7faa5574b0a0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 134, "message": "in test_trainer_recognition"}], "longrepr": "tests/test_refiloe_complete.py:134: in test_trainer_recognition\n    assert \"john\" in response['message'].lower()\nE   AssertionError: assert 'john' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7faa5574b0a0>()\nE    +    where <built-in method lower of str object at 0x7faa5574b0a0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 0.8594623989999945, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "lineno": 143, "outcome": "failed", "keywords": ["test_add_client_variations", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002851009999744747, "outcome": "passed"}, "call": {"duration": 0.0008379120000086004, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 158, "message": "AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\n +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7faa5569f990>()\n +    where <built-in method lower of str object at 0x7faa5569f990> = 'Mock response to: Add client Sarah 0821234567'.lower\n +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7faa5569f990>()\n +    where <built-in method lower of str object at 0x7faa5569f990> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 158, "message": "in test_add_client_variations"}], "longrepr": "tests/test_refiloe_complete.py:158: in test_add_client_variations\n    assert \"added\" in response['message'].lower() or \"registered\" in response['message'].lower()\nE   AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\nE    +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7faa5569f990>()\nE    +    where <built-in method lower of str object at 0x7faa5569f990> = 'Mock response to: Add client Sarah 0821234567'.lower\nE    +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7faa5569f990>()\nE    +    where <built-in method lower of str object at 0x7faa5569f990> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "teardown": {"duration": 0.5251477859999909, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "lineno": 159, "outcome": "failed", "keywords": ["test_view_clients", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002937880000217774, "outcome": "passed"}, "call": {"duration": 0.0012557109999988825, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 179, "message": "AssertionError: assert 'sarah' in 'mock response to: show my clients'\n +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7faa55768e70>()\n +    where <built-in method lower of str object at 0x7faa55768e70> = 'Mock response to: Show my clients'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 179, "message": "in test_view_clients"}], "longrepr": "tests/test_refiloe_complete.py:179: in test_view_clients\n    assert \"sarah\" in response['message'].lower()\nE   AssertionError: assert 'sarah' in 'mock response to: show my clients'\nE    +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7faa55768e70>()\nE    +    where <built-in method lower of str object at 0x7faa55768e70> = 'Mock response to: Show my clients'.lower"}, "teardown": {"duration": 0.8968432149999899, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "lineno": 181, "outcome": "failed", "keywords": ["test_set_custom_pricing", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00027326899999025045, "outcome": "passed"}, "call": {"duration": 0.0010201019999840355, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 196, "message": "assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\n +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7faa556b9760>()\n +    where <built-in method lower of str object at 0x7faa556b9760> = \"Mock response to: Change John's price to R500 per session\".lower\n +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7faa556b9760>()\n +    where <built-in method lower of str object at 0x7faa556b9760> = \"Mock response to: Change John's price to R500 per session\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 196, "message": "in test_set_custom_pricing"}], "longrepr": "tests/test_refiloe_complete.py:196: in test_set_custom_pricing\n    assert \"updated\" in response['message'].lower() or \"set\" in response['message'].lower()\nE   assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\nE    +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7faa556b9760>()\nE    +    where <built-in method lower of str object at 0x7faa556b9760> = \"Mock response to: Change John's price to R500 per session\".lower\nE    +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7faa556b9760>()\nE    +    where <built-in method lower of str object at 0x7faa556b9760> = \"Mock response to: Change John's price to R500 per session\".lower"}, "teardown": {"duration": 0.5137052019999828, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "lineno": 206, "outcome": "failed", "keywords": ["test_view_schedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00028814699999202276, "outcome": "passed"}, "call": {"duration": 0.00085665700004256, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 223, "message": "assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\n +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7faa55769050>()\n +    where <built-in method lower of str object at 0x7faa55769050> = \"Mock response to: What's on today\".lower\n +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7faa55769050>()\n +    where <built-in method lower of str object at 0x7faa55769050> = \"Mock response to: What's on today\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 223, "message": "in test_view_schedule"}], "longrepr": "tests/test_refiloe_complete.py:223: in test_view_schedule\n    assert \"schedule\" in response['message'].lower() or \"booking\" in response['message'].lower()\nE   assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\nE    +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7faa55769050>()\nE    +    where <built-in method lower of str object at 0x7faa55769050> = \"Mock response to: What's on today\".lower\nE    +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7faa55769050>()\nE    +    where <built-in method lower of str object at 0x7faa55769050> = \"Mock response to: What's on today\".lower"}, "teardown": {"duration": 0.9078815119999604, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "lineno": 224, "outcome": "failed", "keywords": ["test_book_sessions", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002925649999951929, "outcome": "passed"}, "call": {"duration": 0.0009019910000347409, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 239, "message": "AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\n +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7faa556bbe50>()\n +    where <built-in method lower of str object at 0x7faa556bbe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\n +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7faa556bbe50>()\n +    where <built-in method lower of str object at 0x7faa556bbe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 239, "message": "in test_book_sessions"}], "longrepr": "tests/test_refiloe_complete.py:239: in test_book_sessions\n    assert \"booked\" in response['message'].lower() or \"scheduled\" in response['message'].lower()\nE   AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\nE    +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7faa556bbe50>()\nE    +    where <built-in method lower of str object at 0x7faa556bbe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\nE    +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7faa556bbe50>()\nE    +    where <built-in method lower of str object at 0x7faa556bbe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "teardown": {"duration": 0.9725866300000234, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "lineno": 240, "outcome": "passed", "keywords": ["test_cancel_reschedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002999089999775606, "outcome": "passed"}, "call": {"duration": 0.0006885440000132803, "outcome": "passed"}, "teardown": {"duration": 1.0308513389999803, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "lineno": 257, "outcome": "failed", "keywords": ["test_setup_habits", "TestPhase4_HabitTracking", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002774270000145407, "outcome": "passed"}, "call": {"duration": 0.004683591000002707, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 273, "message": "AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\n +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7faa556b80a0>()\n +    where <built-in method lower of str object at 0x7faa556b80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\n +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7faa556b80a0>()\n +    where <built-in method lower of str object at 0x7faa556b80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 273, "message": "in test_setup_habits"}], "longrepr": "tests/test_refiloe_complete.py:273: in test_setup_habits\n    assert \"habit\" in response['message'].lower() or \"tracking\" in response['message'].lower()\nE   AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\nE    +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7faa556b80a0>()\nE    +    where <built-in method lower of str object at 0x7faa556b80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\nE    +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7faa556b80a0>()\nE    +    where <built-in method lower of str object at 0x7faa556b80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "teardown": {"duration": 0.5204484479999678, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "lineno": 278, "outcome": "failed", "keywords": ["test_send_workouts", "TestPhase5_WorkoutsAssessments", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002821559999688361, "outcome": "passed"}, "call": {"duration": 0.0008501140000021223, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 293, "message": "AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\n +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7faa55769e90>()\n +    where <built-in method lower of str object at 0x7faa55769e90> = 'Mock response to: Send Mike a cardio program'.lower\n +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7faa55769e90>()\n +    where <built-in method lower of str object at 0x7faa55769e90> = 'Mock response to: Send Mike a cardio program'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 293, "message": "in test_send_workouts"}], "longrepr": "tests/test_refiloe_complete.py:293: in test_send_workouts\n    assert \"workout\" in response['message'].lower() or \"sent\" in response['message'].lower()\nE   AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\nE    +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7faa55769e90>()\nE    +    where <built-in method lower of str object at 0x7faa55769e90> = 'Mock response to: Send Mike a cardio program'.lower\nE    +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7faa55769e90>()\nE    +    where <built-in method lower of str object at 0x7faa55769e90> = 'Mock response to: Send Mike a cardio program'.lower"}, "teardown": {"duration": 0.508327200999986, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "lineno": 298, "outcome": "failed", "keywords": ["test_request_payment", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002775070000211599, "outcome": "passed"}, "call": {"duration": 0.0008133659999884912, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 313, "message": "AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\n +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7faa555cfb70>()\n +    where <built-in method lower of str object at 0x7faa555cfb70> = 'Mock response to: Bill Mike for this month'.lower\n +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7faa555cfb70>()\n +    where <built-in method lower of str object at 0x7faa555cfb70> = 'Mock response to: Bill Mike for this month'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 313, "message": "in test_request_payment"}], "longrepr": "tests/test_refiloe_complete.py:313: in test_request_payment\n    assert \"payment\" in response['message'].lower() or \"invoice\" in response['message'].lower()\nE   AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\nE    +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7faa555cfb70>()\nE    +    where <built-in method lower of str object at 0x7faa555cfb70> = 'Mock response to: Bill Mike for this month'.lower\nE    +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7faa555cfb70>()\nE    +    where <built-in method lower of str object at 0x7faa555cfb70> = 'Mock response to: Bill Mike for this month'.lower"}, "teardown": {"duration": 0.5371044149999875, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "lineno": 314, "outcome": "passed", "keywords": ["test_check_revenue", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000274390999948082, "outcome": "passed"}, "call": {"duration": 0.0007172869999862996, "outcome": "passed"}, "teardown": {"duration": 0.5005626089999851, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "lineno": 334, "outcome": "failed", "keywords": ["test_client_booking", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00026689700001725214, "outcome": "passed"}, "call": {"duration": 0.004965808000008565, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 349, "message": "AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\n +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7faa55768a50>()\n +    where <built-in method lower of str object at 0x7faa55768a50> = 'Mock response to: I want to train tomorrow'.lower\n +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7faa55768a50>()\n +    where <built-in method lower of str object at 0x7faa55768a50> = 'Mock response to: I want to train tomorrow'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 349, "message": "in test_client_booking"}], "longrepr": "tests/test_refiloe_complete.py:349: in test_client_booking\n    assert \"book\" in response['message'].lower() or \"session\" in response['message'].lower()\nE   AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\nE    +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7faa55768a50>()\nE    +    where <built-in method lower of str object at 0x7faa55768a50> = 'Mock response to: I want to train tomorrow'.lower\nE    +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7faa55768a50>()\nE    +    where <built-in method lower of str object at 0x7faa55768a50> = 'Mock response to: I want to train tomorrow'.lower"}, "teardown": {"duration": 0.5253587380000226, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "lineno": 350, "outcome": "failed", "keywords": ["test_client_habit_logging", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00025743999998439904, "outcome": "passed"}, "call": {"duration": 0.0008020949999831828, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 365, "message": "AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\n +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7faa55581430>()\n +    where <built-in method lower of str object at 0x7faa55581430> = 'Mock response to: 7 yes no'.lower\n +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7faa55581430>()\n +    where <built-in method lower of str object at 0x7faa55581430> = 'Mock response to: 7 yes no'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 365, "message": "in test_client_habit_logging"}], "longrepr": "tests/test_refiloe_complete.py:365: in test_client_habit_logging\n    assert \"logged\" in response['message'].lower() or \"recorded\" in response['message'].lower()\nE   AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\nE    +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7faa55581430>()\nE    +    where <built-in method lower of str object at 0x7faa55581430> = 'Mock response to: 7 yes no'.lower\nE    +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7faa55581430>()\nE    +    where <built-in method lower of str object at 0x7faa55581430> = 'Mock response to: 7 yes no'.lower"}, "teardown": {"duration": 0.532921282000018, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "lineno": 370, "outcome": "passed", "keywords": ["test_natural_language_understanding", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029813599996941775, "outcome": "passed"}, "call": {"duration": 0.0006826019999834898, "outcome": "passed"}, "teardown": {"duration": 0.545812361000003, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "lineno": 388, "outcome": "failed", "keywords": ["test_error_handling", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00026855000004388785, "outcome": "passed"}, "call": {"duration": 0.00484233800000311, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 403, "message": "assert False\n +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7faa55854660>)"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 403, "message": "in test_error_handling"}], "longrepr": "tests/test_refiloe_complete.py:403: in test_error_handling\n    assert any(word in response['message'].lower() for word in expected_words)\nE   assert False\nE    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7faa55854660>)"}, "teardown": {"duration": 0.5499620279999817, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "lineno": 408, "outcome": "failed", "keywords": ["test_trainer_registration_step_7_currency_parsing", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00026595500003168127, "outcome": "passed"}, "call": {"duration": 0.0009178210000300169, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 437, "message": "TypeError: 'Mock' object is not subscriptable"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 437, "message": "in test_trainer_registration_step_7_currency_parsing"}], "longrepr": "tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing\n    assert result['data'].get('pricing') == expected_value\nE   TypeError: 'Mock' object is not subscriptable"}, "teardown": {"duration": 0.5001563940000437, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "lineno": 438, "outcome": "passed", "keywords": ["test_ai_responds_naturally_not_rigid_commands", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00030238400000826005, "outcome": "passed"}, "call": {"duration": 0.0007477440000229763, "outcome": "passed"}, "teardown": {"duration": 0.5170396510000046, "outcome": "passed"}}], "warnings": [{"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "\nPyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),\n(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)\nbut was not found to be installed on your system.\nIf this would cause problems for you,\nplease provide us feedback at https://github.com/pandas-dev/pandas/issues/54466\n        ", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py", "lineno": 7}]}