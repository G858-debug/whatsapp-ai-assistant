{"created": 1758560546.9502003, "duration": 234.29427194595337, "exitcode": 1, "root": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant", "environment": {}, "summary": {"passed": 31, "failed": 26, "total": 57, "collected": 57}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/__init__.py", "type": "Package"}]}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "type": "Function", "lineno": 130}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "type": "Function", "lineno": 136}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "type": "Function", "lineno": 143}]}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "type": "Function", "lineno": 170}]}, {"nodeid": "tests/test_conversation_flows.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "type": "Class"}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "type": "Class"}]}, {"nodeid": "tests/test_debug.py", "outcome": "passed", "result": [{"nodeid": "tests/test_debug.py::test_python_version", "type": "Function", "lineno": 9}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "type": "Function", "lineno": 14}, {"nodeid": "tests/test_debug.py::test_project_structure", "type": "Function", "lineno": 28}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "type": "Function", "lineno": 48}, {"nodeid": "tests/test_debug.py::test_check_requirements", "type": "Function", "lineno": 84}]}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "type": "Function", "lineno": 46}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "type": "Function", "lineno": 140}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "type": "Function", "lineno": 199}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "type": "Function", "lineno": 214}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "type": "Function", "lineno": 234}]}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "type": "Function", "lineno": 324}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "type": "Function", "lineno": 341}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "type": "Function", "lineno": 366}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "type": "Function", "lineno": 385}]}, {"nodeid": "tests/test_phase1_registration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "type": "Function", "lineno": 47}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "type": "Function", "lineno": 100}]}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "type": "Function", "lineno": 140}]}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "type": "Function", "lineno": 188}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "type": "Function", "lineno": 220}]}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "type": "Function", "lineno": 253}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "type": "Function", "lineno": 270}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "type": "Function", "lineno": 300}]}, {"nodeid": "tests/test_phase2_client_management.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "type": "Function", "lineno": 53}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "type": "Function", "lineno": 110}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "type": "Function", "lineno": 144}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "type": "Function", "lineno": 169}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "type": "Function", "lineno": 223}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "type": "Function", "lineno": 248}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "type": "Function", "lineno": 283}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "type": "Function", "lineno": 313}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "type": "Function", "lineno": 334}]}, {"nodeid": "tests/test_phase3_scheduling.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "type": "Class"}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "type": "Function", "lineno": 120}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "type": "Function", "lineno": 143}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "type": "Function", "lineno": 159}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "type": "Function", "lineno": 181}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "type": "Function", "lineno": 206}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "type": "Function", "lineno": 224}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "type": "Function", "lineno": 240}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "type": "Function", "lineno": 257}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "type": "Function", "lineno": 278}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "type": "Function", "lineno": 298}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "type": "Function", "lineno": 314}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "type": "Function", "lineno": 334}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "type": "Function", "lineno": 350}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "type": "Function", "lineno": 370}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "type": "Function", "lineno": 388}]}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "type": "Function", "lineno": 408}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "type": "Function", "lineno": 438}]}, {"nodeid": "tests/test_refiloe_complete.py", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "type": "Class"}]}, {"nodeid": "tests/__init__.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py", "type": "Module"}, {"nodeid": "tests/test_debug.py", "type": "Module"}, {"nodeid": "tests/test_phase1_registration.py", "type": "Module"}, {"nodeid": "tests/test_phase2_client_management.py", "type": "Module"}, {"nodeid": "tests/test_phase3_scheduling.py", "type": "Module"}, {"nodeid": "tests/test_refiloe_complete.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "lineno": 130, "outcome": "passed", "keywords": ["test_imports_work", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005407670000039388, "outcome": "passed"}, "call": {"duration": 0.03293419200001324, "outcome": "passed"}, "teardown": {"duration": 0.7082417889999988, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "lineno": 136, "outcome": "passed", "keywords": ["test_mock_message", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003505920000037577, "outcome": "passed"}, "call": {"duration": 0.0219332080000072, "outcome": "passed"}, "teardown": {"duration": 0.5498140549999988, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "lineno": 143, "outcome": "passed", "keywords": ["test_trainer_registration_mock", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003583470000023681, "outcome": "passed"}, "call": {"duration": 0.022164157999995382, "outcome": "passed"}, "teardown": {"duration": 1.2763534890000017, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "lineno": 165, "outcome": "passed", "keywords": ["test_basic_setup", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022718970999989097, "outcome": "passed"}, "call": {"duration": 0.00010014599999408347, "outcome": "passed"}, "teardown": {"duration": 1.181242245000007, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "lineno": 170, "outcome": "passed", "keywords": ["test_mock_registration_flow", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022249125999991293, "outcome": "passed"}, "call": {"duration": 0.00019489299999975174, "outcome": "passed"}, "teardown": {"duration": 0.6653927159999995, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_python_version", "lineno": 9, "outcome": "passed", "keywords": ["test_python_version", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029328499999792257, "outcome": "passed"}, "call": {"duration": 0.0001001569999914409, "outcome": "passed"}, "teardown": {"duration": 0.8653480020000046, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "lineno": 14, "outcome": "passed", "keywords": ["test_can_import_basic_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003100569999929803, "outcome": "passed"}, "call": {"duration": 8.892600000365292e-05, "outcome": "passed"}, "teardown": {"duration": 1.2355050559999938, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_project_structure", "lineno": 28, "outcome": "passed", "keywords": ["test_project_structure", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029848500000184686, "outcome": "passed"}, "call": {"duration": 0.00023763199999393692, "outcome": "passed"}, "teardown": {"duration": 1.0370421120000088, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "lineno": 48, "outcome": "passed", "keywords": ["test_can_import_refiloe_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00026073599998710506, "outcome": "passed"}, "call": {"duration": 0.000433736999994494, "outcome": "passed"}, "teardown": {"duration": 1.212855177999998, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_check_requirements", "lineno": 84, "outcome": "passed", "keywords": ["test_check_requirements", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029979800000035084, "outcome": "passed"}, "call": {"duration": 0.07445374700000684, "outcome": "passed"}, "teardown": {"duration": 1.0852699329999922, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "lineno": 46, "outcome": "failed", "keywords": ["test_complete_trainer_registration_flow", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0015545039999977917, "outcome": "passed"}, "call": {"duration": 0.0021519950000055132, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 107, "message": "assert False == True"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 107, "message": "in test_complete_trainer_registration_flow"}], "log": [{"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560323.131864, "msecs": 131.0, "relativeCreated": 11027.108192443848, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560323.1321526, "msecs": 132.0, "relativeCreated": 11027.39667892456, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560323.1323476, "msecs": 132.0, "relativeCreated": 11027.591705322266, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560323.1326904, "msecs": 132.0, "relativeCreated": 11027.934551239014, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560323.132909, "msecs": 132.0, "relativeCreated": 11028.15318107605, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase1_registration.py:107: in test_complete_trainer_registration_flow\n    assert result['success'] == True\nE   assert False == True"}, "teardown": {"duration": 0.8604495509999879, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "lineno": 140, "outcome": "passed", "keywords": ["test_currency_parsing_variations", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001480847000010499, "outcome": "passed"}, "call": {"duration": 0.01211566199998515, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0559046, "msecs": 55.0, "relativeCreated": 11951.148748397827, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.057011, "msecs": 57.0, "relativeCreated": 11952.255010604858, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0575385, "msecs": 57.0, "relativeCreated": 11952.78263092041, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0580702, "msecs": 58.0, "relativeCreated": 11953.314304351807, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.058545, "msecs": 58.0, "relativeCreated": 11953.789234161377, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.059029, "msecs": 59.0, "relativeCreated": 11954.273223876953, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.059646, "msecs": 59.0, "relativeCreated": 11954.890012741089, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0601609, "msecs": 60.0, "relativeCreated": 11955.404996871948, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0606413, "msecs": 60.0, "relativeCreated": 11955.885410308838, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0611126, "msecs": 61.0, "relativeCreated": 11956.356763839722, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0615695, "msecs": 61.0, "relativeCreated": 11956.81357383728, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.062051, "msecs": 62.0, "relativeCreated": 11957.295179367065, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0625057, "msecs": 62.0, "relativeCreated": 11957.749843597412, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0631275, "msecs": 63.0, "relativeCreated": 11958.371639251709, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.0635855, "msecs": 63.0, "relativeCreated": 11958.829641342163, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.064068, "msecs": 64.0, "relativeCreated": 11959.312200546265, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.064521, "msecs": 64.0, "relativeCreated": 11959.765195846558, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.7506739510000102, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "lineno": 199, "outcome": "passed", "keywords": ["test_registration_with_missing_fields", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0036538509999957114, "outcome": "passed"}, "call": {"duration": 0.0008248460000004343, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560324.820436, "msecs": 820.0, "relativeCreated": 12715.680122375488, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.5241663930000016, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "lineno": 214, "outcome": "failed", "keywords": ["test_trainer_recognition_after_registration", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.003663138000007393, "outcome": "passed"}, "call": {"duration": 3.994434659999996, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 231, "message": "AssertionError: Should recognize and greet trainer by name\nassert ('john' in '' or 'welcome back' in '')\n +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f22610b9800>('message', '')\n +        where <built-in method get of dict object at 0x7f22610b9800> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f22610b9800>('message', '')\n +        where <built-in method get of dict object at 0x7f22610b9800> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 231, "message": "in test_trainer_recognition_after_registration"}], "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560326.0777662, "msecs": 77.0, "relativeCreated": 13973.010301589966, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Background scheduler started", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560326.1124296, "msecs": 112.0, "relativeCreated": 14007.673740386963, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Routes setup complete", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560326.1134114, "msecs": 113.0, "relativeCreated": 14008.655548095703, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560326.1189198, "msecs": 118.0, "relativeCreated": 14014.163970947266, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560326.1195972, "msecs": 119.0, "relativeCreated": 14014.841318130493, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: greeting with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560329.1392808, "msecs": 139.0, "relativeCreated": 17034.52491760254, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A7PaAI8djcfo7Y-3agx9Nji\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560329.3420014, "msecs": 342.0, "relativeCreated": 17237.245559692383, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Created new conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560329.3427787, "msecs": 342.0, "relativeCreated": 17238.022804260254, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase1_registration.py:231: in test_trainer_recognition_after_registration\n    assert 'john' in response.get('message', '').lower() or \\\nE   AssertionError: Should recognize and greet trainer by name\nE   assert ('john' in '' or 'welcome back' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f22610b9800>('message', '')\nE    +        where <built-in method get of dict object at 0x7f22610b9800> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f22610b9800>('message', '')\nE    +        where <built-in method get of dict object at 0x7f22610b9800> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "teardown": {"duration": 0.5228388159999895, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "lineno": 234, "outcome": "passed", "keywords": ["test_registration_saves_all_fields_correctly", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0015593019999755597, "outcome": "passed"}, "call": {"duration": 0.003078158000022313, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Trainer registered: John Smith (trainer-123)", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560329.876106, "msecs": 876.0, "relativeCreated": 17771.350145339966, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 1.3609427940000103, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "lineno": 288, "outcome": "failed", "keywords": ["test_client_receives_welcome_after_registration", "TestClientRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0012770269999862194, "outcome": "passed"}, "call": {"duration": 3.095661258000007, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 297, "message": "assert ('added' in '' or 'registered' in '')\n +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f226114b200>('message', '')\n +        where <built-in method get of dict object at 0x7f226114b200> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f226114b200>('message', '')\n +        where <built-in method get of dict object at 0x7f226114b200> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 297, "message": "in test_client_receives_welcome_after_registration"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560331.2427928, "msecs": 242.0, "relativeCreated": 19138.036966323853, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560331.2434268, "msecs": 243.0, "relativeCreated": 19138.670921325684, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560334.1503236, "msecs": 150.0, "relativeCreated": 22045.567750930786, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AEHA_6m9ylA4diHdI26W3Cf\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560334.3342853, "msecs": 334.0, "relativeCreated": 22229.52938079834, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration\n    assert 'added' in response.get('message', '').lower() or \\\nE   assert ('added' in '' or 'registered' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f226114b200>('message', '')\nE    +        where <built-in method get of dict object at 0x7f226114b200> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f226114b200>('message', '')\nE    +        where <built-in method get of dict object at 0x7f226114b200> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.8270564000000036, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "lineno": 324, "outcome": "failed", "keywords": ["test_duplicate_registration_attempt", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005148779999899489, "outcome": "passed"}, "call": {"duration": 0.003993930999996564, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 339, "message": "assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\n +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x561fd79b50a0>()\n +    where <built-in method lower of str object at 0x561fd79b50a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\n +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x561fd79b50a0>()\n +    where <built-in method lower of str object at 0x561fd79b50a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 339, "message": "in test_duplicate_registration_attempt"}], "log": [{"name": "refiloe", "msg": "Error checking existing registration: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560335.1698072, "msecs": 169.0, "relativeCreated": 23065.051317214966, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560335.1725624, "msecs": 172.0, "relativeCreated": 23067.806482315063, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase1_registration.py:339: in test_duplicate_registration_attempt\n    assert 'already' in response.lower() or \\\nE   assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\nE    +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x561fd79b50a0>()\nE    +    where <built-in method lower of str object at 0x561fd79b50a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\nE    +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x561fd79b50a0>()\nE    +    where <built-in method lower of str object at 0x561fd79b50a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "teardown": {"duration": 0.5302812729999857, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "lineno": 341, "outcome": "passed", "keywords": ["test_invalid_email_format", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005213299999979881, "outcome": "passed"}, "call": {"duration": 0.000250886999992872, "outcome": "passed"}, "teardown": {"duration": 0.8373291789999939, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "lineno": 366, "outcome": "failed", "keywords": ["test_extremely_long_input", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005573569999910433, "outcome": "passed"}, "call": {"duration": 0.0012421410000058586, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 382, "message": "AssertionError: assert 500 <= 255\n +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 382, "message": "in test_extremely_long_input"}], "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560336.5490448, "msecs": 549.0, "relativeCreated": 24444.288969039917, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase1_registration.py:382: in test_extremely_long_input\n    assert len(result['data']['name']) <= 255  # Reasonable limit\nE   AssertionError: assert 500 <= 255\nE    +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "teardown": {"duration": 0.48674595299999623, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "lineno": 385, "outcome": "passed", "keywords": ["test_special_characters_in_name", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005524480000076437, "outcome": "passed"}, "call": {"duration": 0.003748333999993747, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0427701, "msecs": 42.0, "relativeCreated": 24938.014268875122, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0430048, "msecs": 43.0, "relativeCreated": 24938.248872756958, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0448592, "msecs": 44.0, "relativeCreated": 24940.10329246521, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0450506, "msecs": 45.0, "relativeCreated": 24940.29474258423, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0452073, "msecs": 45.0, "relativeCreated": 24940.4513835907, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.0453565, "msecs": 45.0, "relativeCreated": 24940.600633621216, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.4900170759999867, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "lineno": 47, "outcome": "passed", "keywords": ["test_add_client_command_variations", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023314943000002586, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560337.559176, "msecs": 559.0, "relativeCreated": 25454.42008972168, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 46.644752316999984, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.5600858, "msecs": 560.0, "relativeCreated": 25455.32989501953, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560337.5606837, "msecs": 560.0, "relativeCreated": 25455.927848815918, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560340.4865282, "msecs": 486.0, "relativeCreated": 28381.77227973938, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AOSYg9c8pw2_BRzVFsuE7IA\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560340.595968, "msecs": 595.0, "relativeCreated": 28491.212129592896, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560340.59696, "msecs": 596.0, "relativeCreated": 28492.204189300537, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560340.5971353, "msecs": 597.0, "relativeCreated": 28492.379426956177, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560343.8733647, "msecs": 873.0, "relativeCreated": 31768.608808517456, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AE9Q6wZds2RNjepXRFgXAvo\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560343.9889045, "msecs": 988.0, "relativeCreated": 31884.148597717285, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560343.9900286, "msecs": 990.0, "relativeCreated": 31885.27274131775, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560343.9902124, "msecs": 990.0, "relativeCreated": 31885.456562042236, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560350.8322861, "msecs": 832.0, "relativeCreated": 38727.53024101257, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AyQkQtHB861tkv6bnUqZfYS\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560350.9354813, "msecs": 935.0, "relativeCreated": 38830.72543144226, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560350.9365556, "msecs": 936.0, "relativeCreated": 38831.79974555969, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560350.9367275, "msecs": 936.0, "relativeCreated": 38831.971645355225, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560354.8112864, "msecs": 811.0, "relativeCreated": 42706.53057098389, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ACdqJmn_xYau40CqfD2acSr\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560354.914977, "msecs": 914.0, "relativeCreated": 42810.22119522095, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560354.9489613, "msecs": 948.0, "relativeCreated": 42844.205379486084, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560354.9492176, "msecs": 949.0, "relativeCreated": 42844.46167945862, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560358.1461065, "msecs": 146.0, "relativeCreated": 46041.35060310364, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Au9FlEsavQIyK11C-TUzxcY\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560358.2558513, "msecs": 255.0, "relativeCreated": 46151.095390319824, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560358.2570984, "msecs": 257.0, "relativeCreated": 46152.342557907104, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560358.2572746, "msecs": 257.0, "relativeCreated": 46152.51874923706, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560361.9185407, "msecs": 918.0, "relativeCreated": 49813.78483772278, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AbTq8RI6zJ8illkWjlSeX1Y\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560362.0245588, "msecs": 24.0, "relativeCreated": 49919.80290412903, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560362.026099, "msecs": 26.0, "relativeCreated": 49921.343088150024, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560362.0263495, "msecs": 26.0, "relativeCreated": 49921.59366607666, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560365.7892685, "msecs": 789.0, "relativeCreated": 53684.51261520386, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AvyJge_OAvMB8OlcKLU1vwO\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560365.8971884, "msecs": 897.0, "relativeCreated": 53792.4325466156, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560365.8981009, "msecs": 898.0, "relativeCreated": 53793.34497451782, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560365.8984632, "msecs": 898.0, "relativeCreated": 53793.70737075806, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560376.8751857, "msecs": 875.0, "relativeCreated": 64770.429849624634, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMw3q9hg-5LQoMSf3SY51xF\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560376.98742, "msecs": 987.0, "relativeCreated": 64882.6642036438, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560376.9885855, "msecs": 988.0, "relativeCreated": 64883.82959365845, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560376.9887948, "msecs": 988.0, "relativeCreated": 64884.0389251709, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560380.4800951, "msecs": 480.0, "relativeCreated": 68375.33926963806, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ACYwYZ7MTMM_gcjFEWPXQoM\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560380.593549, "msecs": 593.0, "relativeCreated": 68488.79313468933, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560380.594515, "msecs": 594.0, "relativeCreated": 68489.75920677185, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560380.5949013, "msecs": 594.0, "relativeCreated": 68490.14544487, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560384.0806623, "msecs": 80.0, "relativeCreated": 71975.90637207031, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ACfgmb5ET2-OBSuDwouVHOD\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560384.203019, "msecs": 203.0, "relativeCreated": 72098.26302528381, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.6647832970000138, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "lineno": 75, "outcome": "failed", "keywords": ["test_phone_number_normalization", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02248293799999601, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560384.8919263, "msecs": 891.0, "relativeCreated": 72787.17041015625, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 0.000372072000004664, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 98, "message": "AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nassert '+27821234567' == '27821234567'\n  - 27821234567\n  + +27821234567\n  ? +"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 98, "message": "in test_phone_number_normalization"}], "longrepr": "tests/test_phase2_client_management.py:98: in test_phone_number_normalization\n    assert normalized == expected_phone, \\\nE   AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nE   assert '+27821234567' == '27821234567'\nE     - 27821234567\nE     + +27821234567\nE     ? +"}, "teardown": {"duration": 0.5155525810000086, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "lineno": 100, "outcome": "passed", "keywords": ["test_add_client_with_special_names", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023054214000012507, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560385.4375718, "msecs": 437.0, "relativeCreated": 73332.81588554382, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 26.886028573000004, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560385.440575, "msecs": 440.0, "relativeCreated": 73335.81900596619, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560385.441172, "msecs": 441.0, "relativeCreated": 73336.41600608826, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560388.2958443, "msecs": 295.0, "relativeCreated": 76191.08843803406, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AmUsr5cSsng50uC5PmKyMom\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560388.4109218, "msecs": 410.0, "relativeCreated": 76306.16593360901, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560388.4119554, "msecs": 411.0, "relativeCreated": 76307.19947814941, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560388.4122136, "msecs": 412.0, "relativeCreated": 76307.45768547058, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560394.0694556, "msecs": 69.0, "relativeCreated": 81964.69974517822, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A1FFUGdmZGbSAv4Vw4EDsAj\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560394.28785, "msecs": 287.0, "relativeCreated": 82183.0940246582, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560394.2888112, "msecs": 288.0, "relativeCreated": 82184.05532836914, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560394.2890177, "msecs": 289.0, "relativeCreated": 82184.26179885864, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560398.1996357, "msecs": 199.0, "relativeCreated": 86094.87986564636, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ALx_sStANiX6MADhV7OoHcy\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560398.3020144, "msecs": 302.0, "relativeCreated": 86197.25847244263, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560398.3030758, "msecs": 303.0, "relativeCreated": 86198.31991195679, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560398.3032632, "msecs": 303.0, "relativeCreated": 86198.50730895996, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560401.708395, "msecs": 708.0, "relativeCreated": 89603.63912582397, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AM58I9pABcjKZMAhZrqVd0i\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560401.8132849, "msecs": 813.0, "relativeCreated": 89708.52899551392, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560401.8148122, "msecs": 814.0, "relativeCreated": 89710.05630493164, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560401.8150005, "msecs": 815.0, "relativeCreated": 89710.24465560913, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560405.112378, "msecs": 112.0, "relativeCreated": 93007.6220035553, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AObhHiSm4VKRSdzA2LU_6Fj\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560405.223776, "msecs": 223.0, "relativeCreated": 93119.02022361755, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560405.2249153, "msecs": 224.0, "relativeCreated": 93120.1593875885, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560405.2251022, "msecs": 225.0, "relativeCreated": 93120.34630775452, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560408.6919343, "msecs": 691.0, "relativeCreated": 96587.17846870422, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjUJuOfV5N_j_Z92x9QSDer\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560408.798363, "msecs": 798.0, "relativeCreated": 96693.60709190369, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560408.799795, "msecs": 799.0, "relativeCreated": 96695.03903388977, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560408.7999897, "msecs": 799.0, "relativeCreated": 96695.2338218689, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560412.2164602, "msecs": 216.0, "relativeCreated": 100111.70434951782, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A29vYrACzw9ztW9vWLFcemW\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560412.322861, "msecs": 322.0, "relativeCreated": 100218.10507774353, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.5566384759999892, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "lineno": 140, "outcome": "failed", "keywords": ["test_view_clients_commands", "TestViewClientsReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0009689409999964482, "outcome": "passed"}, "call": {"duration": 3.8736784890000138, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 160, "message": "AssertionError: Failed to list clients with command: Show my clients\nassert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 160, "message": "in test_view_clients_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560412.8830817, "msecs": 883.0, "relativeCreated": 100778.32579612732, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560412.8836777, "msecs": 883.0, "relativeCreated": 100778.92184257507, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560416.6485603, "msecs": 648.0, "relativeCreated": 104543.80440711975, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A4WlYFbGn2wvYlsP2FzdJtT\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560416.7540278, "msecs": 754.0, "relativeCreated": 104649.27196502686, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560416.7555459, "msecs": 755.0, "relativeCreated": 104650.78997612, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase2_client_management.py:160: in test_view_clients_commands\n    assert 'sarah' in message or 'john' in message or 'mike' in message or \\\nE   AssertionError: Failed to list clients with command: Show my clients\nE   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "teardown": {"duration": 0.5401295640000114, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "lineno": 188, "outcome": "passed", "keywords": ["test_set_custom_pricing_variations", "critical", "pytestmark", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001359046999994007, "outcome": "passed"}, "call": {"duration": 34.81683872499997, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560417.3029182, "msecs": 302.0, "relativeCreated": 105198.162317276, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560417.3055391, "msecs": 305.0, "relativeCreated": 105200.78325271606, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560421.436117, "msecs": 436.0, "relativeCreated": 109331.36105537415, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A8yJjggDx5Aba8vBCRtVDy7\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560421.549068, "msecs": 549.0, "relativeCreated": 109444.31209564209, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560421.5501988, "msecs": 550.0, "relativeCreated": 109445.44291496277, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560421.5504382, "msecs": 550.0, "relativeCreated": 109445.68228721619, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560424.6271725, "msecs": 627.0, "relativeCreated": 112522.41659164429, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A2A_9rqtwDm9e9HIzk_51K3\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560424.7306976, "msecs": 730.0, "relativeCreated": 112625.94175338745, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560424.7317536, "msecs": 731.0, "relativeCreated": 112626.99770927429, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560424.7319424, "msecs": 731.0, "relativeCreated": 112627.18653678894, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: update_client_fee with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560428.085782, "msecs": 85.0, "relativeCreated": 115981.02617263794, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ac4BHcL51mmRIkReyIMMX6V\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560428.293857, "msecs": 293.0, "relativeCreated": 116189.10121917725, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560428.29509, "msecs": 295.0, "relativeCreated": 116190.33408164978, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560428.295273, "msecs": 295.0, "relativeCreated": 116190.51718711853, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560432.6966138, "msecs": 696.0, "relativeCreated": 120591.85791015625, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ar0dBC9Y-qvI5pNY2ZKNToo\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560432.8036597, "msecs": 803.0, "relativeCreated": 120698.903799057, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560432.8050435, "msecs": 805.0, "relativeCreated": 120700.28758049011, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560432.8052216, "msecs": 805.0, "relativeCreated": 120700.4656791687, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560437.6412966, "msecs": 641.0, "relativeCreated": 125536.54074668884, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AfVS06pgkGX43LGq1-LlNAy\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560437.7615943, "msecs": 761.0, "relativeCreated": 125656.83841705322, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560437.7628407, "msecs": 762.0, "relativeCreated": 125658.08486938477, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560437.763043, "msecs": 763.0, "relativeCreated": 125658.28704833984, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560444.0282931, "msecs": 28.0, "relativeCreated": 131923.5372543335, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AbhGW9-_p_qSs7m4zSMsl0f\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560444.135849, "msecs": 135.0, "relativeCreated": 132031.09312057495, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560444.1371717, "msecs": 137.0, "relativeCreated": 132032.4158668518, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560444.1374097, "msecs": 137.0, "relativeCreated": 132032.65380859375, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560447.7480388, "msecs": 748.0, "relativeCreated": 135643.28289031982, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWCchEXMQfEMPpPrhVhQCGH\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560447.8556838, "msecs": 855.0, "relativeCreated": 135750.92792510986, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560447.8569283, "msecs": 856.0, "relativeCreated": 135752.17247009277, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560447.857109, "msecs": 857.0, "relativeCreated": 135752.35319137573, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560452.0107493, "msecs": 10.0, "relativeCreated": 139905.9934616089, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AL36To4eZppHaazJo9YJFV1\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560452.1179073, "msecs": 117.0, "relativeCreated": 140013.15140724182, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.5113902699999926, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "lineno": 220, "outcome": "failed", "keywords": ["test_check_client_pricing", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013861159999919437, "outcome": "passed"}, "call": {"duration": 4.741021209999985, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 239, "message": "AssertionError: Failed to show pricing with: What is Sarah's rate?\nassert ('r' in '' or 'rand' in '' or False)\n +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f226fe3b060>)"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 239, "message": "in test_check_client_pricing"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560452.6353545, "msecs": 635.0, "relativeCreated": 140530.5986404419, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560452.6359847, "msecs": 635.0, "relativeCreated": 140531.22878074646, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560457.2556224, "msecs": 255.0, "relativeCreated": 145150.8665084839, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJiG0qVC0VR_tBJgq9PL1tc\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560457.3725607, "msecs": 372.0, "relativeCreated": 145267.80486106873, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase2_client_management.py:239: in test_check_client_pricing\n    assert 'r' in message or 'rand' in message or \\\nE   AssertionError: Failed to show pricing with: What is Sarah's rate?\nE   assert ('r' in '' or 'rand' in '' or False)\nE    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f226fe3b060>)"}, "teardown": {"duration": 1.261672868000005, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "lineno": 253, "outcome": "failed", "keywords": ["test_add_client_with_duplicate_phone", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00042653299999528826, "outcome": "passed"}, "call": {"duration": 3.9196108900000013, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 268, "message": "assert ('already' in '' or 'exists' in '')\n +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f225ff08040>('message', '')\n +        where <built-in method get of dict object at 0x7f225ff08040> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f225ff08040>('message', '')\n +        where <built-in method get of dict object at 0x7f225ff08040> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 268, "message": "in test_add_client_with_duplicate_phone"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560458.6418264, "msecs": 641.0, "relativeCreated": 146537.0705127716, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560458.6446285, "msecs": 644.0, "relativeCreated": 146539.8726463318, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560462.455763, "msecs": 455.0, "relativeCreated": 150351.00722312927, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AwUnu9GYkrV2OiInOchQpgX\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560462.559047, "msecs": 559.0, "relativeCreated": 150454.2911052704, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone\n    assert 'already' in response.get('message', '').lower() or \\\nE   assert ('already' in '' or 'exists' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f225ff08040>('message', '')\nE    +        where <built-in method get of dict object at 0x7f225ff08040> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f225ff08040>('message', '')\nE    +        where <built-in method get of dict object at 0x7f225ff08040> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.5276954280000155, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "lineno": 270, "outcome": "passed", "keywords": ["test_invalid_phone_numbers", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00042115299999068156, "outcome": "passed"}, "call": {"duration": 9.863399998266686e-05, "outcome": "passed"}, "teardown": {"duration": 0.6823045639999918, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "lineno": 286, "outcome": "passed", "keywords": ["test_set_negative_pricing", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005001800000172807, "outcome": "passed"}, "call": {"duration": 9.777200000371522e-05, "outcome": "passed"}, "teardown": {"duration": 0.7844378780000056, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "lineno": 300, "outcome": "failed", "keywords": ["test_client_not_found", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004400180000061482, "outcome": "passed"}, "call": {"duration": 4.107065424999973, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 311, "message": "assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\n +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\n +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\n +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\n +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\n +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 311, "message": "in test_client_not_found"}], "log": [{"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560464.5662384, "msecs": 566.0, "relativeCreated": 152461.48252487183, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error creating conversation state: 'Mock' object is not subscriptable", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560464.56686, "msecs": 566.0, "relativeCreated": 152462.10408210754, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560468.5631747, "msecs": 563.0, "relativeCreated": 156458.41884613037, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AhLeC8JzwGYHmxeuYoFhf_M\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560468.668533, "msecs": 668.0, "relativeCreated": 156563.77720832825, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase2_client_management.py:311: in test_client_not_found\n    assert 'not found' in response.get('message', '').lower() or \\\nE   assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\nE    +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\nE    +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f2273d3fba0>()\nE    +    where <built-in method lower of str object at 0x7f2273d3fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f225ff10780>('message', '')\nE    +        where <built-in method get of dict object at 0x7f225ff10780> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.541049901000008, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "lineno": 53, "outcome": "failed", "keywords": ["test_view_schedule_commands", "TestViewScheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0014184269999759636, "outcome": "passed"}, "call": {"duration": 4.162287112000001, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 74, "message": "AssertionError: Failed to show schedule with: Show my schedule\nassert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 74, "message": "in test_view_schedule_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560469.217948, "msecs": 217.0, "relativeCreated": 157113.19208145142, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560469.2208014, "msecs": 220.0, "relativeCreated": 157116.0454750061, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560473.2706873, "msecs": 270.0, "relativeCreated": 161165.93146324158, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AEclyVLCg0j6vc8xOQt2LJX\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560473.3772893, "msecs": 377.0, "relativeCreated": 161272.53341674805, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560473.3790405, "msecs": 379.0, "relativeCreated": 161274.28460121155, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}], "longrepr": "tests/test_phase3_scheduling.py:74: in test_view_schedule_commands\n    assert 'schedule' in message or 'booking' in message or \\\nE   AssertionError: Failed to show schedule with: Show my schedule\nE   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "teardown": {"duration": 0.5600804499999867, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "lineno": 110, "outcome": "passed", "keywords": ["test_book_session_natural_language", "critical", "pytestmark", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02343061400000579, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560473.9676318, "msecs": 967.0, "relativeCreated": 161862.87593841553, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 0.6700405550000141, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESFKf6CKZ4MjzpCyZ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESFKf6CKZ4MjzpCyZ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.049352, "msecs": 49.0, "relativeCreated": 161944.5960521698, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESSUmSMpz1uURVMZf'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESSUmSMpz1uURVMZf'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.0945253, "msecs": 94.0, "relativeCreated": 161989.76945877075, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESdeBko4iJcNqAPmZ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESdeBko4iJcNqAPmZ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.1395657, "msecs": 139.0, "relativeCreated": 162034.80982780457, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESp4DHxr9bF2yFQRt'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoESp4DHxr9bF2yFQRt'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.1850188, "msecs": 185.0, "relativeCreated": 162080.2628993988, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoET4SNf8JjNMpDCs8E'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoET4SNf8JjNMpDCs8E'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.243998, "msecs": 243.0, "relativeCreated": 162139.2421722412, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETGbJWDArJQE7sifR'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETGbJWDArJQE7sifR'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.3092263, "msecs": 309.0, "relativeCreated": 162204.47039604187, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETYDS3KQ46AFzWStz'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETYDS3KQ46AFzWStz'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.3541913, "msecs": 354.0, "relativeCreated": 162249.4354248047, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETjNXwXL6KMrgMBHo'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoETjNXwXL6KMrgMBHo'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.493441, "msecs": 493.0, "relativeCreated": 162388.68522644043, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUMaX229ap31jwfih'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUMaX229ap31jwfih'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.5436232, "msecs": 543.0, "relativeCreated": 162438.86733055115, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUYEqkd5pUWnuiYsQ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUYEqkd5pUWnuiYsQ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.593311, "msecs": 593.0, "relativeCreated": 162488.5551929474, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUktFN6c7hc8hXTNK'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPoEUktFN6c7hc8hXTNK'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560474.637347, "msecs": 637.0, "relativeCreated": 162532.59110450745, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.8913069299999847, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "lineno": 144, "outcome": "failed", "keywords": ["test_booking_time_formats", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022681099999999788, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560475.5525796, "msecs": 552.0, "relativeCreated": 163447.82376289368, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 0.0010325300000317839, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 168, "message": "AssertionError: Failed to validate time: 9am\nassert False == True"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 168, "message": "in test_booking_time_formats"}], "longrepr": "tests/test_phase3_scheduling.py:168: in test_booking_time_formats\n    assert is_valid == True, f\"Failed to validate time: {time_format}\"\nE   AssertionError: Failed to validate time: 9am\nE   assert False == True"}, "teardown": {"duration": 0.5323356179999905, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "lineno": 169, "outcome": "passed", "keywords": ["test_booking_date_parsing", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02357380899996997, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560476.114117, "msecs": 114.0, "relativeCreated": 164009.36102867126, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "call": {"duration": 0.00043929600002456937, "outcome": "passed"}, "teardown": {"duration": 0.5117839979999985, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "lineno": 223, "outcome": "passed", "keywords": ["test_cancel_booking_variations", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001078624999991007, "outcome": "passed"}, "call": {"duration": 33.369480667000005, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560476.6289241, "msecs": 628.0, "relativeCreated": 164524.16825294495, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560476.6297145, "msecs": 629.0, "relativeCreated": 164524.95861053467, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560480.2981005, "msecs": 298.0, "relativeCreated": 168193.3445930481, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AwvDv0XNrI5BipmRJSzQPkj\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560480.4025602, "msecs": 402.0, "relativeCreated": 168297.80435562134, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560480.403678, "msecs": 403.0, "relativeCreated": 168298.92206192017, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560480.4038446, "msecs": 403.0, "relativeCreated": 168299.08871650696, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560483.7370598, "msecs": 737.0, "relativeCreated": 171632.30395317078, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A29RM3QdBxgUR1S6EHr1s19\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560483.8414834, "msecs": 841.0, "relativeCreated": 171736.72747612, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560483.8424485, "msecs": 842.0, "relativeCreated": 171737.6925945282, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560483.8426185, "msecs": 842.0, "relativeCreated": 171737.8625869751, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560487.6694565, "msecs": 669.0, "relativeCreated": 175564.7006034851, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjCBiRA-f1XoKUVIzODVUtB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560487.773515, "msecs": 773.0, "relativeCreated": 175668.75910758972, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560487.7745268, "msecs": 774.0, "relativeCreated": 175669.77095603943, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560487.7747068, "msecs": 774.0, "relativeCreated": 175669.95096206665, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: booking_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560491.935561, "msecs": 935.0, "relativeCreated": 179830.80506324768, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AM50mWENh8ljzoPVIK_DiZT\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560492.0419998, "msecs": 41.0, "relativeCreated": 179937.24393844604, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560492.0431058, "msecs": 43.0, "relativeCreated": 179938.3499622345, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560492.0432858, "msecs": 43.0, "relativeCreated": 179938.52996826172, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: cancel_appointment with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560495.7324002, "msecs": 732.0, "relativeCreated": 183627.64430046082, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AbDtzLXBSVur777mB0XNKKw\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560495.849087, "msecs": 849.0, "relativeCreated": 183744.3311214447, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560495.8552272, "msecs": 855.0, "relativeCreated": 183750.47135353088, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560495.8568208, "msecs": 856.0, "relativeCreated": 183752.0649433136, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_update with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560499.0466933, "msecs": 46.0, "relativeCreated": 186941.93744659424, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ALHfcsCq12bXvZB5ijBBlzO\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560499.1653767, "msecs": 165.0, "relativeCreated": 187060.62078475952, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560499.166942, "msecs": 166.0, "relativeCreated": 187062.18600273132, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560499.1671188, "msecs": 167.0, "relativeCreated": 187062.36290931702, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560503.137362, "msecs": 137.0, "relativeCreated": 191032.60612487793, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A5hrKPSlHK7ksz6Oautrd3a\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560503.2432258, "msecs": 243.0, "relativeCreated": 191138.4699344635, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560503.2444513, "msecs": 244.0, "relativeCreated": 191139.69540596008, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560503.2446835, "msecs": 244.0, "relativeCreated": 191139.92762565613, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560509.8881252, "msecs": 888.0, "relativeCreated": 197783.36930274963, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ad27eeEwM-Gc5faaXkIKDj6\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560509.9965034, "msecs": 996.0, "relativeCreated": 197891.7474746704, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.6133898969999905, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "lineno": 248, "outcome": "passed", "keywords": ["test_reschedule_booking", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011690640000097119, "outcome": "passed"}, "call": {"duration": 19.635374603000002, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560510.613721, "msecs": 613.0, "relativeCreated": 198508.96501541138, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560510.6165316, "msecs": 616.0, "relativeCreated": 198511.7757320404, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560515.0734265, "msecs": 73.0, "relativeCreated": 202968.67060661316, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AYpE2QC33J56BGPIOGPvMd_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560515.1799548, "msecs": 179.0, "relativeCreated": 203075.1988887787, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560515.181137, "msecs": 181.0, "relativeCreated": 203076.38120651245, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560515.1813047, "msecs": 181.0, "relativeCreated": 203076.54881477356, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560519.2845912, "msecs": 284.0, "relativeCreated": 207179.83531951904, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aq1gmN7tbH-WnO8DK2yKcIu\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560519.3908074, "msecs": 390.0, "relativeCreated": 207286.05151176453, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560519.3917868, "msecs": 391.0, "relativeCreated": 207287.03093528748, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560519.3919933, "msecs": 391.0, "relativeCreated": 207287.23740577698, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: booking_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560523.3560722, "msecs": 356.0, "relativeCreated": 211251.31630897522, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Amp9ni8bxW0qUaCHbG8Ll9l\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560523.4634147, "msecs": 463.0, "relativeCreated": 211358.65879058838, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560523.4644804, "msecs": 464.0, "relativeCreated": 211359.72452163696, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560523.464657, "msecs": 464.0, "relativeCreated": 211359.90118980408, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560526.8455224, "msecs": 845.0, "relativeCreated": 214740.76652526855, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AzvO57wfQpS9C97UQNV3GN0\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560526.950243, "msecs": 950.0, "relativeCreated": 214845.48711776733, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560526.9513488, "msecs": 951.0, "relativeCreated": 214846.5929031372, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560526.9515202, "msecs": 951.0, "relativeCreated": 214846.76432609558, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Error parsing datetime 'afternoon': String does not contain a date: afternoon", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560530.1435595, "msecs": 143.0, "relativeCreated": 218038.8035774231, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758560530.1436453, "msecs": 143.0, "relativeCreated": 218038.88940811157, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AFonI-zo5qekZMPkcCsHrt6\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560530.247547, "msecs": 247.0, "relativeCreated": 218142.79103279114, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.6366478160000497, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "lineno": 283, "outcome": "passed", "keywords": ["test_double_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005642690000513539, "outcome": "passed"}, "call": {"duration": 0.0014140199999701508, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560530.8877733, "msecs": 887.0, "relativeCreated": 218783.01739692688, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.7203812189999894, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "lineno": 313, "outcome": "passed", "keywords": ["test_past_date_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005617449999704149, "outcome": "passed"}, "call": {"duration": 0.00132781999997178, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758560531.6106694, "msecs": 610.0, "relativeCreated": 219505.91349601746, "thread": 139785949907840, "threadName": "MainThread", "processName": "MainProcess", "process": 2199}]}, "teardown": {"duration": 0.541320638000002, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "lineno": 334, "outcome": "passed", "keywords": ["test_invalid_time_slots", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000561545000039132, "outcome": "passed"}, "call": {"duration": 0.00017831199994589042, "outcome": "passed"}, "teardown": {"duration": 0.8958413209999776, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "lineno": 79, "outcome": "failed", "keywords": ["test_new_trainer_onboarding", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002980849999971724, "outcome": "passed"}, "call": {"duration": 0.0014094420000105856, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 89, "message": "AssertionError: assert 'welcome' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f225fcae5b0>()\n +    where <built-in method lower of str object at 0x7f225fcae5b0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 89, "message": "in test_new_trainer_onboarding"}], "longrepr": "tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding\n    assert \"welcome\" in response['message'].lower()\nE   AssertionError: assert 'welcome' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f225fcae5b0>()\nE    +    where <built-in method lower of str object at 0x7f225fcae5b0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 1.249600359999988, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "lineno": 120, "outcome": "failed", "keywords": ["test_trainer_recognition", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032025599995222365, "outcome": "passed"}, "call": {"duration": 0.0013451019999592972, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 134, "message": "AssertionError: assert 'john' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f225fe41c00>()\n +    where <built-in method lower of str object at 0x7f225fe41c00> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 134, "message": "in test_trainer_recognition"}], "longrepr": "tests/test_refiloe_complete.py:134: in test_trainer_recognition\n    assert \"john\" in response['message'].lower()\nE   AssertionError: assert 'john' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f225fe41c00>()\nE    +    where <built-in method lower of str object at 0x7f225fe41c00> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 0.5277518150000446, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "lineno": 143, "outcome": "failed", "keywords": ["test_add_client_variations", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032334200000150304, "outcome": "passed"}, "call": {"duration": 0.0008287910000035481, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 158, "message": "AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\n +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f225fd9b750>()\n +    where <built-in method lower of str object at 0x7f225fd9b750> = 'Mock response to: Add client Sarah 0821234567'.lower\n +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f225fd9b750>()\n +    where <built-in method lower of str object at 0x7f225fd9b750> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 158, "message": "in test_add_client_variations"}], "longrepr": "tests/test_refiloe_complete.py:158: in test_add_client_variations\n    assert \"added\" in response['message'].lower() or \"registered\" in response['message'].lower()\nE   AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\nE    +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f225fd9b750>()\nE    +    where <built-in method lower of str object at 0x7f225fd9b750> = 'Mock response to: Add client Sarah 0821234567'.lower\nE    +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f225fd9b750>()\nE    +    where <built-in method lower of str object at 0x7f225fd9b750> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "teardown": {"duration": 0.5285346819999859, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "lineno": 159, "outcome": "failed", "keywords": ["test_view_clients", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003059190000271883, "outcome": "passed"}, "call": {"duration": 0.0012390450000339115, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 179, "message": "AssertionError: assert 'sarah' in 'mock response to: show my clients'\n +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f225fe58e70>()\n +    where <built-in method lower of str object at 0x7f225fe58e70> = 'Mock response to: Show my clients'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 179, "message": "in test_view_clients"}], "longrepr": "tests/test_refiloe_complete.py:179: in test_view_clients\n    assert \"sarah\" in response['message'].lower()\nE   AssertionError: assert 'sarah' in 'mock response to: show my clients'\nE    +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f225fe58e70>()\nE    +    where <built-in method lower of str object at 0x7f225fe58e70> = 'Mock response to: Show my clients'.lower"}, "teardown": {"duration": 0.8401519870000129, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "lineno": 181, "outcome": "failed", "keywords": ["test_set_custom_pricing", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00031553799999528565, "outcome": "passed"}, "call": {"duration": 0.0010167509999519098, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 196, "message": "assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\n +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f225fda9760>()\n +    where <built-in method lower of str object at 0x7f225fda9760> = \"Mock response to: Change John's price to R500 per session\".lower\n +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f225fda9760>()\n +    where <built-in method lower of str object at 0x7f225fda9760> = \"Mock response to: Change John's price to R500 per session\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 196, "message": "in test_set_custom_pricing"}], "longrepr": "tests/test_refiloe_complete.py:196: in test_set_custom_pricing\n    assert \"updated\" in response['message'].lower() or \"set\" in response['message'].lower()\nE   assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\nE    +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f225fda9760>()\nE    +    where <built-in method lower of str object at 0x7f225fda9760> = \"Mock response to: Change John's price to R500 per session\".lower\nE    +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f225fda9760>()\nE    +    where <built-in method lower of str object at 0x7f225fda9760> = \"Mock response to: Change John's price to R500 per session\".lower"}, "teardown": {"duration": 1.003618839000012, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "lineno": 206, "outcome": "failed", "keywords": ["test_view_schedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002773560000264297, "outcome": "passed"}, "call": {"duration": 0.0008499510000206101, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 223, "message": "assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\n +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f225fe58c30>()\n +    where <built-in method lower of str object at 0x7f225fe58c30> = \"Mock response to: What's on today\".lower\n +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f225fe58c30>()\n +    where <built-in method lower of str object at 0x7f225fe58c30> = \"Mock response to: What's on today\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 223, "message": "in test_view_schedule"}], "longrepr": "tests/test_refiloe_complete.py:223: in test_view_schedule\n    assert \"schedule\" in response['message'].lower() or \"booking\" in response['message'].lower()\nE   assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\nE    +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f225fe58c30>()\nE    +    where <built-in method lower of str object at 0x7f225fe58c30> = \"Mock response to: What's on today\".lower\nE    +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f225fe58c30>()\nE    +    where <built-in method lower of str object at 0x7f225fe58c30> = \"Mock response to: What's on today\".lower"}, "teardown": {"duration": 1.0278589609999926, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "lineno": 224, "outcome": "failed", "keywords": ["test_book_sessions", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00027738599999338476, "outcome": "passed"}, "call": {"duration": 0.0008462650000069516, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 239, "message": "AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\n +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f225fdabe50>()\n +    where <built-in method lower of str object at 0x7f225fdabe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\n +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f225fdabe50>()\n +    where <built-in method lower of str object at 0x7f225fdabe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 239, "message": "in test_book_sessions"}], "longrepr": "tests/test_refiloe_complete.py:239: in test_book_sessions\n    assert \"booked\" in response['message'].lower() or \"scheduled\" in response['message'].lower()\nE   AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\nE    +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f225fdabe50>()\nE    +    where <built-in method lower of str object at 0x7f225fdabe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\nE    +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f225fdabe50>()\nE    +    where <built-in method lower of str object at 0x7f225fdabe50> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "teardown": {"duration": 1.0510869949999915, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "lineno": 240, "outcome": "passed", "keywords": ["test_cancel_reschedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00027991100000690494, "outcome": "passed"}, "call": {"duration": 0.0007302089999825512, "outcome": "passed"}, "teardown": {"duration": 0.5305298110000081, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "lineno": 257, "outcome": "failed", "keywords": ["test_setup_habits", "TestPhase4_HabitTracking", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002912919999857877, "outcome": "passed"}, "call": {"duration": 0.004837668999982725, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 273, "message": "AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\n +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f225fda80a0>()\n +    where <built-in method lower of str object at 0x7f225fda80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\n +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f225fda80a0>()\n +    where <built-in method lower of str object at 0x7f225fda80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 273, "message": "in test_setup_habits"}], "longrepr": "tests/test_refiloe_complete.py:273: in test_setup_habits\n    assert \"habit\" in response['message'].lower() or \"tracking\" in response['message'].lower()\nE   AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\nE    +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f225fda80a0>()\nE    +    where <built-in method lower of str object at 0x7f225fda80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\nE    +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f225fda80a0>()\nE    +    where <built-in method lower of str object at 0x7f225fda80a0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "teardown": {"duration": 1.0463182489999667, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "lineno": 278, "outcome": "failed", "keywords": ["test_send_workouts", "TestPhase5_WorkoutsAssessments", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029569999998102503, "outcome": "passed"}, "call": {"duration": 0.0008538380000118195, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 293, "message": "AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\n +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f225fe59e90>()\n +    where <built-in method lower of str object at 0x7f225fe59e90> = 'Mock response to: Send Mike a cardio program'.lower\n +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f225fe59e90>()\n +    where <built-in method lower of str object at 0x7f225fe59e90> = 'Mock response to: Send Mike a cardio program'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 293, "message": "in test_send_workouts"}], "longrepr": "tests/test_refiloe_complete.py:293: in test_send_workouts\n    assert \"workout\" in response['message'].lower() or \"sent\" in response['message'].lower()\nE   AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\nE    +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f225fe59e90>()\nE    +    where <built-in method lower of str object at 0x7f225fe59e90> = 'Mock response to: Send Mike a cardio program'.lower\nE    +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f225fe59e90>()\nE    +    where <built-in method lower of str object at 0x7f225fe59e90> = 'Mock response to: Send Mike a cardio program'.lower"}, "teardown": {"duration": 0.5332110780000221, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "lineno": 298, "outcome": "failed", "keywords": ["test_request_payment", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002961819999995896, "outcome": "passed"}, "call": {"duration": 0.0008355140000162464, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 313, "message": "AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\n +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f225fcbfb70>()\n +    where <built-in method lower of str object at 0x7f225fcbfb70> = 'Mock response to: Bill Mike for this month'.lower\n +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f225fcbfb70>()\n +    where <built-in method lower of str object at 0x7f225fcbfb70> = 'Mock response to: Bill Mike for this month'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 313, "message": "in test_request_payment"}], "longrepr": "tests/test_refiloe_complete.py:313: in test_request_payment\n    assert \"payment\" in response['message'].lower() or \"invoice\" in response['message'].lower()\nE   AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\nE    +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f225fcbfb70>()\nE    +    where <built-in method lower of str object at 0x7f225fcbfb70> = 'Mock response to: Bill Mike for this month'.lower\nE    +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f225fcbfb70>()\nE    +    where <built-in method lower of str object at 0x7f225fcbfb70> = 'Mock response to: Bill Mike for this month'.lower"}, "teardown": {"duration": 0.53153551500003, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "lineno": 314, "outcome": "passed", "keywords": ["test_check_revenue", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00031044799999335737, "outcome": "passed"}, "call": {"duration": 0.0007116639999935614, "outcome": "passed"}, "teardown": {"duration": 1.1971158899999637, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "lineno": 334, "outcome": "failed", "keywords": ["test_client_booking", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00041042300000526666, "outcome": "passed"}, "call": {"duration": 0.005416634999960479, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 349, "message": "AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\n +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f225fe58a50>()\n +    where <built-in method lower of str object at 0x7f225fe58a50> = 'Mock response to: I want to train tomorrow'.lower\n +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f225fe58a50>()\n +    where <built-in method lower of str object at 0x7f225fe58a50> = 'Mock response to: I want to train tomorrow'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 349, "message": "in test_client_booking"}], "longrepr": "tests/test_refiloe_complete.py:349: in test_client_booking\n    assert \"book\" in response['message'].lower() or \"session\" in response['message'].lower()\nE   AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\nE    +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f225fe58a50>()\nE    +    where <built-in method lower of str object at 0x7f225fe58a50> = 'Mock response to: I want to train tomorrow'.lower\nE    +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f225fe58a50>()\nE    +    where <built-in method lower of str object at 0x7f225fe58a50> = 'Mock response to: I want to train tomorrow'.lower"}, "teardown": {"duration": 0.690089907000015, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "lineno": 350, "outcome": "failed", "keywords": ["test_client_habit_logging", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003148249999753716, "outcome": "passed"}, "call": {"duration": 0.0008500609999941844, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 365, "message": "AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\n +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f225fe6aab0>()\n +    where <built-in method lower of str object at 0x7f225fe6aab0> = 'Mock response to: 7 yes no'.lower\n +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f225fe6aab0>()\n +    where <built-in method lower of str object at 0x7f225fe6aab0> = 'Mock response to: 7 yes no'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 365, "message": "in test_client_habit_logging"}], "longrepr": "tests/test_refiloe_complete.py:365: in test_client_habit_logging\n    assert \"logged\" in response['message'].lower() or \"recorded\" in response['message'].lower()\nE   AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\nE    +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f225fe6aab0>()\nE    +    where <built-in method lower of str object at 0x7f225fe6aab0> = 'Mock response to: 7 yes no'.lower\nE    +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f225fe6aab0>()\nE    +    where <built-in method lower of str object at 0x7f225fe6aab0> = 'Mock response to: 7 yes no'.lower"}, "teardown": {"duration": 0.5460417459999576, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "lineno": 370, "outcome": "passed", "keywords": ["test_natural_language_understanding", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029355599997415993, "outcome": "passed"}, "call": {"duration": 0.0007149099999992359, "outcome": "passed"}, "teardown": {"duration": 0.4919874570000502, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "lineno": 388, "outcome": "failed", "keywords": ["test_error_handling", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002883660000065902, "outcome": "passed"}, "call": {"duration": 0.004809405000003153, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 403, "message": "assert False\n +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f225ff44660>)"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 403, "message": "in test_error_handling"}], "longrepr": "tests/test_refiloe_complete.py:403: in test_error_handling\n    assert any(word in response['message'].lower() for word in expected_words)\nE   assert False\nE    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f225ff44660>)"}, "teardown": {"duration": 0.689770134000014, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "lineno": 408, "outcome": "failed", "keywords": ["test_trainer_registration_step_7_currency_parsing", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002824250000230677, "outcome": "passed"}, "call": {"duration": 0.0009286679999718217, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 437, "message": "TypeError: 'Mock' object is not subscriptable"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 437, "message": "in test_trainer_registration_step_7_currency_parsing"}], "longrepr": "tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing\n    assert result['data'].get('pricing') == expected_value\nE   TypeError: 'Mock' object is not subscriptable"}, "teardown": {"duration": 0.6873637610000287, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "lineno": 438, "outcome": "passed", "keywords": ["test_ai_responds_naturally_not_rigid_commands", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002937570000085543, "outcome": "passed"}, "call": {"duration": 0.0007615860000100838, "outcome": "passed"}, "teardown": {"duration": 0.5789418319999982, "outcome": "passed"}}], "warnings": [{"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "\nPyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),\n(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)\nbut was not found to be installed on your system.\nIf this would cause problems for you,\nplease provide us feedback at https://github.com/pandas-dev/pandas/issues/54466\n        ", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py", "lineno": 7}]}