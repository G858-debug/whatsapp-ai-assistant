{"created": 1758411122.0109608, "duration": 216.2951898574829, "exitcode": 1, "root": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant", "environment": {}, "summary": {"passed": 31, "failed": 26, "total": 57, "collected": 57}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/__init__.py", "type": "Package"}]}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "type": "Function", "lineno": 130}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "type": "Function", "lineno": 136}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "type": "Function", "lineno": 143}]}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "type": "Function", "lineno": 170}]}, {"nodeid": "tests/test_conversation_flows.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "type": "Class"}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "type": "Class"}]}, {"nodeid": "tests/test_debug.py", "outcome": "passed", "result": [{"nodeid": "tests/test_debug.py::test_python_version", "type": "Function", "lineno": 9}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "type": "Function", "lineno": 14}, {"nodeid": "tests/test_debug.py::test_project_structure", "type": "Function", "lineno": 28}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "type": "Function", "lineno": 48}, {"nodeid": "tests/test_debug.py::test_check_requirements", "type": "Function", "lineno": 84}]}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "type": "Function", "lineno": 46}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "type": "Function", "lineno": 140}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "type": "Function", "lineno": 199}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "type": "Function", "lineno": 214}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "type": "Function", "lineno": 234}]}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "type": "Function", "lineno": 324}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "type": "Function", "lineno": 341}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "type": "Function", "lineno": 366}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "type": "Function", "lineno": 385}]}, {"nodeid": "tests/test_phase1_registration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "type": "Function", "lineno": 47}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "type": "Function", "lineno": 100}]}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "type": "Function", "lineno": 140}]}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "type": "Function", "lineno": 188}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "type": "Function", "lineno": 220}]}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "type": "Function", "lineno": 253}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "type": "Function", "lineno": 270}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "type": "Function", "lineno": 300}]}, {"nodeid": "tests/test_phase2_client_management.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "type": "Function", "lineno": 53}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "type": "Function", "lineno": 110}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "type": "Function", "lineno": 144}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "type": "Function", "lineno": 169}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "type": "Function", "lineno": 223}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "type": "Function", "lineno": 248}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "type": "Function", "lineno": 283}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "type": "Function", "lineno": 313}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "type": "Function", "lineno": 334}]}, {"nodeid": "tests/test_phase3_scheduling.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "type": "Class"}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "type": "Function", "lineno": 120}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "type": "Function", "lineno": 143}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "type": "Function", "lineno": 159}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "type": "Function", "lineno": 181}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "type": "Function", "lineno": 206}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "type": "Function", "lineno": 224}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "type": "Function", "lineno": 240}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "type": "Function", "lineno": 257}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "type": "Function", "lineno": 278}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "type": "Function", "lineno": 298}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "type": "Function", "lineno": 314}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "type": "Function", "lineno": 334}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "type": "Function", "lineno": 350}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "type": "Function", "lineno": 370}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "type": "Function", "lineno": 388}]}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "type": "Function", "lineno": 408}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "type": "Function", "lineno": 438}]}, {"nodeid": "tests/test_refiloe_complete.py", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "type": "Class"}]}, {"nodeid": "tests/__init__.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py", "type": "Module"}, {"nodeid": "tests/test_debug.py", "type": "Module"}, {"nodeid": "tests/test_phase1_registration.py", "type": "Module"}, {"nodeid": "tests/test_phase2_client_management.py", "type": "Module"}, {"nodeid": "tests/test_phase3_scheduling.py", "type": "Module"}, {"nodeid": "tests/test_refiloe_complete.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "lineno": 130, "outcome": "passed", "keywords": ["test_imports_work", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00045686500000385877, "outcome": "passed"}, "call": {"duration": 0.03259192000000155, "outcome": "passed"}, "teardown": {"duration": 1.6129564920000021, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "lineno": 136, "outcome": "passed", "keywords": ["test_mock_message", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002942099999998504, "outcome": "passed"}, "call": {"duration": 0.021724463999994725, "outcome": "passed"}, "teardown": {"duration": 1.7881029890000022, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "lineno": 143, "outcome": "passed", "keywords": ["test_trainer_registration_mock", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032167199999832974, "outcome": "passed"}, "call": {"duration": 0.022361425999996243, "outcome": "passed"}, "teardown": {"duration": 1.271427807000002, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "lineno": 165, "outcome": "passed", "keywords": ["test_basic_setup", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022602493000000834, "outcome": "passed"}, "call": {"duration": 9.655100000571792e-05, "outcome": "passed"}, "teardown": {"duration": 1.7600890399999969, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "lineno": 170, "outcome": "passed", "keywords": ["test_mock_registration_flow", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.021648020000000656, "outcome": "passed"}, "call": {"duration": 0.00018620899999888252, "outcome": "passed"}, "teardown": {"duration": 1.5334600580000028, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_python_version", "lineno": 9, "outcome": "passed", "keywords": ["test_python_version", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022952999999859003, "outcome": "passed"}, "call": {"duration": 0.00011131899999838879, "outcome": "passed"}, "teardown": {"duration": 1.7203426270000008, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "lineno": 14, "outcome": "passed", "keywords": ["test_can_import_basic_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002570010000013667, "outcome": "passed"}, "call": {"duration": 8.646199999873261e-05, "outcome": "passed"}, "teardown": {"duration": 1.4879626130000005, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_project_structure", "lineno": 28, "outcome": "passed", "keywords": ["test_project_structure", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002323339999890095, "outcome": "passed"}, "call": {"duration": 0.00021558299999924202, "outcome": "passed"}, "teardown": {"duration": 0.9834893629999897, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "lineno": 48, "outcome": "passed", "keywords": ["test_can_import_refiloe_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002184980000095038, "outcome": "passed"}, "call": {"duration": 0.0003782879999931765, "outcome": "passed"}, "teardown": {"duration": 0.7551616960000018, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_check_requirements", "lineno": 84, "outcome": "passed", "keywords": ["test_check_requirements", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00021973100000138857, "outcome": "passed"}, "call": {"duration": 0.07283318700000052, "outcome": "passed"}, "teardown": {"duration": 1.648244261000002, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "lineno": 46, "outcome": "failed", "keywords": ["test_complete_trainer_registration_flow", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00148091999999167, "outcome": "passed"}, "call": {"duration": 0.0020681990000070982, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 107, "message": "assert False == True"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 107, "message": "in test_complete_trainer_registration_flow"}], "log": [{"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410920.916524, "msecs": 916.0, "relativeCreated": 15850.338697433472, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410920.9167867, "msecs": 916.0, "relativeCreated": 15850.601434707642, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410920.9169788, "msecs": 916.0, "relativeCreated": 15850.793600082397, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410920.917299, "msecs": 917.0, "relativeCreated": 15851.11379623413, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410920.917488, "msecs": 917.0, "relativeCreated": 15851.302862167358, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase1_registration.py:107: in test_complete_trainer_registration_flow\n    assert result['success'] == True\nE   assert False == True"}, "teardown": {"duration": 1.2699047219999926, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "lineno": 140, "outcome": "passed", "keywords": ["test_currency_parsing_variations", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001413494000004789, "outcome": "passed"}, "call": {"duration": 0.011265679000004525, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2482357, "msecs": 248.0, "relativeCreated": 17182.050466537476, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2493467, "msecs": 249.0, "relativeCreated": 17183.16149711609, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2498915, "msecs": 249.0, "relativeCreated": 17183.706283569336, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2503893, "msecs": 250.0, "relativeCreated": 17184.2041015625, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2508807, "msecs": 250.0, "relativeCreated": 17184.69548225403, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2513626, "msecs": 251.0, "relativeCreated": 17185.177326202393, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2520082, "msecs": 252.0, "relativeCreated": 17185.8229637146, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2524743, "msecs": 252.0, "relativeCreated": 17186.289072036743, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2529585, "msecs": 252.0, "relativeCreated": 17186.7733001709, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2534134, "msecs": 253.0, "relativeCreated": 17187.228202819824, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2538822, "msecs": 253.0, "relativeCreated": 17187.696933746338, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2543328, "msecs": 254.0, "relativeCreated": 17188.14754486084, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.254797, "msecs": 254.0, "relativeCreated": 17188.61174583435, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2553933, "msecs": 255.0, "relativeCreated": 17189.208030700684, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.25587, "msecs": 255.0, "relativeCreated": 17189.684867858887, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.25633, "msecs": 256.0, "relativeCreated": 17190.144777297974, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.2568002, "msecs": 256.0, "relativeCreated": 17190.614938735962, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.7381968029999939, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "lineno": 199, "outcome": "passed", "keywords": ["test_registration_with_missing_fields", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.002735986999994111, "outcome": "passed"}, "call": {"duration": 0.0007647110000021939, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410922.999176, "msecs": 999.0, "relativeCreated": 17932.990789413452, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 1.409698641999995, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "lineno": 214, "outcome": "failed", "keywords": ["test_trainer_recognition_after_registration", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.002837146000004509, "outcome": "passed"}, "call": {"duration": 3.966004189000003, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 231, "message": "AssertionError: Should recognize and greet trainer by name\nassert ('john' in '' or 'welcome back' in '')\n +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a597d0c40>('message', '')\n +        where <built-in method get of dict object at 0x7f9a597d0c40> = {'response': \"Hey there! \ud83d\udc4b\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a597d0c40>('message', '')\n +        where <built-in method get of dict object at 0x7f9a597d0c40> = {'response': \"Hey there! \ud83d\udc4b\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 231, "message": "in test_trainer_recognition_after_registration"}], "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410925.2115784, "msecs": 211.0, "relativeCreated": 20145.393133163452, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Background scheduler started", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410925.2478256, "msecs": 247.0, "relativeCreated": 20181.64038658142, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Routes setup complete", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410925.248717, "msecs": 248.0, "relativeCreated": 20182.53183364868, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410925.254134, "msecs": 254.0, "relativeCreated": 20187.94870376587, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410925.2548294, "msecs": 254.0, "relativeCreated": 20188.64417076111, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: greeting with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410927.9263577, "msecs": 926.0, "relativeCreated": 22860.172510147095, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ablzhyr7IzxSfvW9mWmGgvn\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410928.3768277, "msecs": 376.0, "relativeCreated": 23310.64248085022, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Created new conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410928.3776894, "msecs": 377.0, "relativeCreated": 23311.504125595093, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase1_registration.py:231: in test_trainer_recognition_after_registration\n    assert 'john' in response.get('message', '').lower() or \\\nE   AssertionError: Should recognize and greet trainer by name\nE   assert ('john' in '' or 'welcome back' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a597d0c40>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a597d0c40> = {'response': \"Hey there! \ud83d\udc4b\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a597d0c40>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a597d0c40> = {'response': \"Hey there! \ud83d\udc4b\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "teardown": {"duration": 1.4110165050000063, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "lineno": 234, "outcome": "passed", "keywords": ["test_registration_saves_all_fields_correctly", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0019261829999948077, "outcome": "passed"}, "call": {"duration": 0.002435666000010883, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Trainer registered: John Smith (trainer-123)", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410929.7987711, "msecs": 798.0, "relativeCreated": 24732.585906982422, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.981168229000005, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "lineno": 288, "outcome": "failed", "keywords": ["test_client_receives_welcome_after_registration", "TestClientRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0010252380000110861, "outcome": "passed"}, "call": {"duration": 3.2799137499999915, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 297, "message": "assert ('added' in '' or 'registered' in '')\n +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a59856cc0>('message', '')\n +        where <built-in method get of dict object at 0x7f9a59856cc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a59856cc0>('message', '')\n +        where <built-in method get of dict object at 0x7f9a59856cc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 297, "message": "in test_client_receives_welcome_after_registration"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410930.7846282, "msecs": 784.0, "relativeCreated": 25718.442916870117, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410930.7852151, "msecs": 785.0, "relativeCreated": 25719.029903411865, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410933.6393733, "msecs": 639.0, "relativeCreated": 28573.188066482544, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ArVVeAkZW5bBT2N3qhLL7xN\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410934.0613055, "msecs": 61.0, "relativeCreated": 28995.12028694153, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration\n    assert 'added' in response.get('message', '').lower() or \\\nE   assert ('added' in '' or 'registered' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a59856cc0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a59856cc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a59856cc0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a59856cc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 1.212127135000003, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "lineno": 324, "outcome": "failed", "keywords": ["test_duplicate_registration_attempt", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00045822700000996974, "outcome": "passed"}, "call": {"duration": 0.0032323749999960683, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 339, "message": "assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\n +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x559fa2727c00>()\n +    where <built-in method lower of str object at 0x559fa2727c00> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\n +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x559fa2727c00>()\n +    where <built-in method lower of str object at 0x559fa2727c00> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 339, "message": "in test_duplicate_registration_attempt"}], "log": [{"name": "refiloe", "msg": "Error checking existing registration: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410935.2813447, "msecs": 281.0, "relativeCreated": 30215.15941619873, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410935.283381, "msecs": 283.0, "relativeCreated": 30217.195749282837, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase1_registration.py:339: in test_duplicate_registration_attempt\n    assert 'already' in response.lower() or \\\nE   assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\nE    +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x559fa2727c00>()\nE    +    where <built-in method lower of str object at 0x559fa2727c00> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\nE    +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x559fa2727c00>()\nE    +    where <built-in method lower of str object at 0x559fa2727c00> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "teardown": {"duration": 1.1922305610000024, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "lineno": 341, "outcome": "passed", "keywords": ["test_invalid_email_format", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005119879999995192, "outcome": "passed"}, "call": {"duration": 0.00024527900001203307, "outcome": "passed"}, "teardown": {"duration": 0.7881519929999996, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "lineno": 366, "outcome": "failed", "keywords": ["test_extremely_long_input", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005250520000004144, "outcome": "passed"}, "call": {"duration": 0.001225011000002496, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 382, "message": "AssertionError: assert 500 <= 255\n +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 382, "message": "in test_extremely_long_input"}], "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410937.2722225, "msecs": 272.0, "relativeCreated": 32206.037282943726, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase1_registration.py:382: in test_extremely_long_input\n    assert len(result['data']['name']) <= 255  # Reasonable limit\nE   AssertionError: assert 500 <= 255\nE    +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "teardown": {"duration": 1.211990874999998, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "lineno": 385, "outcome": "passed", "keywords": ["test_special_characters_in_name", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005276069999951005, "outcome": "passed"}, "call": {"duration": 0.0030537519999995766, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.4911487, "msecs": 491.0, "relativeCreated": 33424.96347427368, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.4913387, "msecs": 491.0, "relativeCreated": 33425.153493881226, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.492508, "msecs": 492.0, "relativeCreated": 33426.32269859314, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.4926977, "msecs": 492.0, "relativeCreated": 33426.512479782104, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.4928546, "msecs": 492.0, "relativeCreated": 33426.66935920715, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410938.4930024, "msecs": 493.0, "relativeCreated": 33426.817178726196, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.743343761999995, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "lineno": 47, "outcome": "passed", "keywords": ["test_add_client_command_variations", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023173106999990978, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410939.2600243, "msecs": 260.0, "relativeCreated": 34193.83907318115, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 33.78915256100001, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410939.2608848, "msecs": 260.0, "relativeCreated": 34194.69952583313, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410939.261479, "msecs": 261.0, "relativeCreated": 34195.29366493225, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410942.2050862, "msecs": 205.0, "relativeCreated": 37138.90099525452, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aam00AdWmkL-P6p_R8FIIo-\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410942.627059, "msecs": 627.0, "relativeCreated": 37560.87374687195, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410942.6278973, "msecs": 627.0, "relativeCreated": 37561.71202659607, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410942.62806, "msecs": 628.0, "relativeCreated": 37561.874866485596, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410945.5845506, "msecs": 584.0, "relativeCreated": 40518.36538314819, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AElY5_UeNuy7e7kMIWxy86l\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410946.1251864, "msecs": 125.0, "relativeCreated": 41059.001207351685, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410946.126, "msecs": 125.0, "relativeCreated": 41059.81469154358, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410946.126164, "msecs": 126.0, "relativeCreated": 41059.978723526, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410948.9212618, "msecs": 921.0, "relativeCreated": 43855.07655143738, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Au5sHz7OFrnUg_LNnLpEHKu\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410949.342907, "msecs": 342.0, "relativeCreated": 44276.721715927124, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410949.343856, "msecs": 343.0, "relativeCreated": 44277.67086029053, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410949.344025, "msecs": 344.0, "relativeCreated": 44277.83966064453, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410952.2942305, "msecs": 294.0, "relativeCreated": 47228.04522514343, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AA69HwVCxwphFlaHkByA61w\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410952.7196782, "msecs": 719.0, "relativeCreated": 47653.49292755127, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410952.7518275, "msecs": 751.0, "relativeCreated": 47685.64224243164, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410952.752053, "msecs": 752.0, "relativeCreated": 47685.86778640747, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410956.8620677, "msecs": 862.0, "relativeCreated": 51795.8824634552, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AEZ9aATjUqgMWd-H52GWtP9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410957.2836745, "msecs": 283.0, "relativeCreated": 52217.48924255371, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410957.2849433, "msecs": 284.0, "relativeCreated": 52218.75810623169, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410957.2851126, "msecs": 285.0, "relativeCreated": 52218.92738342285, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410959.6631463, "msecs": 663.0, "relativeCreated": 54596.96102142334, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Am5qkxlJ6LgdAZVxPQ1bT-_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410960.0838253, "msecs": 83.0, "relativeCreated": 55017.64011383057, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410960.0848703, "msecs": 84.0, "relativeCreated": 55018.68510246277, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410960.0850878, "msecs": 85.0, "relativeCreated": 55018.90254020691, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410962.9126723, "msecs": 912.0, "relativeCreated": 57846.487045288086, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMy_CpAjW0xKuQwkqG5hnPd\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410963.336146, "msecs": 336.0, "relativeCreated": 58269.96088027954, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410963.3371992, "msecs": 337.0, "relativeCreated": 58271.01397514343, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410963.3373644, "msecs": 337.0, "relativeCreated": 58271.17919921875, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410966.1648803, "msecs": 164.0, "relativeCreated": 61098.695039749146, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A_LyAGd-wqnjHtPEQTAxWi6\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410966.5868788, "msecs": 586.0, "relativeCreated": 61520.69354057312, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410966.5879729, "msecs": 587.0, "relativeCreated": 61521.78764343262, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410966.588133, "msecs": 588.0, "relativeCreated": 61521.94786071777, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410969.4425306, "msecs": 442.0, "relativeCreated": 64376.34539604187, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjNiYiljZMb220JWNb4xK0Q\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410969.865531, "msecs": 865.0, "relativeCreated": 64799.34573173523, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410969.8664083, "msecs": 866.0, "relativeCreated": 64800.22311210632, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410969.8667166, "msecs": 866.0, "relativeCreated": 64800.5313873291, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410972.626727, "msecs": 626.0, "relativeCreated": 67560.54186820984, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVMjhdTP3h_lUyV-jNYEWuA\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410973.0485268, "msecs": 48.0, "relativeCreated": 67982.34152793884, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 1.242099115000002, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "lineno": 75, "outcome": "failed", "keywords": ["test_phone_number_normalization", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022197977999994123, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410974.3141584, "msecs": 314.0, "relativeCreated": 69247.97320365906, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 0.0014398539999973536, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 98, "message": "AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nassert '+27821234567' == '27821234567'\n  - 27821234567\n  + +27821234567\n  ? +"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 98, "message": "in test_phone_number_normalization"}], "longrepr": "tests/test_phase2_client_management.py:98: in test_phone_number_normalization\n    assert normalized == expected_phone, \\\nE   AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nE   assert '+27821234567' == '27821234567'\nE     - 27821234567\nE     + +27821234567\nE     ? +"}, "teardown": {"duration": 1.045230128, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "lineno": 100, "outcome": "passed", "keywords": ["test_add_client_with_special_names", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022123675000003118, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410975.3879166, "msecs": 387.0, "relativeCreated": 70321.73132896423, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 25.72537086899999, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410975.3902266, "msecs": 390.0, "relativeCreated": 70324.04136657715, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410975.390814, "msecs": 390.0, "relativeCreated": 70324.62882995605, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410978.2514093, "msecs": 251.0, "relativeCreated": 73185.2240562439, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AY5ItsgIvpzhlD-GZcJj1dk\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410978.6739366, "msecs": 673.0, "relativeCreated": 73607.75136947632, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410978.6747584, "msecs": 674.0, "relativeCreated": 73608.57319831848, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410978.674999, "msecs": 674.0, "relativeCreated": 73608.8137626648, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410982.4372933, "msecs": 437.0, "relativeCreated": 77371.10805511475, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AwFt8z-52BUcFbdf4apna1n\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410982.8581347, "msecs": 858.0, "relativeCreated": 77791.94951057434, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410982.858897, "msecs": 858.0, "relativeCreated": 77792.71173477173, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410982.8590567, "msecs": 859.0, "relativeCreated": 77792.87147521973, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410985.655831, "msecs": 655.0, "relativeCreated": 80589.64586257935, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aj4AHL_t8SMvjEwfHOJqAy_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410986.0785558, "msecs": 78.0, "relativeCreated": 81012.37058639526, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410986.0794535, "msecs": 79.0, "relativeCreated": 81013.26823234558, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410986.079648, "msecs": 79.0, "relativeCreated": 81013.46278190613, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410988.9539354, "msecs": 953.0, "relativeCreated": 83887.7501487732, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AXwwhXscWeknMCPADkMMPsl\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410989.5029435, "msecs": 502.0, "relativeCreated": 84436.75827980042, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410989.504066, "msecs": 504.0, "relativeCreated": 84437.88075447083, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410989.5042346, "msecs": 504.0, "relativeCreated": 84438.04931640625, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410994.216097, "msecs": 216.0, "relativeCreated": 89149.91188049316, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ASqV7nwM9Km-aODVSlc3opN\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410994.6374857, "msecs": 637.0, "relativeCreated": 89571.3005065918, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410994.6386468, "msecs": 638.0, "relativeCreated": 89572.46160507202, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410994.638827, "msecs": 638.0, "relativeCreated": 89572.64184951782, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758410997.442913, "msecs": 442.0, "relativeCreated": 92376.72781944275, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AmGWC-VEBS6BlDwJln5xMJA\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410997.8648865, "msecs": 864.0, "relativeCreated": 92798.70128631592, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410997.8659728, "msecs": 865.0, "relativeCreated": 92799.7875213623, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758410997.866148, "msecs": 866.0, "relativeCreated": 92799.96275901794, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411000.6916487, "msecs": 691.0, "relativeCreated": 95625.46348571777, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A1vL-a43tRFLjDqeR3k8UXB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411001.112407, "msecs": 112.0, "relativeCreated": 96046.22173309326, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.8493474729999946, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "lineno": 140, "outcome": "failed", "keywords": ["test_view_clients_commands", "TestViewClientsReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0008780029999968519, "outcome": "passed"}, "call": {"duration": 3.925899874999999, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 160, "message": "AssertionError: Failed to list clients with command: Show my clients\nassert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 160, "message": "in test_view_clients_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411001.9652178, "msecs": 965.0, "relativeCreated": 96899.03259277344, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411001.9658282, "msecs": 965.0, "relativeCreated": 96899.64294433594, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411005.466972, "msecs": 466.0, "relativeCreated": 100400.78687667847, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AN-b2tbXja4oQQq7hcwbpEM\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411005.8884304, "msecs": 888.0, "relativeCreated": 100822.2451210022, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411005.889912, "msecs": 889.0, "relativeCreated": 100823.72665405273, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase2_client_management.py:160: in test_view_clients_commands\n    assert 'sarah' in message or 'john' in message or 'mike' in message or \\\nE   AssertionError: Failed to list clients with command: Show my clients\nE   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "teardown": {"duration": 1.0409215219999908, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "lineno": 188, "outcome": "passed", "keywords": ["test_set_custom_pricing_variations", "critical", "pytestmark", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013063239999837606, "outcome": "passed"}, "call": {"duration": 27.712655968000007, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411006.9377525, "msecs": 937.0, "relativeCreated": 101871.5672492981, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411006.9396734, "msecs": 939.0, "relativeCreated": 101873.48818778992, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411009.0903354, "msecs": 90.0, "relativeCreated": 104024.15013313293, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A_iwiqpYvxFFl5GiKbA5Ik7\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411009.5135667, "msecs": 513.0, "relativeCreated": 104447.38149642944, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411009.5144768, "msecs": 514.0, "relativeCreated": 104448.29154014587, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411009.514722, "msecs": 514.0, "relativeCreated": 104448.53687286377, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411011.6441817, "msecs": 644.0, "relativeCreated": 106577.99649238586, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJhoutH81TrvDe4o1wP6Okk\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411012.0655787, "msecs": 65.0, "relativeCreated": 106999.39346313477, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411012.0664222, "msecs": 66.0, "relativeCreated": 107000.23698806763, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411012.0665793, "msecs": 66.0, "relativeCreated": 107000.39410591125, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: update_client_fee with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411015.851387, "msecs": 851.0, "relativeCreated": 110785.20178794861, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AFOSDM3vK6xQqS9ZpW4QUUu\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411016.2740777, "msecs": 274.0, "relativeCreated": 111207.89241790771, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411016.275038, "msecs": 275.0, "relativeCreated": 111208.85276794434, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411016.2752283, "msecs": 275.0, "relativeCreated": 111209.04302597046, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411018.483346, "msecs": 483.0, "relativeCreated": 113417.16074943542, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWI0L4KNfzyAPpYbLUNXGXm\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411018.9081469, "msecs": 908.0, "relativeCreated": 113841.96162223816, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411018.9091544, "msecs": 909.0, "relativeCreated": 113842.96917915344, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411018.9093251, "msecs": 909.0, "relativeCreated": 113843.13988685608, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411022.233805, "msecs": 233.0, "relativeCreated": 117167.6197052002, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AggrwXtU50zIraGFrijJv4q\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411022.6584637, "msecs": 658.0, "relativeCreated": 117592.27848052979, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411022.6595986, "msecs": 659.0, "relativeCreated": 117593.41335296631, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411022.659779, "msecs": 659.0, "relativeCreated": 117593.59383583069, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411027.5384789, "msecs": 538.0, "relativeCreated": 122472.29361534119, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMC6MYbmK8jvnbYBK9kJSfS\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411027.961374, "msecs": 961.0, "relativeCreated": 122895.18880844116, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411027.9624965, "msecs": 962.0, "relativeCreated": 122896.31128311157, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411027.9627357, "msecs": 962.0, "relativeCreated": 122896.55041694641, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411030.1674337, "msecs": 167.0, "relativeCreated": 125101.24850273132, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AP7Os0-4p2taA5p6Zd3nYC5\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411030.7757351, "msecs": 775.0, "relativeCreated": 125709.54990386963, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411030.7767148, "msecs": 776.0, "relativeCreated": 125710.52956581116, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411030.776963, "msecs": 776.0, "relativeCreated": 125710.777759552, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411034.226674, "msecs": 226.0, "relativeCreated": 129160.48884391785, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A-lnVcNlFA5pmK7mmX0ymR9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411034.6487532, "msecs": 648.0, "relativeCreated": 129582.56793022156, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.8235120030000189, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "lineno": 220, "outcome": "failed", "keywords": ["test_check_client_pricing", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013302589999852898, "outcome": "passed"}, "call": {"duration": 4.175531408000012, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 239, "message": "AssertionError: Failed to show pricing with: What is Sarah's rate?\nassert ('r' in '' or 'rand' in '' or False)\n +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f9a6863b4c0>)"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 239, "message": "in test_check_client_pricing"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411035.4775062, "msecs": 477.0, "relativeCreated": 130411.32092475891, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411035.4780998, "msecs": 478.0, "relativeCreated": 130411.91458702087, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411039.2260265, "msecs": 226.0, "relativeCreated": 134159.841299057, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AsACnX-QMU56s_DeUsZih-D\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411039.6499522, "msecs": 649.0, "relativeCreated": 134583.76693725586, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase2_client_management.py:239: in test_check_client_pricing\n    assert 'r' in message or 'rand' in message or \\\nE   AssertionError: Failed to show pricing with: What is Sarah's rate?\nE   assert ('r' in '' or 'rand' in '' or False)\nE    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f9a6863b4c0>)"}, "teardown": {"duration": 0.789877587999996, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "lineno": 253, "outcome": "failed", "keywords": ["test_add_client_with_duplicate_phone", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004387909999934436, "outcome": "passed"}, "call": {"duration": 3.2810769520000065, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 268, "message": "assert ('already' in '' or 'exists' in '')\n +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a58614ac0>('message', '')\n +        where <built-in method get of dict object at 0x7f9a58614ac0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a58614ac0>('message', '')\n +        where <built-in method get of dict object at 0x7f9a58614ac0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 268, "message": "in test_add_client_with_duplicate_phone"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411040.4472322, "msecs": 447.0, "relativeCreated": 135381.04701042175, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411040.4491982, "msecs": 449.0, "relativeCreated": 135383.01301002502, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411043.3044095, "msecs": 304.0, "relativeCreated": 138238.2242679596, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AvOS8cGSitivwNARoJMamtp\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411043.7260861, "msecs": 726.0, "relativeCreated": 138659.90090370178, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone\n    assert 'already' in response.get('message', '').lower() or \\\nE   assert ('already' in '' or 'exists' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a58614ac0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a58614ac0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a58614ac0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a58614ac0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.7238595649999979, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "lineno": 270, "outcome": "passed", "keywords": ["test_invalid_phone_numbers", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004258069999991676, "outcome": "passed"}, "call": {"duration": 0.00011247000000480512, "outcome": "passed"}, "teardown": {"duration": 0.7806313709999984, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "lineno": 286, "outcome": "passed", "keywords": ["test_set_negative_pricing", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00039657099998180456, "outcome": "passed"}, "call": {"duration": 9.541899999021553e-05, "outcome": "passed"}, "teardown": {"duration": 0.7841179010000019, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "lineno": 300, "outcome": "failed", "keywords": ["test_client_not_found", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00039216400000441354, "outcome": "passed"}, "call": {"duration": 3.710438210999996, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 311, "message": "assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\n +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\n +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\n +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\n +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\n +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 311, "message": "in test_client_not_found"}], "log": [{"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411046.026084, "msecs": 26.0, "relativeCreated": 140959.89871025085, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error creating conversation state: 'Mock' object is not subscriptable", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411046.0266688, "msecs": 26.0, "relativeCreated": 140960.4835510254, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411049.149561, "msecs": 149.0, "relativeCreated": 144083.37569236755, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AlBzmHUUHoBQcBe-Va7R8xM\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411049.7326915, "msecs": 732.0, "relativeCreated": 144666.5062904358, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase2_client_management.py:311: in test_client_not_found\n    assert 'not found' in response.get('message', '').lower() or \\\nE   assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f9a6c53fba0>()\nE    +    where <built-in method lower of str object at 0x7f9a6c53fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f9a58739a00>('message', '')\nE    +        where <built-in method get of dict object at 0x7f9a58739a00> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.7737480840000046, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "lineno": 53, "outcome": "failed", "keywords": ["test_view_schedule_commands", "TestViewScheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001544530000018085, "outcome": "passed"}, "call": {"duration": 3.0087930709999853, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 74, "message": "AssertionError: Failed to show schedule with: Show my schedule\nassert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 74, "message": "in test_view_schedule_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411050.5145934, "msecs": 514.0, "relativeCreated": 145448.40812683105, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411050.516747, "msecs": 516.0, "relativeCreated": 145450.56176185608, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411053.382215, "msecs": 382.0, "relativeCreated": 148316.0297870636, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A4EzqJW5ZdcKoGMSslW4gKt\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411053.5206976, "msecs": 520.0, "relativeCreated": 148454.5123577118, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411053.52225, "msecs": 522.0, "relativeCreated": 148456.06470108032, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}], "longrepr": "tests/test_phase3_scheduling.py:74: in test_view_schedule_commands\n    assert 'schedule' in message or 'booking' in message or \\\nE   AssertionError: Failed to show schedule with: Show my schedule\nE   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "teardown": {"duration": 0.753447078999983, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "lineno": 110, "outcome": "passed", "keywords": ["test_book_session_natural_language", "critical", "pytestmark", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023301685000006955, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411054.3038695, "msecs": 303.0, "relativeCreated": 149237.68424987793, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 1.0337255919999961, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL5TiN7YURRa8Sop7T'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL5TiN7YURRa8Sop7T'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.5098069, "msecs": 509.0, "relativeCreated": 149443.621635437, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL5noqYwxN2WArkciZ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL5noqYwxN2WArkciZ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.5861588, "msecs": 586.0, "relativeCreated": 149519.97351646423, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL67QCSaenEfzA2Mox'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL67QCSaenEfzA2Mox'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.662588, "msecs": 662.0, "relativeCreated": 149596.40264511108, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL6SkR5n2WTQQPUY3h'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL6SkR5n2WTQQPUY3h'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.7398307, "msecs": 739.0, "relativeCreated": 149673.6454963684, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL6nLThFFZ5jyahDje'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL6nLThFFZ5jyahDje'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.8202233, "msecs": 820.0, "relativeCreated": 149754.03809547424, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL79uaU6wbb5d2pFBi'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL79uaU6wbb5d2pFBi'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411054.9085245, "msecs": 908.0, "relativeCreated": 149842.33927726746, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL7aTgatpvimyxReBd'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL7aTgatpvimyxReBd'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411055.0151453, "msecs": 15.0, "relativeCreated": 149948.96006584167, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL7wY2TmhiKkfF9ffr'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL7wY2TmhiKkfF9ffr'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411055.0908961, "msecs": 90.0, "relativeCreated": 150024.71089363098, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8KMb5UtmB236bar5'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8KMb5UtmB236bar5'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411055.1768522, "msecs": 176.0, "relativeCreated": 150110.66699028015, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8dTXoVcS2dmxkFNs'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8dTXoVcS2dmxkFNs'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411055.2593336, "msecs": 259.0, "relativeCreated": 150193.1483745575, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8zndfvrMZCG81boe'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLXL8zndfvrMZCG81boe'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411055.3372626, "msecs": 337.0, "relativeCreated": 150271.07739448547, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.7674197460000016, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "lineno": 144, "outcome": "failed", "keywords": ["test_booking_time_formats", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02265846200000965, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411056.1285238, "msecs": 128.0, "relativeCreated": 151062.33859062195, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 0.0009974059999819929, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 168, "message": "AssertionError: Failed to validate time: 9am\nassert False == True"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 168, "message": "in test_booking_time_formats"}], "longrepr": "tests/test_phase3_scheduling.py:168: in test_booking_time_formats\n    assert is_valid == True, f\"Failed to validate time: {time_format}\"\nE   AssertionError: Failed to validate time: 9am\nE   assert False == True"}, "teardown": {"duration": 0.973417870999981, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "lineno": 169, "outcome": "passed", "keywords": ["test_booking_date_parsing", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02328260999999543, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411057.1308115, "msecs": 130.0, "relativeCreated": 152064.62621688843, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "call": {"duration": 0.0004008399999975154, "outcome": "passed"}, "teardown": {"duration": 0.8105825840000023, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "lineno": 223, "outcome": "passed", "keywords": ["test_cancel_booking_variations", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0010053010000206086, "outcome": "passed"}, "call": {"duration": 23.938296981000008, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411057.944207, "msecs": 944.0, "relativeCreated": 152878.02171707153, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411057.944969, "msecs": 944.0, "relativeCreated": 152878.78370285034, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411060.7262402, "msecs": 726.0, "relativeCreated": 155660.05492210388, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AYC0aLaVvcMIz0gnJopVl1T\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411060.836704, "msecs": 836.0, "relativeCreated": 155770.51877975464, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411060.837478, "msecs": 837.0, "relativeCreated": 155771.2926864624, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411060.8376665, "msecs": 837.0, "relativeCreated": 155771.48127555847, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411063.5793812, "msecs": 579.0, "relativeCreated": 158513.1959915161, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AcEV2uetK6Dvx1yL9SLO3Tx\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411063.700943, "msecs": 700.0, "relativeCreated": 158634.7577571869, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411063.701744, "msecs": 701.0, "relativeCreated": 158635.55884361267, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411063.7019103, "msecs": 701.0, "relativeCreated": 158635.7250213623, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_modification with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411066.3949964, "msecs": 394.0, "relativeCreated": 161328.81116867065, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AExipG-N2Gtw1w_Mbm87NU_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411066.505005, "msecs": 505.0, "relativeCreated": 161438.81964683533, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411066.505862, "msecs": 505.0, "relativeCreated": 161439.6767616272, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411066.5060356, "msecs": 506.0, "relativeCreated": 161439.85033035278, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: booking_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411069.231789, "msecs": 231.0, "relativeCreated": 164165.6038761139, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AflrQBE-33M-KKBBxAjoAns\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411069.3391755, "msecs": 339.0, "relativeCreated": 164272.9902267456, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411069.3402555, "msecs": 340.0, "relativeCreated": 164274.07026290894, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411069.3404295, "msecs": 340.0, "relativeCreated": 164274.24430847168, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: cancel_session with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411072.0647817, "msecs": 64.0, "relativeCreated": 166998.59642982483, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ABqtj-o0LP7TlvQNOmBmGOJ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411072.2004452, "msecs": 200.0, "relativeCreated": 167134.25993919373, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411072.2063951, "msecs": 206.0, "relativeCreated": 167140.20991325378, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411072.207772, "msecs": 207.0, "relativeCreated": 167141.5867805481, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411075.8156238, "msecs": 815.0, "relativeCreated": 170749.43852424622, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJBB_tspr8Rb8w_D90Ok3vB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411075.9268181, "msecs": 926.0, "relativeCreated": 170860.63289642334, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411075.9278865, "msecs": 927.0, "relativeCreated": 170861.7012500763, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411075.9280722, "msecs": 928.0, "relativeCreated": 170861.8869781494, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411078.8517728, "msecs": 851.0, "relativeCreated": 173785.5875492096, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ANxJVUcqVw30cSc4ZKkih_y\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411078.9713535, "msecs": 971.0, "relativeCreated": 173905.16829490662, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411078.9724252, "msecs": 972.0, "relativeCreated": 173906.23998641968, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411078.9726207, "msecs": 972.0, "relativeCreated": 173906.43548965454, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411081.7710593, "msecs": 771.0, "relativeCreated": 176704.8740386963, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ASTaLqkXsNo5gw1lkZlewNi\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411081.8809423, "msecs": 880.0, "relativeCreated": 176814.75710868835, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 5.111079487000012, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "lineno": 248, "outcome": "passed", "keywords": ["test_reschedule_booking", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0010801109999931668, "outcome": "passed"}, "call": {"duration": 15.467927534000012, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411086.9953454, "msecs": 995.0, "relativeCreated": 181929.16011810303, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411086.9959571, "msecs": 995.0, "relativeCreated": 181929.771900177, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411090.906453, "msecs": 906.0, "relativeCreated": 185840.26765823364, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjFRPU2PeV6WKqsiJLLCDv2\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411091.0171614, "msecs": 17.0, "relativeCreated": 185950.97613334656, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411091.0181518, "msecs": 18.0, "relativeCreated": 185951.96652412415, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411091.0183225, "msecs": 18.0, "relativeCreated": 185952.13723182678, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411093.899704, "msecs": 899.0, "relativeCreated": 188833.51874351501, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A_hBFMyoZnJNCI9x1eTg2DM\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411094.007176, "msecs": 7.0, "relativeCreated": 188940.99068641663, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411094.0082402, "msecs": 8.0, "relativeCreated": 188942.05498695374, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411094.0084076, "msecs": 8.0, "relativeCreated": 188942.22235679626, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411096.573256, "msecs": 573.0, "relativeCreated": 191507.07077980042, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVWmrEqC-9Xc8ITO7wM8yN6\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411096.68979, "msecs": 689.0, "relativeCreated": 191623.6047744751, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411096.6906323, "msecs": 690.0, "relativeCreated": 191624.44710731506, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411096.6908193, "msecs": 690.0, "relativeCreated": 191624.63402748108, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411099.46733, "msecs": 467.0, "relativeCreated": 194401.1447429657, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWvvSrfy78n6vUkFnRvVVAr\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411099.577678, "msecs": 577.0, "relativeCreated": 194511.492729187, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411099.578901, "msecs": 578.0, "relativeCreated": 194512.7158164978, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411099.5790868, "msecs": 579.0, "relativeCreated": 194512.90154457092, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Error parsing datetime 'afternoon': String does not contain a date: afternoon", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411102.3519, "msecs": 351.0, "relativeCreated": 197285.71486473083, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758411102.3519583, "msecs": 351.0, "relativeCreated": 197285.77303886414, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJ_2tdUJSH1or6b-D-p6abZ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411102.461799, "msecs": 461.0, "relativeCreated": 197395.61367034912, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.8015606440000056, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "lineno": 283, "outcome": "passed", "keywords": ["test_double_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00043644600000902756, "outcome": "passed"}, "call": {"duration": 0.0013088390000177696, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411103.266553, "msecs": 266.0, "relativeCreated": 198200.3676891327, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 0.8025971760000061, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "lineno": 313, "outcome": "passed", "keywords": ["test_past_date_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00040155100001015853, "outcome": "passed"}, "call": {"duration": 0.0012301419999971586, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758411104.0713084, "msecs": 71.0, "relativeCreated": 199005.12313842773, "thread": 140301219613568, "threadName": "MainThread", "processName": "MainProcess", "process": 2188}]}, "teardown": {"duration": 1.2681830830000251, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "lineno": 334, "outcome": "passed", "keywords": ["test_invalid_time_slots", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0004149460000064664, "outcome": "passed"}, "call": {"duration": 0.0001941929999986769, "outcome": "passed"}, "teardown": {"duration": 1.024282894999999, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "lineno": 79, "outcome": "failed", "keywords": ["test_new_trainer_onboarding", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022898899999290734, "outcome": "passed"}, "call": {"duration": 0.0013606459999948584, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 89, "message": "AssertionError: assert 'welcome' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f9a583be060>()\n +    where <built-in method lower of str object at 0x7f9a583be060> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 89, "message": "in test_new_trainer_onboarding"}], "longrepr": "tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding\n    assert \"welcome\" in response['message'].lower()\nE   AssertionError: assert 'welcome' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f9a583be060>()\nE    +    where <built-in method lower of str object at 0x7f9a583be060> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 1.0149722879999956, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "lineno": 120, "outcome": "failed", "keywords": ["test_trainer_recognition", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022895800000810596, "outcome": "passed"}, "call": {"duration": 0.001262642000000369, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 134, "message": "AssertionError: assert 'john' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f9a585471e0>()\n +    where <built-in method lower of str object at 0x7f9a585471e0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 134, "message": "in test_trainer_recognition"}], "longrepr": "tests/test_refiloe_complete.py:134: in test_trainer_recognition\n    assert \"john\" in response['message'].lower()\nE   AssertionError: assert 'john' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f9a585471e0>()\nE    +    where <built-in method lower of str object at 0x7f9a585471e0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 1.0590128169999957, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "lineno": 143, "outcome": "failed", "keywords": ["test_add_client_variations", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022685499999397507, "outcome": "passed"}, "call": {"duration": 0.000763779000010345, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 158, "message": "AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\n +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f9a58556130>()\n +    where <built-in method lower of str object at 0x7f9a58556130> = 'Mock response to: Add client Sarah 0821234567'.lower\n +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f9a58556130>()\n +    where <built-in method lower of str object at 0x7f9a58556130> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 158, "message": "in test_add_client_variations"}], "longrepr": "tests/test_refiloe_complete.py:158: in test_add_client_variations\n    assert \"added\" in response['message'].lower() or \"registered\" in response['message'].lower()\nE   AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\nE    +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f9a58556130>()\nE    +    where <built-in method lower of str object at 0x7f9a58556130> = 'Mock response to: Add client Sarah 0821234567'.lower\nE    +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f9a58556130>()\nE    +    where <built-in method lower of str object at 0x7f9a58556130> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "teardown": {"duration": 0.785073868000012, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "lineno": 159, "outcome": "failed", "keywords": ["test_view_clients", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002522920000274098, "outcome": "passed"}, "call": {"duration": 0.0011647689999563227, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 179, "message": "AssertionError: assert 'sarah' in 'mock response to: show my clients'\n +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f9a583cbf90>()\n +    where <built-in method lower of str object at 0x7f9a583cbf90> = 'Mock response to: Show my clients'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 179, "message": "in test_view_clients"}], "longrepr": "tests/test_refiloe_complete.py:179: in test_view_clients\n    assert \"sarah\" in response['message'].lower()\nE   AssertionError: assert 'sarah' in 'mock response to: show my clients'\nE    +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f9a583cbf90>()\nE    +    where <built-in method lower of str object at 0x7f9a583cbf90> = 'Mock response to: Show my clients'.lower"}, "teardown": {"duration": 0.8046262150000416, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "lineno": 181, "outcome": "failed", "keywords": ["test_set_custom_pricing", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00023057099997458863, "outcome": "passed"}, "call": {"duration": 0.0009546659999841722, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 196, "message": "assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\n +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f9a584b9a70>()\n +    where <built-in method lower of str object at 0x7f9a584b9a70> = \"Mock response to: Change John's price to R500 per session\".lower\n +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f9a584b9a70>()\n +    where <built-in method lower of str object at 0x7f9a584b9a70> = \"Mock response to: Change John's price to R500 per session\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 196, "message": "in test_set_custom_pricing"}], "longrepr": "tests/test_refiloe_complete.py:196: in test_set_custom_pricing\n    assert \"updated\" in response['message'].lower() or \"set\" in response['message'].lower()\nE   assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\nE    +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f9a584b9a70>()\nE    +    where <built-in method lower of str object at 0x7f9a584b9a70> = \"Mock response to: Change John's price to R500 per session\".lower\nE    +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f9a584b9a70>()\nE    +    where <built-in method lower of str object at 0x7f9a584b9a70> = \"Mock response to: Change John's price to R500 per session\".lower"}, "teardown": {"duration": 0.999624549000032, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "lineno": 206, "outcome": "failed", "keywords": ["test_view_schedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022188499997355393, "outcome": "passed"}, "call": {"duration": 0.0007604729999570736, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 223, "message": "assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\n +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f9a583cb9f0>()\n +    where <built-in method lower of str object at 0x7f9a583cb9f0> = \"Mock response to: What's on today\".lower\n +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f9a583cb9f0>()\n +    where <built-in method lower of str object at 0x7f9a583cb9f0> = \"Mock response to: What's on today\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 223, "message": "in test_view_schedule"}], "longrepr": "tests/test_refiloe_complete.py:223: in test_view_schedule\n    assert \"schedule\" in response['message'].lower() or \"booking\" in response['message'].lower()\nE   assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\nE    +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f9a583cb9f0>()\nE    +    where <built-in method lower of str object at 0x7f9a583cb9f0> = \"Mock response to: What's on today\".lower\nE    +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f9a583cb9f0>()\nE    +    where <built-in method lower of str object at 0x7f9a583cb9f0> = \"Mock response to: What's on today\".lower"}, "teardown": {"duration": 1.2601028400000018, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "lineno": 224, "outcome": "failed", "keywords": ["test_book_sessions", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022196499998017316, "outcome": "passed"}, "call": {"duration": 0.0007617460000233223, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 239, "message": "AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\n +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f9a584bbec0>()\n +    where <built-in method lower of str object at 0x7f9a584bbec0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\n +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f9a584bbec0>()\n +    where <built-in method lower of str object at 0x7f9a584bbec0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 239, "message": "in test_book_sessions"}], "longrepr": "tests/test_refiloe_complete.py:239: in test_book_sessions\n    assert \"booked\" in response['message'].lower() or \"scheduled\" in response['message'].lower()\nE   AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\nE    +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f9a584bbec0>()\nE    +    where <built-in method lower of str object at 0x7f9a584bbec0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\nE    +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f9a584bbec0>()\nE    +    where <built-in method lower of str object at 0x7f9a584bbec0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "teardown": {"duration": 0.7463634979999938, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "lineno": 240, "outcome": "passed", "keywords": ["test_cancel_reschedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00024436699999341727, "outcome": "passed"}, "call": {"duration": 0.0006674890000226696, "outcome": "passed"}, "teardown": {"duration": 0.727958104000038, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "lineno": 257, "outcome": "failed", "keywords": ["test_setup_habits", "TestPhase4_HabitTracking", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00022955899999033136, "outcome": "passed"}, "call": {"duration": 0.0035395529999959763, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 273, "message": "AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\n +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f9a584b8340>()\n +    where <built-in method lower of str object at 0x7f9a584b8340> = 'Mock response to: Sarah needs to track steps target 10000'.lower\n +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f9a584b8340>()\n +    where <built-in method lower of str object at 0x7f9a584b8340> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 273, "message": "in test_setup_habits"}], "longrepr": "tests/test_refiloe_complete.py:273: in test_setup_habits\n    assert \"habit\" in response['message'].lower() or \"tracking\" in response['message'].lower()\nE   AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\nE    +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f9a584b8340>()\nE    +    where <built-in method lower of str object at 0x7f9a584b8340> = 'Mock response to: Sarah needs to track steps target 10000'.lower\nE    +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f9a584b8340>()\nE    +    where <built-in method lower of str object at 0x7f9a584b8340> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "teardown": {"duration": 0.7961583830000336, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "lineno": 278, "outcome": "failed", "keywords": ["test_send_workouts", "TestPhase5_WorkoutsAssessments", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002215939999814509, "outcome": "passed"}, "call": {"duration": 0.0007783460000041487, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 293, "message": "AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\n +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f9a583cb990>()\n +    where <built-in method lower of str object at 0x7f9a583cb990> = 'Mock response to: Send Mike a cardio program'.lower\n +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f9a583cb990>()\n +    where <built-in method lower of str object at 0x7f9a583cb990> = 'Mock response to: Send Mike a cardio program'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 293, "message": "in test_send_workouts"}], "longrepr": "tests/test_refiloe_complete.py:293: in test_send_workouts\n    assert \"workout\" in response['message'].lower() or \"sent\" in response['message'].lower()\nE   AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\nE    +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f9a583cb990>()\nE    +    where <built-in method lower of str object at 0x7f9a583cb990> = 'Mock response to: Send Mike a cardio program'.lower\nE    +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f9a583cb990>()\nE    +    where <built-in method lower of str object at 0x7f9a583cb990> = 'Mock response to: Send Mike a cardio program'.lower"}, "teardown": {"duration": 1.0102165030000378, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "lineno": 298, "outcome": "failed", "keywords": ["test_request_payment", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002198309999812409, "outcome": "passed"}, "call": {"duration": 0.0007520870000234936, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 313, "message": "AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\n +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f9a585553b0>()\n +    where <built-in method lower of str object at 0x7f9a585553b0> = 'Mock response to: Bill Mike for this month'.lower\n +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f9a585553b0>()\n +    where <built-in method lower of str object at 0x7f9a585553b0> = 'Mock response to: Bill Mike for this month'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 313, "message": "in test_request_payment"}], "longrepr": "tests/test_refiloe_complete.py:313: in test_request_payment\n    assert \"payment\" in response['message'].lower() or \"invoice\" in response['message'].lower()\nE   AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\nE    +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f9a585553b0>()\nE    +    where <built-in method lower of str object at 0x7f9a585553b0> = 'Mock response to: Bill Mike for this month'.lower\nE    +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f9a585553b0>()\nE    +    where <built-in method lower of str object at 0x7f9a585553b0> = 'Mock response to: Bill Mike for this month'.lower"}, "teardown": {"duration": 0.7686737849999759, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "lineno": 314, "outcome": "passed", "keywords": ["test_check_revenue", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00023111199999448218, "outcome": "passed"}, "call": {"duration": 0.0006680600000095183, "outcome": "passed"}, "teardown": {"duration": 0.8213118499999723, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "lineno": 334, "outcome": "failed", "keywords": ["test_client_booking", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002226459999974395, "outcome": "passed"}, "call": {"duration": 0.003926426000020911, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 349, "message": "AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\n +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f9a58493f30>()\n +    where <built-in method lower of str object at 0x7f9a58493f30> = 'Mock response to: I want to train tomorrow'.lower\n +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f9a58493f30>()\n +    where <built-in method lower of str object at 0x7f9a58493f30> = 'Mock response to: I want to train tomorrow'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 349, "message": "in test_client_booking"}], "longrepr": "tests/test_refiloe_complete.py:349: in test_client_booking\n    assert \"book\" in response['message'].lower() or \"session\" in response['message'].lower()\nE   AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\nE    +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f9a58493f30>()\nE    +    where <built-in method lower of str object at 0x7f9a58493f30> = 'Mock response to: I want to train tomorrow'.lower\nE    +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f9a58493f30>()\nE    +    where <built-in method lower of str object at 0x7f9a58493f30> = 'Mock response to: I want to train tomorrow'.lower"}, "teardown": {"duration": 0.7537478230000261, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "lineno": 350, "outcome": "failed", "keywords": ["test_client_habit_logging", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002271849999715414, "outcome": "passed"}, "call": {"duration": 0.0007418480000183081, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 365, "message": "AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\n +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f9a58546a60>()\n +    where <built-in method lower of str object at 0x7f9a58546a60> = 'Mock response to: 7 yes no'.lower\n +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f9a58546a60>()\n +    where <built-in method lower of str object at 0x7f9a58546a60> = 'Mock response to: 7 yes no'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 365, "message": "in test_client_habit_logging"}], "longrepr": "tests/test_refiloe_complete.py:365: in test_client_habit_logging\n    assert \"logged\" in response['message'].lower() or \"recorded\" in response['message'].lower()\nE   AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\nE    +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f9a58546a60>()\nE    +    where <built-in method lower of str object at 0x7f9a58546a60> = 'Mock response to: 7 yes no'.lower\nE    +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f9a58546a60>()\nE    +    where <built-in method lower of str object at 0x7f9a58546a60> = 'Mock response to: 7 yes no'.lower"}, "teardown": {"duration": 0.8032021679999843, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "lineno": 370, "outcome": "passed", "keywords": ["test_natural_language_understanding", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00021544300000186922, "outcome": "passed"}, "call": {"duration": 0.0006582320000347863, "outcome": "passed"}, "teardown": {"duration": 0.8455571380000038, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "lineno": 388, "outcome": "failed", "keywords": ["test_error_handling", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00021727600000076563, "outcome": "passed"}, "call": {"duration": 0.003362691999996059, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 403, "message": "assert False\n +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f9a58600ac0>)"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 403, "message": "in test_error_handling"}], "longrepr": "tests/test_refiloe_complete.py:403: in test_error_handling\n    assert any(word in response['message'].lower() for word in expected_words)\nE   assert False\nE    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f9a58600ac0>)"}, "teardown": {"duration": 0.8061708989999943, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "lineno": 408, "outcome": "failed", "keywords": ["test_trainer_registration_step_7_currency_parsing", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00023991900002329203, "outcome": "passed"}, "call": {"duration": 0.000859488000003239, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 437, "message": "TypeError: 'Mock' object is not subscriptable"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 437, "message": "in test_trainer_registration_step_7_currency_parsing"}], "longrepr": "tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing\n    assert result['data'].get('pricing') == expected_value\nE   TypeError: 'Mock' object is not subscriptable"}, "teardown": {"duration": 0.7736726690000069, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "lineno": 438, "outcome": "passed", "keywords": ["test_ai_responds_naturally_not_rigid_commands", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00026665799998681905, "outcome": "passed"}, "call": {"duration": 0.0006866250000143737, "outcome": "passed"}, "teardown": {"duration": 0.7421215540000503, "outcome": "passed"}}], "warnings": [{"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "\nPyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),\n(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)\nbut was not found to be installed on your system.\nIf this would cause problems for you,\nplease provide us feedback at https://github.com/pandas-dev/pandas/issues/54466\n        ", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py", "lineno": 7}]}