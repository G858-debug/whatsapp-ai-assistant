{"created": 1758408157.7750776, "duration": 145.613276720047, "exitcode": 1, "root": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant", "environment": {}, "summary": {"passed": 31, "failed": 26, "total": 57, "collected": 57}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/__init__.py", "type": "Package"}]}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "type": "Function", "lineno": 130}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "type": "Function", "lineno": 136}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "type": "Function", "lineno": 143}]}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "type": "Function", "lineno": 170}]}, {"nodeid": "tests/test_conversation_flows.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "type": "Class"}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "type": "Class"}]}, {"nodeid": "tests/test_debug.py", "outcome": "passed", "result": [{"nodeid": "tests/test_debug.py::test_python_version", "type": "Function", "lineno": 9}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "type": "Function", "lineno": 14}, {"nodeid": "tests/test_debug.py::test_project_structure", "type": "Function", "lineno": 28}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "type": "Function", "lineno": 48}, {"nodeid": "tests/test_debug.py::test_check_requirements", "type": "Function", "lineno": 84}]}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "type": "Function", "lineno": 46}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "type": "Function", "lineno": 140}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "type": "Function", "lineno": 199}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "type": "Function", "lineno": 214}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "type": "Function", "lineno": 234}]}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "type": "Function", "lineno": 324}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "type": "Function", "lineno": 341}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "type": "Function", "lineno": 366}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "type": "Function", "lineno": 385}]}, {"nodeid": "tests/test_phase1_registration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "type": "Function", "lineno": 47}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "type": "Function", "lineno": 100}]}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "type": "Function", "lineno": 140}]}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "type": "Function", "lineno": 188}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "type": "Function", "lineno": 220}]}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "type": "Function", "lineno": 253}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "type": "Function", "lineno": 270}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "type": "Function", "lineno": 300}]}, {"nodeid": "tests/test_phase2_client_management.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "type": "Function", "lineno": 53}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "type": "Function", "lineno": 110}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "type": "Function", "lineno": 144}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "type": "Function", "lineno": 169}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "type": "Function", "lineno": 223}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "type": "Function", "lineno": 248}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "type": "Function", "lineno": 283}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "type": "Function", "lineno": 313}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "type": "Function", "lineno": 334}]}, {"nodeid": "tests/test_phase3_scheduling.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "type": "Class"}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "type": "Function", "lineno": 120}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "type": "Function", "lineno": 143}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "type": "Function", "lineno": 159}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "type": "Function", "lineno": 181}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "type": "Function", "lineno": 206}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "type": "Function", "lineno": 224}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "type": "Function", "lineno": 240}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "type": "Function", "lineno": 257}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "type": "Function", "lineno": 278}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "type": "Function", "lineno": 298}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "type": "Function", "lineno": 314}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "type": "Function", "lineno": 334}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "type": "Function", "lineno": 350}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "type": "Function", "lineno": 370}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "type": "Function", "lineno": 388}]}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "type": "Function", "lineno": 408}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "type": "Function", "lineno": 438}]}, {"nodeid": "tests/test_refiloe_complete.py", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "type": "Class"}]}, {"nodeid": "tests/__init__.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py", "type": "Module"}, {"nodeid": "tests/test_debug.py", "type": "Module"}, {"nodeid": "tests/test_phase1_registration.py", "type": "Module"}, {"nodeid": "tests/test_phase2_client_management.py", "type": "Module"}, {"nodeid": "tests/test_phase3_scheduling.py", "type": "Module"}, {"nodeid": "tests/test_refiloe_complete.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "lineno": 130, "outcome": "passed", "keywords": ["test_imports_work", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005554490000037049, "outcome": "passed"}, "call": {"duration": 0.03386747999999784, "outcome": "passed"}, "teardown": {"duration": 0.0001639470000043275, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "lineno": 136, "outcome": "passed", "keywords": ["test_mock_message", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002849219999916386, "outcome": "passed"}, "call": {"duration": 0.022866492000005678, "outcome": "passed"}, "teardown": {"duration": 0.00013554400000259648, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "lineno": 143, "outcome": "passed", "keywords": ["test_trainer_registration_mock", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00024552799999355557, "outcome": "passed"}, "call": {"duration": 0.022519954000003395, "outcome": "passed"}, "teardown": {"duration": 0.00012207800000396674, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "lineno": 165, "outcome": "passed", "keywords": ["test_basic_setup", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022638827000008632, "outcome": "passed"}, "call": {"duration": 0.0023659839999936594, "outcome": "passed"}, "teardown": {"duration": 0.00012158799999895109, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "lineno": 170, "outcome": "passed", "keywords": ["test_mock_registration_flow", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022227096999998253, "outcome": "passed"}, "call": {"duration": 0.00025146999999492436, "outcome": "passed"}, "teardown": {"duration": 0.00012559500000008939, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_python_version", "lineno": 9, "outcome": "passed", "keywords": ["test_python_version", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00023605200000531568, "outcome": "passed"}, "call": {"duration": 0.00010981600000548042, "outcome": "passed"}, "teardown": {"duration": 0.000121326999988014, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "lineno": 14, "outcome": "passed", "keywords": ["test_can_import_basic_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001907470000048761, "outcome": "passed"}, "call": {"duration": 8.183300001007865e-05, "outcome": "passed"}, "teardown": {"duration": 0.00012114599999790698, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_project_structure", "lineno": 28, "outcome": "passed", "keywords": ["test_project_structure", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00018100900000206366, "outcome": "passed"}, "call": {"duration": 0.00021217699999453998, "outcome": "passed"}, "teardown": {"duration": 0.00011140899999873, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "lineno": 48, "outcome": "passed", "keywords": ["test_can_import_refiloe_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001673929999981283, "outcome": "passed"}, "call": {"duration": 0.0004927510000101165, "outcome": "passed"}, "teardown": {"duration": 0.00011953400000663805, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_check_requirements", "lineno": 84, "outcome": "passed", "keywords": ["test_check_requirements", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00016468700000871195, "outcome": "passed"}, "call": {"duration": 0.06868505499998889, "outcome": "passed"}, "teardown": {"duration": 0.00014207499999940865, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "lineno": 46, "outcome": "failed", "keywords": ["test_complete_trainer_registration_flow", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00166484300000036, "outcome": "passed"}, "call": {"duration": 0.002062726000005455, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 107, "message": "assert False == True"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 107, "message": "in test_complete_trainer_registration_flow"}], "log": [{"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8316162, "msecs": 831.0, "relativeCreated": 1758.9621543884277, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.831881, "msecs": 831.0, "relativeCreated": 1759.2270374298096, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.832085, "msecs": 832.0, "relativeCreated": 1759.4308853149414, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8324819, "msecs": 832.0, "relativeCreated": 1759.8278522491455, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8326752, "msecs": 832.0, "relativeCreated": 1760.0212097167969, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase1_registration.py:107: in test_complete_trainer_registration_flow\n    assert result['success'] == True\nE   assert False == True"}, "teardown": {"duration": 0.00017233299999475094, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "lineno": 140, "outcome": "passed", "keywords": ["test_currency_parsing_variations", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0015048129999968296, "outcome": "passed"}, "call": {"duration": 0.010769805999998994, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8910496, "msecs": 891.0, "relativeCreated": 1818.3956146240234, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8928487, "msecs": 892.0, "relativeCreated": 1820.1947212219238, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8933997, "msecs": 893.0, "relativeCreated": 1820.7457065582275, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8938982, "msecs": 893.0, "relativeCreated": 1821.244239807129, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8943849, "msecs": 894.0, "relativeCreated": 1821.7308521270752, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8948557, "msecs": 894.0, "relativeCreated": 1822.2017288208008, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8955324, "msecs": 895.0, "relativeCreated": 1822.878360748291, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8960009, "msecs": 896.0, "relativeCreated": 1823.3468532562256, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.896489, "msecs": 896.0, "relativeCreated": 1823.8348960876465, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8969538, "msecs": 896.0, "relativeCreated": 1824.2998123168945, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8974326, "msecs": 897.0, "relativeCreated": 1824.7785568237305, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8979044, "msecs": 897.0, "relativeCreated": 1825.2503871917725, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8983808, "msecs": 898.0, "relativeCreated": 1825.7267475128174, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8989828, "msecs": 898.0, "relativeCreated": 1826.3287544250488, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8994775, "msecs": 899.0, "relativeCreated": 1826.8234729766846, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.8999398, "msecs": 899.0, "relativeCreated": 1827.2857666015625, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.9004407, "msecs": 900.0, "relativeCreated": 1827.7866840362549, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00011564700000121775, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "lineno": 199, "outcome": "passed", "keywords": ["test_registration_with_missing_fields", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0014552309999942281, "outcome": "passed"}, "call": {"duration": 0.0007454440000032037, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408012.9034777, "msecs": 903.0, "relativeCreated": 1830.8236598968506, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 8.753400000216516e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "lineno": 214, "outcome": "failed", "keywords": ["test_trainer_recognition_after_registration", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0015665490000031923, "outcome": "passed"}, "call": {"duration": 3.8617199090000014, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 231, "message": "AssertionError: Should recognize and greet trainer by name\nassert ('john' in '' or 'welcome back' in '')\n +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e8b1380>('message', '')\n +        where <built-in method get of dict object at 0x7f538e8b1380> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e8b1380>('message', '')\n +        where <built-in method get of dict object at 0x7f538e8b1380> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 231, "message": "in test_trainer_recognition_after_registration"}], "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408013.8305106, "msecs": 830.0, "relativeCreated": 2757.856607437134, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Background scheduler started", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408013.86998, "msecs": 869.0, "relativeCreated": 2797.32608795166, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Routes setup complete", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408013.871168, "msecs": 871.0, "relativeCreated": 2798.513889312744, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408013.8764179, "msecs": 876.0, "relativeCreated": 2803.7638664245605, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408013.8770666, "msecs": 877.0, "relativeCreated": 2804.412603378296, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: greeting with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408016.618321, "msecs": 618.0, "relativeCreated": 5545.666933059692, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A4QXOa0kg1hNiNUDMgnTcOC\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408016.7654834, "msecs": 765.0, "relativeCreated": 5692.829370498657, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Created new conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408016.7667248, "msecs": 766.0, "relativeCreated": 5694.070816040039, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase1_registration.py:231: in test_trainer_recognition_after_registration\n    assert 'john' in response.get('message', '').lower() or \\\nE   AssertionError: Should recognize and greet trainer by name\nE   assert ('john' in '' or 'welcome back' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e8b1380>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e8b1380> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e8b1380>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e8b1380> = {'response': \"Hi there! Good to hear from you \ud83d\ude0a\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "teardown": {"duration": 0.00014373899999498008, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "lineno": 234, "outcome": "passed", "keywords": ["test_registration_saves_all_fields_correctly", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0014191029999892635, "outcome": "passed"}, "call": {"duration": 0.0009948400000041602, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Trainer registered: John Smith (trainer-123)", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408016.7755964, "msecs": 775.0, "relativeCreated": 5702.942371368408, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 8.999800000708547e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "lineno": 288, "outcome": "failed", "keywords": ["test_client_receives_welcome_after_registration", "TestClientRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0009173350000111213, "outcome": "passed"}, "call": {"duration": 2.834887023999997, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 297, "message": "assert ('added' in '' or 'registered' in '')\n +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e89e740>('message', '')\n +        where <built-in method get of dict object at 0x7f538e89e740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e89e740>('message', '')\n +        where <built-in method get of dict object at 0x7f538e89e740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 297, "message": "in test_client_receives_welcome_after_registration"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408016.7785203, "msecs": 778.0, "relativeCreated": 5705.86633682251, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408016.7790956, "msecs": 779.0, "relativeCreated": 5706.441640853882, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408019.4720778, "msecs": 472.0, "relativeCreated": 8399.423837661743, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AxKjv-NqXVpXyIabescxs1X\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.611075, "msecs": 611.0, "relativeCreated": 8538.420915603638, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration\n    assert 'added' in response.get('message', '').lower() or \\\nE   assert ('added' in '' or 'registered' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e89e740>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e89e740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e89e740>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e89e740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.00015265500000793963, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "lineno": 324, "outcome": "failed", "keywords": ["test_duplicate_registration_attempt", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00041020599999797014, "outcome": "passed"}, "call": {"duration": 0.0018340169999930822, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 339, "message": "assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\n +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55d4becc1d30>()\n +    where <built-in method lower of str object at 0x55d4becc1d30> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\n +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55d4becc1d30>()\n +    where <built-in method lower of str object at 0x55d4becc1d30> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 339, "message": "in test_duplicate_registration_attempt"}], "log": [{"name": "refiloe", "msg": "Error checking existing registration: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.620645, "msecs": 620.0, "relativeCreated": 8547.991037368774, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6212926, "msecs": 621.0, "relativeCreated": 8548.638582229614, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase1_registration.py:339: in test_duplicate_registration_attempt\n    assert 'already' in response.lower() or \\\nE   assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\nE    +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55d4becc1d30>()\nE    +    where <built-in method lower of str object at 0x55d4becc1d30> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\nE    +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x55d4becc1d30>()\nE    +    where <built-in method lower of str object at 0x55d4becc1d30> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "teardown": {"duration": 0.00010702000000151202, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "lineno": 341, "outcome": "passed", "keywords": ["test_invalid_email_format", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00035202799999467516, "outcome": "passed"}, "call": {"duration": 0.0002651150000048119, "outcome": "passed"}, "teardown": {"duration": 8.157199999914155e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "lineno": 366, "outcome": "failed", "keywords": ["test_extremely_long_input", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032832300000507075, "outcome": "passed"}, "call": {"duration": 0.0011604879999964623, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 382, "message": "AssertionError: assert 500 <= 255\n +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 382, "message": "in test_extremely_long_input"}], "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6290476, "msecs": 629.0, "relativeCreated": 8556.39362335205, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase1_registration.py:382: in test_extremely_long_input\n    assert len(result['data']['name']) <= 255  # Reasonable limit\nE   AssertionError: assert 500 <= 255\nE    +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "teardown": {"duration": 9.494700000800549e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "lineno": 385, "outcome": "passed", "keywords": ["test_special_characters_in_name", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00037016199999584387, "outcome": "passed"}, "call": {"duration": 0.002030683000000977, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6354675, "msecs": 635.0, "relativeCreated": 8562.813520431519, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6356585, "msecs": 635.0, "relativeCreated": 8563.004493713379, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6358187, "msecs": 635.0, "relativeCreated": 8563.164710998535, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6360316, "msecs": 636.0, "relativeCreated": 8563.377618789673, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6362593, "msecs": 636.0, "relativeCreated": 8563.605308532715, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.636428, "msecs": 636.0, "relativeCreated": 8563.774108886719, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 9.08700000081808e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "lineno": 47, "outcome": "passed", "keywords": ["test_add_client_command_variations", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022795098000003122, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408019.6596127, "msecs": 659.0, "relativeCreated": 8586.958646774292, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 30.708901006000005, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6607022, "msecs": 660.0, "relativeCreated": 8588.048219680786, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408019.6613271, "msecs": 661.0, "relativeCreated": 8588.673114776611, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408022.4783049, "msecs": 478.0, "relativeCreated": 11405.650854110718, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A_0EjCeo-DZL7KtuLI7xJMQ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408022.6146061, "msecs": 614.0, "relativeCreated": 11541.952133178711, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408022.6165984, "msecs": 616.0, "relativeCreated": 11543.944358825684, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408022.6167822, "msecs": 616.0, "relativeCreated": 11544.12817955017, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408025.5126688, "msecs": 512.0, "relativeCreated": 14440.014839172363, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AkKQCgQ-9DbEDkE0vT-X7Hi\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408025.6487892, "msecs": 648.0, "relativeCreated": 14576.135158538818, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408025.650187, "msecs": 650.0, "relativeCreated": 14577.53300666809, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408025.6503725, "msecs": 650.0, "relativeCreated": 14577.718496322632, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408028.5405278, "msecs": 540.0, "relativeCreated": 17467.8738117218, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AePyXRRKkKbzX2YZUClgZu1\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408028.6779966, "msecs": 677.0, "relativeCreated": 17605.342626571655, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408028.6793146, "msecs": 679.0, "relativeCreated": 17606.66060447693, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408028.6795099, "msecs": 679.0, "relativeCreated": 17606.855869293213, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408031.5155087, "msecs": 515.0, "relativeCreated": 20442.854642868042, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AXfpnh1TnHllltAq4xthnhP\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408031.617671, "msecs": 617.0, "relativeCreated": 20545.01700401306, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408031.6193137, "msecs": 619.0, "relativeCreated": 20546.65970802307, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408031.6194916, "msecs": 619.0, "relativeCreated": 20546.83756828308, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408035.5513158, "msecs": 551.0, "relativeCreated": 24478.66177558899, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMLbKAwjR7BdhBPMSpagGyD\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408035.6888187, "msecs": 688.0, "relativeCreated": 24616.164684295654, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408035.6903975, "msecs": 690.0, "relativeCreated": 24617.743492126465, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408035.6905823, "msecs": 690.0, "relativeCreated": 24617.92826652527, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408038.3715801, "msecs": 371.0, "relativeCreated": 27298.92611503601, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWG97J12obrGlaY5fVl9tL2\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408038.5090735, "msecs": 509.0, "relativeCreated": 27436.41948699951, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408038.510533, "msecs": 510.0, "relativeCreated": 27437.87908554077, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408038.5109253, "msecs": 510.0, "relativeCreated": 27438.271284103394, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408041.3516593, "msecs": 351.0, "relativeCreated": 30279.00528907776, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AxQW7jklQDWg2NLvlzvk6sT\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408041.489791, "msecs": 489.0, "relativeCreated": 30417.136907577515, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408041.4913201, "msecs": 491.0, "relativeCreated": 30418.666124343872, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408041.4915707, "msecs": 491.0, "relativeCreated": 30418.916702270508, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408044.28036, "msecs": 280.0, "relativeCreated": 33207.70597457886, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AXzxru54jkG_js1lVAZUv9_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408044.4175537, "msecs": 417.0, "relativeCreated": 33344.89965438843, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408044.4189334, "msecs": 418.0, "relativeCreated": 33346.27938270569, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408044.4191403, "msecs": 419.0, "relativeCreated": 33346.48633003235, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408047.3797581, "msecs": 379.0, "relativeCreated": 36307.10411071777, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUci2Fy9n_jyy-bKZHKHcuO\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408047.5178263, "msecs": 517.0, "relativeCreated": 36445.17230987549, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408047.5188644, "msecs": 518.0, "relativeCreated": 36446.2103843689, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408047.5193012, "msecs": 519.0, "relativeCreated": 36446.64716720581, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408050.2316308, "msecs": 231.0, "relativeCreated": 39158.976793289185, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AhLC3bFc-d0Sb8Ji5jxlSZt\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408050.3673856, "msecs": 367.0, "relativeCreated": 39294.73161697388, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00017028900001037073, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "lineno": 75, "outcome": "failed", "keywords": ["test_phone_number_normalization", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02301053700000466, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408050.3924022, "msecs": 392.0, "relativeCreated": 39319.74816322327, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 0.00043996199997309304, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 98, "message": "AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nassert '+27821234567' == '27821234567'\n  - 27821234567\n  + +27821234567\n  ? +"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 98, "message": "in test_phone_number_normalization"}], "longrepr": "tests/test_phase2_client_management.py:98: in test_phone_number_normalization\n    assert normalized == expected_phone, \\\nE   AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nE   assert '+27821234567' == '27821234567'\nE     - 27821234567\nE     + +27821234567\nE     ? +"}, "teardown": {"duration": 0.00011596699999927296, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "lineno": 100, "outcome": "passed", "keywords": ["test_add_client_with_special_names", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023295387999979766, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408050.4212544, "msecs": 421.0, "relativeCreated": 39348.60038757324, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 22.873012797, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408050.4223802, "msecs": 422.0, "relativeCreated": 39349.72620010376, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408050.4230077, "msecs": 423.0, "relativeCreated": 39350.353717803955, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408053.1804235, "msecs": 180.0, "relativeCreated": 42107.76948928833, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aw0aQws43F4QGw7WuKsW0gn\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408053.3192756, "msecs": 319.0, "relativeCreated": 42246.62160873413, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408053.3206012, "msecs": 320.0, "relativeCreated": 42247.947216033936, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408053.3207762, "msecs": 320.0, "relativeCreated": 42248.122215270996, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408056.1509185, "msecs": 150.0, "relativeCreated": 45078.264474868774, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A5j6WrhmzmiRDtT99vabAuo\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408056.2796967, "msecs": 279.0, "relativeCreated": 45207.0426940918, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408056.2810605, "msecs": 281.0, "relativeCreated": 45208.40644836426, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408056.2812593, "msecs": 281.0, "relativeCreated": 45208.60528945923, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408059.0388737, "msecs": 38.0, "relativeCreated": 47966.219663619995, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ADHZTKtOVRD6K299AtsfoQ2\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408059.2897007, "msecs": 289.0, "relativeCreated": 48217.0467376709, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408059.2913733, "msecs": 291.0, "relativeCreated": 48218.719244003296, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408059.291633, "msecs": 291.0, "relativeCreated": 48218.97888183594, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408062.1735346, "msecs": 173.0, "relativeCreated": 51100.88062286377, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AflRYGHfIvg32fUdqhIwwN8\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408062.308903, "msecs": 308.0, "relativeCreated": 51236.24897003174, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408062.3105378, "msecs": 310.0, "relativeCreated": 51237.88380622864, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408062.3107255, "msecs": 310.0, "relativeCreated": 51238.07144165039, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408067.3422654, "msecs": 342.0, "relativeCreated": 56269.61135864258, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AWryyQEijC8DsDIr-ViDPo2\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408067.4780562, "msecs": 478.0, "relativeCreated": 56405.402183532715, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408067.4796047, "msecs": 479.0, "relativeCreated": 56406.95071220398, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408067.480001, "msecs": 480.0, "relativeCreated": 56407.346963882446, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408070.311032, "msecs": 311.0, "relativeCreated": 59238.378047943115, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AizBDwLyGIqfHPqMFklH4J9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408070.4488454, "msecs": 448.0, "relativeCreated": 59376.19137763977, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408070.4505532, "msecs": 450.0, "relativeCreated": 59377.899169921875, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408070.4508219, "msecs": 450.0, "relativeCreated": 59378.16786766052, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408073.1555226, "msecs": 155.0, "relativeCreated": 62082.868576049805, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ac-BIXZzZnVrCokM40fBQhj\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408073.2930872, "msecs": 293.0, "relativeCreated": 62220.43323516846, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00017461599998114252, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "lineno": 140, "outcome": "failed", "keywords": ["test_view_clients_commands", "TestViewClientsReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0008545970000000125, "outcome": "passed"}, "call": {"duration": 5.161989212000009, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 160, "message": "AssertionError: Failed to list clients with command: Show my clients\nassert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 160, "message": "in test_view_clients_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408073.2971685, "msecs": 297.0, "relativeCreated": 62224.51448440552, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408073.2979035, "msecs": 297.0, "relativeCreated": 62225.24952888489, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408078.3183453, "msecs": 318.0, "relativeCreated": 67245.69129943848, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJVI21dGIc-Z8Lz03rHMF7M\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408078.4558382, "msecs": 455.0, "relativeCreated": 67383.18419456482, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408078.4578106, "msecs": 457.0, "relativeCreated": 67385.15663146973, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase2_client_management.py:160: in test_view_clients_commands\n    assert 'sarah' in message or 'john' in message or 'mike' in message or \\\nE   AssertionError: Failed to list clients with command: Show my clients\nE   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "teardown": {"duration": 0.00014797700001167868, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "lineno": 188, "outcome": "passed", "keywords": ["test_set_custom_pricing_variations", "critical", "pytestmark", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0012604949999968085, "outcome": "passed"}, "call": {"duration": 25.699997083, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408078.4651988, "msecs": 465.0, "relativeCreated": 67392.54474639893, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408078.4657826, "msecs": 465.0, "relativeCreated": 67393.12863349915, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408082.5206485, "msecs": 520.0, "relativeCreated": 71447.99447059631, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AgA253DQ478y6Z8bJHdttJh\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408082.654612, "msecs": 654.0, "relativeCreated": 71581.95805549622, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408082.655768, "msecs": 655.0, "relativeCreated": 71583.1139087677, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408082.6559484, "msecs": 655.0, "relativeCreated": 71583.29439163208, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408084.9293845, "msecs": 929.0, "relativeCreated": 73856.7304611206, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AQ_Sxupk0LctYpASyYCGAL_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408085.0642252, "msecs": 64.0, "relativeCreated": 73991.57118797302, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408085.065856, "msecs": 65.0, "relativeCreated": 73993.20197105408, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408085.0660393, "msecs": 66.0, "relativeCreated": 73993.3853149414, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408088.2403815, "msecs": 240.0, "relativeCreated": 77167.72747039795, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AflyMv-s3pTuapZs9MAK1hs\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408088.3753748, "msecs": 375.0, "relativeCreated": 77302.72078514099, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408088.3768613, "msecs": 376.0, "relativeCreated": 77304.20732498169, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408088.377049, "msecs": 377.0, "relativeCreated": 77304.39496040344, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408090.408517, "msecs": 408.0, "relativeCreated": 79335.86287498474, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ak95mdddl3SrZY5nz8JQvW9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408090.5440862, "msecs": 544.0, "relativeCreated": 79471.43220901489, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408090.545839, "msecs": 545.0, "relativeCreated": 79473.18506240845, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408090.5460448, "msecs": 546.0, "relativeCreated": 79473.39081764221, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408094.0231755, "msecs": 23.0, "relativeCreated": 82950.52146911621, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A-xRCVlVYVgn5oBGEGcla8g\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408094.1599674, "msecs": 159.0, "relativeCreated": 83087.31341362, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408094.16178, "msecs": 161.0, "relativeCreated": 83089.1261100769, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408094.1619728, "msecs": 161.0, "relativeCreated": 83089.31875228882, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408098.2675946, "msecs": 267.0, "relativeCreated": 87194.9405670166, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ACJp3g1NtFAUC8gpmITLEX7\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408098.4037716, "msecs": 403.0, "relativeCreated": 87331.11763000488, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408098.4055223, "msecs": 405.0, "relativeCreated": 87332.86833763123, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408098.4057176, "msecs": 405.0, "relativeCreated": 87333.06360244751, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408100.8395777, "msecs": 839.0, "relativeCreated": 89766.92366600037, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMhyY0LiGSIzqPurID--x3i\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408100.9767358, "msecs": 976.0, "relativeCreated": 89904.08182144165, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408100.9785278, "msecs": 978.0, "relativeCreated": 89905.87377548218, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408100.9787345, "msecs": 978.0, "relativeCreated": 89906.08048439026, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408104.0262163, "msecs": 26.0, "relativeCreated": 92953.56225967407, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AlMqLiPX6lu9PFP2pc_t46U\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408104.1628647, "msecs": 162.0, "relativeCreated": 93090.21067619324, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00017470699998511918, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "lineno": 220, "outcome": "failed", "keywords": ["test_check_client_pricing", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001307010999994418, "outcome": "passed"}, "call": {"duration": 4.367363720999975, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 239, "message": "AssertionError: Failed to show pricing with: What is Sarah's rate?\nassert ('r' in '' or 'rand' in '' or False)\n +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f538e8a7300>)"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 239, "message": "in test_check_client_pricing"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408104.167309, "msecs": 167.0, "relativeCreated": 93094.65503692627, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408104.1679585, "msecs": 167.0, "relativeCreated": 93095.30448913574, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408108.3977797, "msecs": 397.0, "relativeCreated": 97325.1256942749, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ATVsvBCWMhp1pgvRF1kYfgB\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408108.5326524, "msecs": 532.0, "relativeCreated": 97459.99836921692, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase2_client_management.py:239: in test_check_client_pricing\n    assert 'r' in message or 'rand' in message or \\\nE   AssertionError: Failed to show pricing with: What is Sarah's rate?\nE   assert ('r' in '' or 'rand' in '' or False)\nE    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f538e8a7300>)"}, "teardown": {"duration": 0.00016334500000425578, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "lineno": 253, "outcome": "failed", "keywords": ["test_add_client_with_duplicate_phone", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00036202700002263555, "outcome": "passed"}, "call": {"duration": 3.2914107109999975, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 268, "message": "assert ('already' in '' or 'exists' in '')\n +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e8bf740>('message', '')\n +        where <built-in method get of dict object at 0x7f538e8bf740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f538e8bf740>('message', '')\n +        where <built-in method get of dict object at 0x7f538e8bf740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 268, "message": "in test_add_client_with_duplicate_phone"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408108.541182, "msecs": 541.0, "relativeCreated": 97468.52803230286, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408108.5417705, "msecs": 541.0, "relativeCreated": 97469.11644935608, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408111.694194, "msecs": 694.0, "relativeCreated": 100621.54006958008, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ATwf1qiDb-oOGTfNedbUpgo\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408111.8295188, "msecs": 829.0, "relativeCreated": 100756.86478614807, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone\n    assert 'already' in response.get('message', '').lower() or \\\nE   assert ('already' in '' or 'exists' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e8bf740>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e8bf740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f538e8bf740>('message', '')\nE    +        where <built-in method get of dict object at 0x7f538e8bf740> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.00015007100000730134, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "lineno": 270, "outcome": "passed", "keywords": ["test_invalid_phone_numbers", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00036491099999125254, "outcome": "passed"}, "call": {"duration": 0.00010497600001713181, "outcome": "passed"}, "teardown": {"duration": 0.0001044149999813726, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "lineno": 286, "outcome": "passed", "keywords": ["test_set_negative_pricing", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002733599999942271, "outcome": "passed"}, "call": {"duration": 9.810400001697417e-05, "outcome": "passed"}, "teardown": {"duration": 0.00011931299999901057, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "lineno": 300, "outcome": "failed", "keywords": ["test_client_not_found", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00025103900000544854, "outcome": "passed"}, "call": {"duration": 3.7886901960000046, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 311, "message": "assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\n +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\n +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\n +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\n +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\n +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 311, "message": "in test_client_not_found"}], "log": [{"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408111.8401105, "msecs": 840.0, "relativeCreated": 100767.45653152466, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error creating conversation state: 'Mock' object is not subscriptable", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408111.8414319, "msecs": 841.0, "relativeCreated": 100768.77784729004, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408115.4888558, "msecs": 488.0, "relativeCreated": 104416.20182991028, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"APkYQUvy00XptPf831fw0R9\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408115.6257465, "msecs": 625.0, "relativeCreated": 104553.09247970581, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase2_client_management.py:311: in test_client_not_found\n    assert 'not found' in response.get('message', '').lower() or \\\nE   assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\nE    +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\nE    +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f53a153fba0>()\nE    +    where <built-in method lower of str object at 0x7f53a153fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f539d59ea40>('message', '')\nE    +        where <built-in method get of dict object at 0x7f539d59ea40> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.00013893900000994108, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "lineno": 53, "outcome": "failed", "keywords": ["test_view_schedule_commands", "TestViewScheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.002012690000015027, "outcome": "passed"}, "call": {"duration": 2.858516371999997, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 74, "message": "AssertionError: Failed to show schedule with: Show my schedule\nassert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 74, "message": "in test_view_schedule_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408115.6360118, "msecs": 636.0, "relativeCreated": 104563.35783004761, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408115.6370845, "msecs": 637.0, "relativeCreated": 104564.43047523499, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408118.3536642, "msecs": 353.0, "relativeCreated": 107281.01015090942, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ao0NWfQ20ZMKsCmIlRdRlZA\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.4906495, "msecs": 490.0, "relativeCreated": 107417.99545288086, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408118.4925985, "msecs": 492.0, "relativeCreated": 107419.94452476501, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}], "longrepr": "tests/test_phase3_scheduling.py:74: in test_view_schedule_commands\n    assert 'schedule' in message or 'booking' in message or \\\nE   AssertionError: Failed to show schedule with: Show my schedule\nE   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "teardown": {"duration": 0.00014054300001475895, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "lineno": 110, "outcome": "passed", "keywords": ["test_book_session_natural_language", "critical", "pytestmark", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022884468999990304, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408118.5206451, "msecs": 520.0, "relativeCreated": 107447.9911327362, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 0.6689130640000087, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbf7ihqq6tPSoPt35E'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbf7ihqq6tPSoPt35E'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.5606365, "msecs": 560.0, "relativeCreated": 107487.98251152039, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfGA81VnJwcxQYyXj'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfGA81VnJwcxQYyXj'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.5960252, "msecs": 596.0, "relativeCreated": 107523.37121963501, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfRL5S7AAYiERAFLk'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfRL5S7AAYiERAFLk'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.6346133, "msecs": 634.0, "relativeCreated": 107561.9592666626, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfbFVDztKdcTVC6JX'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbfbFVDztKdcTVC6JX'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.7465742, "msecs": 746.0, "relativeCreated": 107673.92015457153, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbg4n1V5BNuweAqiTY'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbg4n1V5BNuweAqiTY'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.783852, "msecs": 783.0, "relativeCreated": 107711.19809150696, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgECBmH761p5pPeW7'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgECBmH761p5pPeW7'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.8227212, "msecs": 822.0, "relativeCreated": 107750.0672340393, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgPNZeiHwqCvq1hLq'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgPNZeiHwqCvq1hLq'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.8622413, "msecs": 862.0, "relativeCreated": 107789.5872592926, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgaHAT2R6DsCZc7zp'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgaHAT2R6DsCZc7zp'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408118.9024181, "msecs": 902.0, "relativeCreated": 107829.76412773132, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgiiLz6VjZ7rERMp7'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbgiiLz6VjZ7rERMp7'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408119.1053238, "msecs": 105.0, "relativeCreated": 108032.66978263855, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbhcns3mLUaGoAyycu'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbhcns3mLUaGoAyycu'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408119.1466389, "msecs": 146.0, "relativeCreated": 108073.9848613739, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbhmiZnJJX3XqCK5YM'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTLTbhmiZnJJX3XqCK5YM'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408119.1890607, "msecs": 189.0, "relativeCreated": 108116.40667915344, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00023775400001113667, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "lineno": 144, "outcome": "failed", "keywords": ["test_booking_time_formats", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02276059799999075, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408119.2133777, "msecs": 213.0, "relativeCreated": 108140.72370529175, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 0.0010839149999810616, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 168, "message": "AssertionError: Failed to validate time: 9am\nassert False == True"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 168, "message": "in test_booking_time_formats"}], "longrepr": "tests/test_phase3_scheduling.py:168: in test_booking_time_formats\n    assert is_valid == True, f\"Failed to validate time: {time_format}\"\nE   AssertionError: Failed to validate time: 9am\nE   assert False == True"}, "teardown": {"duration": 0.00011713899999676869, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "lineno": 169, "outcome": "passed", "keywords": ["test_booking_date_parsing", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02285443200000259, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408119.2446418, "msecs": 244.0, "relativeCreated": 108171.98777198792, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "call": {"duration": 0.0004462729999943349, "outcome": "passed"}, "teardown": {"duration": 0.00011231000001998837, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "lineno": 223, "outcome": "passed", "keywords": ["test_cancel_booking_variations", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0009405469999990146, "outcome": "passed"}, "call": {"duration": 23.884217930000005, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408119.2475047, "msecs": 247.0, "relativeCreated": 108174.85070228577, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408119.248927, "msecs": 248.0, "relativeCreated": 108176.27310752869, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408122.0293982, "msecs": 29.0, "relativeCreated": 110956.74419403076, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AtgkvSDiCN1Dw0siY4_yiW4\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408122.1242743, "msecs": 124.0, "relativeCreated": 111051.62024497986, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408122.1257296, "msecs": 125.0, "relativeCreated": 111053.0755519867, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408122.1260378, "msecs": 126.0, "relativeCreated": 111053.38382720947, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408124.7798424, "msecs": 779.0, "relativeCreated": 113707.18836784363, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A0BDWT2udiYvWT_Mwu4YgTe\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408124.9019694, "msecs": 901.0, "relativeCreated": 113829.31542396545, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408124.9034562, "msecs": 903.0, "relativeCreated": 113830.80220222473, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408124.9036753, "msecs": 903.0, "relativeCreated": 113831.02130889893, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_modification with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408127.5648189, "msecs": 564.0, "relativeCreated": 116492.16485023499, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjbneQ9xI1cConfexMrLpUA\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408127.6733801, "msecs": 673.0, "relativeCreated": 116600.72612762451, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408127.6747096, "msecs": 674.0, "relativeCreated": 116602.05554962158, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408127.6749172, "msecs": 674.0, "relativeCreated": 116602.26321220398, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: booking_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408130.4020078, "msecs": 402.0, "relativeCreated": 119329.35380935669, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVY5IXX02TqDQSWAqQ4co01\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408130.5140812, "msecs": 514.0, "relativeCreated": 119441.42723083496, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408130.5159757, "msecs": 515.0, "relativeCreated": 119443.3217048645, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408130.5161994, "msecs": 516.0, "relativeCreated": 119443.5453414917, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408133.2958033, "msecs": 295.0, "relativeCreated": 122223.14929962158, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AGwFuedq8cTDWBFetFz9KR4\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408133.4045548, "msecs": 404.0, "relativeCreated": 122331.90083503723, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408133.406147, "msecs": 406.0, "relativeCreated": 122333.49299430847, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408133.4063308, "msecs": 406.0, "relativeCreated": 122333.67681503296, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408136.9629624, "msecs": 962.0, "relativeCreated": 125890.30838012695, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AcCgeMjelR4wkcu6ufuTXFd\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408137.1181548, "msecs": 118.0, "relativeCreated": 126045.50075531006, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408137.1199255, "msecs": 119.0, "relativeCreated": 126047.27149009705, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408137.120116, "msecs": 120.0, "relativeCreated": 126047.46198654175, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408140.0843847, "msecs": 84.0, "relativeCreated": 129011.73067092896, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A90YntJbjMA5AdFgHrebMQ_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408140.1920786, "msecs": 192.0, "relativeCreated": 129119.42458152771, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408140.1939752, "msecs": 193.0, "relativeCreated": 129121.32120132446, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408140.1942804, "msecs": 194.0, "relativeCreated": 129121.62637710571, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408143.022569, "msecs": 22.0, "relativeCreated": 131949.91493225098, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AfP1HSGl8UbUI62uBrVPJtw\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408143.129584, "msecs": 129.0, "relativeCreated": 132056.93006515503, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00015352599999118866, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "lineno": 248, "outcome": "passed", "keywords": ["test_reschedule_booking", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0010532180000097924, "outcome": "passed"}, "call": {"duration": 14.535899592999982, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408143.1336396, "msecs": 133.0, "relativeCreated": 132060.98556518555, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408143.1343749, "msecs": 134.0, "relativeCreated": 132061.7208480835, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408145.8818321, "msecs": 881.0, "relativeCreated": 134809.17811393738, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A_Enma4or7RrTgXajoL4nvg\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408146.019727, "msecs": 19.0, "relativeCreated": 134947.0729827881, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408146.0212312, "msecs": 21.0, "relativeCreated": 134948.57716560364, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408146.021443, "msecs": 21.0, "relativeCreated": 134948.78888130188, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408148.9200714, "msecs": 920.0, "relativeCreated": 137847.41735458374, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ACmVUbFmylLTv99AbikXnP1\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408149.061496, "msecs": 61.0, "relativeCreated": 137988.84201049805, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408149.0629134, "msecs": 62.0, "relativeCreated": 137990.2594089508, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408149.0631135, "msecs": 63.0, "relativeCreated": 137990.45944213867, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408151.7010117, "msecs": 701.0, "relativeCreated": 140628.3576488495, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A0Nqn2xpM6TZdPOmOc2TlH1\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408151.8624265, "msecs": 862.0, "relativeCreated": 140789.77251052856, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408151.863758, "msecs": 863.0, "relativeCreated": 140791.10407829285, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408151.8639324, "msecs": 863.0, "relativeCreated": 140791.27836227417, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408154.616488, "msecs": 616.0, "relativeCreated": 143543.83397102356, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AOCGPwgEqWwtLxF5n4YzJz4\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408154.7524362, "msecs": 752.0, "relativeCreated": 143679.7821521759, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408154.7543685, "msecs": 754.0, "relativeCreated": 143681.71453475952, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408154.7545786, "msecs": 754.0, "relativeCreated": 143681.9245815277, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Error parsing datetime 'afternoon': String does not contain a date: afternoon", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408157.5306633, "msecs": 530.0, "relativeCreated": 146458.00924301147, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758408157.5307531, "msecs": 530.0, "relativeCreated": 146458.0991268158, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AKpaVrNB8-0sUlYf0VpPBTh\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408157.6672788, "msecs": 667.0, "relativeCreated": 146594.62475776672, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 0.00016600000003563764, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "lineno": 283, "outcome": "passed", "keywords": ["test_double_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005085399999984475, "outcome": "passed"}, "call": {"duration": 0.001539766000007603, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408157.671723, "msecs": 671.0, "relativeCreated": 146599.06888008118, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 9.782300003280398e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "lineno": 313, "outcome": "passed", "keywords": ["test_past_date_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00039054899997381654, "outcome": "passed"}, "call": {"duration": 0.0012022349999938342, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758408157.6739585, "msecs": 673.0, "relativeCreated": 146601.3045310974, "thread": 139997166480256, "threadName": "MainThread", "processName": "MainProcess", "process": 2241}]}, "teardown": {"duration": 8.927699997229865e-05, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "lineno": 334, "outcome": "passed", "keywords": ["test_invalid_time_slots", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00037585100000114835, "outcome": "passed"}, "call": {"duration": 0.00019618599998239006, "outcome": "passed"}, "teardown": {"duration": 8.643199998914497e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "lineno": 79, "outcome": "failed", "keywords": ["test_new_trainer_onboarding", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00016905600000427512, "outcome": "passed"}, "call": {"duration": 0.0014103830000067319, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 89, "message": "AssertionError: assert 'welcome' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f538d7243a0>()\n +    where <built-in method lower of str object at 0x7f538d7243a0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 89, "message": "in test_new_trainer_onboarding"}], "longrepr": "tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding\n    assert \"welcome\" in response['message'].lower()\nE   AssertionError: assert 'welcome' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f538d7243a0>()\nE    +    where <built-in method lower of str object at 0x7f538d7243a0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 9.286300002031567e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "lineno": 120, "outcome": "failed", "keywords": ["test_trainer_recognition", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00017978500000026543, "outcome": "passed"}, "call": {"duration": 0.0012935159999756252, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 134, "message": "AssertionError: assert 'john' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f538d6fabf0>()\n +    where <built-in method lower of str object at 0x7f538d6fabf0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 134, "message": "in test_trainer_recognition"}], "longrepr": "tests/test_refiloe_complete.py:134: in test_trainer_recognition\n    assert \"john\" in response['message'].lower()\nE   AssertionError: assert 'john' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f538d6fabf0>()\nE    +    where <built-in method lower of str object at 0x7f538d6fabf0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 9.684999997716659e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "lineno": 143, "outcome": "failed", "keywords": ["test_add_client_variations", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00019948200002772865, "outcome": "passed"}, "call": {"duration": 0.0007772409999802221, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 158, "message": "AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\n +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f538d593a50>()\n +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Add client Sarah 0821234567'.lower\n +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f538d593a50>()\n +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 158, "message": "in test_add_client_variations"}], "longrepr": "tests/test_refiloe_complete.py:158: in test_add_client_variations\n    assert \"added\" in response['message'].lower() or \"registered\" in response['message'].lower()\nE   AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\nE    +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f538d593a50>()\nE    +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Add client Sarah 0821234567'.lower\nE    +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f538d593a50>()\nE    +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "teardown": {"duration": 9.472699997559175e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "lineno": 159, "outcome": "failed", "keywords": ["test_view_clients", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00017245100002583058, "outcome": "passed"}, "call": {"duration": 0.0011611879999691155, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 179, "message": "AssertionError: assert 'sarah' in 'mock response to: show my clients'\n +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f538d593390>()\n +    where <built-in method lower of str object at 0x7f538d593390> = 'Mock response to: Show my clients'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 179, "message": "in test_view_clients"}], "longrepr": "tests/test_refiloe_complete.py:179: in test_view_clients\n    assert \"sarah\" in response['message'].lower()\nE   AssertionError: assert 'sarah' in 'mock response to: show my clients'\nE    +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f538d593390>()\nE    +    where <built-in method lower of str object at 0x7f538d593390> = 'Mock response to: Show my clients'.lower"}, "teardown": {"duration": 9.207100004005042e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "lineno": 181, "outcome": "failed", "keywords": ["test_set_custom_pricing", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001947629999676792, "outcome": "passed"}, "call": {"duration": 0.0009696800000256189, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 196, "message": "assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\n +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f538d6e64f0>()\n +    where <built-in method lower of str object at 0x7f538d6e64f0> = \"Mock response to: Change John's price to R500 per session\".lower\n +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f538d6e64f0>()\n +    where <built-in method lower of str object at 0x7f538d6e64f0> = \"Mock response to: Change John's price to R500 per session\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 196, "message": "in test_set_custom_pricing"}], "longrepr": "tests/test_refiloe_complete.py:196: in test_set_custom_pricing\n    assert \"updated\" in response['message'].lower() or \"set\" in response['message'].lower()\nE   assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\nE    +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f538d6e64f0>()\nE    +    where <built-in method lower of str object at 0x7f538d6e64f0> = \"Mock response to: Change John's price to R500 per session\".lower\nE    +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f538d6e64f0>()\nE    +    where <built-in method lower of str object at 0x7f538d6e64f0> = \"Mock response to: Change John's price to R500 per session\".lower"}, "teardown": {"duration": 9.517800003777666e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "lineno": 206, "outcome": "failed", "keywords": ["test_view_schedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000190955999983089, "outcome": "passed"}, "call": {"duration": 0.0007658099999616752, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 223, "message": "assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\n +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f538d6d2d90>()\n +    where <built-in method lower of str object at 0x7f538d6d2d90> = \"Mock response to: What's on today\".lower\n +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f538d6d2d90>()\n +    where <built-in method lower of str object at 0x7f538d6d2d90> = \"Mock response to: What's on today\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 223, "message": "in test_view_schedule"}], "longrepr": "tests/test_refiloe_complete.py:223: in test_view_schedule\n    assert \"schedule\" in response['message'].lower() or \"booking\" in response['message'].lower()\nE   assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\nE    +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f538d6d2d90>()\nE    +    where <built-in method lower of str object at 0x7f538d6d2d90> = \"Mock response to: What's on today\".lower\nE    +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f538d6d2d90>()\nE    +    where <built-in method lower of str object at 0x7f538d6d2d90> = \"Mock response to: What's on today\".lower"}, "teardown": {"duration": 0.00010080800001333046, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "lineno": 224, "outcome": "failed", "keywords": ["test_book_sessions", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00016833400002269627, "outcome": "passed"}, "call": {"duration": 0.0007662610000238601, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 239, "message": "AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\n +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f538d6e7980>()\n +    where <built-in method lower of str object at 0x7f538d6e7980> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\n +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f538d6e7980>()\n +    where <built-in method lower of str object at 0x7f538d6e7980> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 239, "message": "in test_book_sessions"}], "longrepr": "tests/test_refiloe_complete.py:239: in test_book_sessions\n    assert \"booked\" in response['message'].lower() or \"scheduled\" in response['message'].lower()\nE   AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\nE    +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f538d6e7980>()\nE    +    where <built-in method lower of str object at 0x7f538d6e7980> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\nE    +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f538d6e7980>()\nE    +    where <built-in method lower of str object at 0x7f538d6e7980> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "teardown": {"duration": 9.187200004134866e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "lineno": 240, "outcome": "passed", "keywords": ["test_cancel_reschedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00016797399996448803, "outcome": "passed"}, "call": {"duration": 0.0006560450000279161, "outcome": "passed"}, "teardown": {"duration": 8.211299996219168e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "lineno": 257, "outcome": "failed", "keywords": ["test_setup_habits", "TestPhase4_HabitTracking", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001630350000141334, "outcome": "passed"}, "call": {"duration": 0.0007587469999634777, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 273, "message": "AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\n +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f538d6e6560>()\n +    where <built-in method lower of str object at 0x7f538d6e6560> = 'Mock response to: Sarah needs to track steps target 10000'.lower\n +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f538d6e6560>()\n +    where <built-in method lower of str object at 0x7f538d6e6560> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 273, "message": "in test_setup_habits"}], "longrepr": "tests/test_refiloe_complete.py:273: in test_setup_habits\n    assert \"habit\" in response['message'].lower() or \"tracking\" in response['message'].lower()\nE   AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\nE    +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f538d6e6560>()\nE    +    where <built-in method lower of str object at 0x7f538d6e6560> = 'Mock response to: Sarah needs to track steps target 10000'.lower\nE    +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f538d6e6560>()\nE    +    where <built-in method lower of str object at 0x7f538d6e6560> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "teardown": {"duration": 9.03790000279514e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "lineno": 278, "outcome": "failed", "keywords": ["test_send_workouts", "TestPhase5_WorkoutsAssessments", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00017778299996962232, "outcome": "passed"}, "call": {"duration": 0.0007638460000407576, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 293, "message": "AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\n +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f538d593a50>()\n +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Send Mike a cardio program'.lower\n +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f538d593a50>()\n +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Send Mike a cardio program'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 293, "message": "in test_send_workouts"}], "longrepr": "tests/test_refiloe_complete.py:293: in test_send_workouts\n    assert \"workout\" in response['message'].lower() or \"sent\" in response['message'].lower()\nE   AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\nE    +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f538d593a50>()\nE    +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Send Mike a cardio program'.lower\nE    +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f538d593a50>()\nE    +    where <built-in method lower of str object at 0x7f538d593a50> = 'Mock response to: Send Mike a cardio program'.lower"}, "teardown": {"duration": 8.870600004229345e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "lineno": 298, "outcome": "failed", "keywords": ["test_request_payment", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00017268300001660464, "outcome": "passed"}, "call": {"duration": 0.0007696870000017952, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 313, "message": "AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\n +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f538d5b01b0>()\n +    where <built-in method lower of str object at 0x7f538d5b01b0> = 'Mock response to: Bill Mike for this month'.lower\n +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f538d5b01b0>()\n +    where <built-in method lower of str object at 0x7f538d5b01b0> = 'Mock response to: Bill Mike for this month'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 313, "message": "in test_request_payment"}], "longrepr": "tests/test_refiloe_complete.py:313: in test_request_payment\n    assert \"payment\" in response['message'].lower() or \"invoice\" in response['message'].lower()\nE   AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\nE    +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f538d5b01b0>()\nE    +    where <built-in method lower of str object at 0x7f538d5b01b0> = 'Mock response to: Bill Mike for this month'.lower\nE    +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f538d5b01b0>()\nE    +    where <built-in method lower of str object at 0x7f538d5b01b0> = 'Mock response to: Bill Mike for this month'.lower"}, "teardown": {"duration": 9.213200002022859e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "lineno": 314, "outcome": "passed", "keywords": ["test_check_revenue", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001944730000218442, "outcome": "passed"}, "call": {"duration": 0.000658750000013697, "outcome": "passed"}, "teardown": {"duration": 8.733300001040334e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "lineno": 334, "outcome": "failed", "keywords": ["test_client_booking", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00016977699999642937, "outcome": "passed"}, "call": {"duration": 0.0007472350000057304, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 349, "message": "AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\n +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f538d5b0270>()\n +    where <built-in method lower of str object at 0x7f538d5b0270> = 'Mock response to: I want to train tomorrow'.lower\n +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f538d5b0270>()\n +    where <built-in method lower of str object at 0x7f538d5b0270> = 'Mock response to: I want to train tomorrow'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 349, "message": "in test_client_booking"}], "longrepr": "tests/test_refiloe_complete.py:349: in test_client_booking\n    assert \"book\" in response['message'].lower() or \"session\" in response['message'].lower()\nE   AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\nE    +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f538d5b0270>()\nE    +    where <built-in method lower of str object at 0x7f538d5b0270> = 'Mock response to: I want to train tomorrow'.lower\nE    +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f538d5b0270>()\nE    +    where <built-in method lower of str object at 0x7f538d5b0270> = 'Mock response to: I want to train tomorrow'.lower"}, "teardown": {"duration": 9.257300001763724e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "lineno": 350, "outcome": "failed", "keywords": ["test_client_habit_logging", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001699669999766229, "outcome": "passed"}, "call": {"duration": 0.0007546290000277622, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 365, "message": "AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\n +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f538d7250c0>()\n +    where <built-in method lower of str object at 0x7f538d7250c0> = 'Mock response to: 7 yes no'.lower\n +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f538d7250c0>()\n +    where <built-in method lower of str object at 0x7f538d7250c0> = 'Mock response to: 7 yes no'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 365, "message": "in test_client_habit_logging"}], "longrepr": "tests/test_refiloe_complete.py:365: in test_client_habit_logging\n    assert \"logged\" in response['message'].lower() or \"recorded\" in response['message'].lower()\nE   AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\nE    +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f538d7250c0>()\nE    +    where <built-in method lower of str object at 0x7f538d7250c0> = 'Mock response to: 7 yes no'.lower\nE    +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f538d7250c0>()\nE    +    where <built-in method lower of str object at 0x7f538d7250c0> = 'Mock response to: 7 yes no'.lower"}, "teardown": {"duration": 9.575899997571469e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "lineno": 370, "outcome": "passed", "keywords": ["test_natural_language_understanding", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0001700379999647339, "outcome": "passed"}, "call": {"duration": 0.000668188000020109, "outcome": "passed"}, "teardown": {"duration": 8.13419999872167e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "lineno": 388, "outcome": "failed", "keywords": ["test_error_handling", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00015851599999905375, "outcome": "passed"}, "call": {"duration": 0.000688356000011936, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 403, "message": "assert False\n +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f538e8a59a0>)"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 403, "message": "in test_error_handling"}], "longrepr": "tests/test_refiloe_complete.py:403: in test_error_handling\n    assert any(word in response['message'].lower() for word in expected_words)\nE   assert False\nE    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f538e8a59a0>)"}, "teardown": {"duration": 8.971700003712613e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "lineno": 408, "outcome": "failed", "keywords": ["test_trainer_registration_step_7_currency_parsing", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00018822200001977762, "outcome": "passed"}, "call": {"duration": 0.0008823680000205059, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 437, "message": "TypeError: 'Mock' object is not subscriptable"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 437, "message": "in test_trainer_registration_step_7_currency_parsing"}], "longrepr": "tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing\n    assert result['data'].get('pricing') == expected_value\nE   TypeError: 'Mock' object is not subscriptable"}, "teardown": {"duration": 9.600900000350521e-05, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "lineno": 438, "outcome": "passed", "keywords": ["test_ai_responds_naturally_not_rigid_commands", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00017096900000979076, "outcome": "passed"}, "call": {"duration": 0.0007322169999497419, "outcome": "passed"}, "teardown": {"duration": 8.959799998820017e-05, "outcome": "passed"}}], "warnings": [{"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "\nPyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),\n(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)\nbut was not found to be installed on your system.\nIf this would cause problems for you,\nplease provide us feedback at https://github.com/pandas-dev/pandas/issues/54466\n        ", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py", "lineno": 7}]}