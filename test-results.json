{"created": 1758552943.3948073, "duration": 241.92063665390015, "exitcode": 1, "root": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant", "environment": {}, "summary": {"passed": 31, "failed": 26, "total": 57, "collected": 57}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/__init__.py", "type": "Package"}]}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "type": "Function", "lineno": 130}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "type": "Function", "lineno": 136}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "type": "Function", "lineno": 143}]}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "type": "Function", "lineno": 170}]}, {"nodeid": "tests/test_conversation_flows.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality", "type": "Class"}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration", "type": "Class"}]}, {"nodeid": "tests/test_debug.py", "outcome": "passed", "result": [{"nodeid": "tests/test_debug.py::test_python_version", "type": "Function", "lineno": 9}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "type": "Function", "lineno": 14}, {"nodeid": "tests/test_debug.py::test_project_structure", "type": "Function", "lineno": 28}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "type": "Function", "lineno": 48}, {"nodeid": "tests/test_debug.py::test_check_requirements", "type": "Function", "lineno": 84}]}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "type": "Function", "lineno": 46}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "type": "Function", "lineno": 140}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "type": "Function", "lineno": 199}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "type": "Function", "lineno": 214}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "type": "Function", "lineno": 234}]}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "type": "Function", "lineno": 324}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "type": "Function", "lineno": 341}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "type": "Function", "lineno": 366}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "type": "Function", "lineno": 385}]}, {"nodeid": "tests/test_phase1_registration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal", "type": "Class"}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "type": "Function", "lineno": 47}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "type": "Function", "lineno": 100}]}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "type": "Function", "lineno": 140}]}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "type": "Function", "lineno": 188}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "type": "Function", "lineno": 220}]}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "type": "Function", "lineno": 253}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "type": "Function", "lineno": 270}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "type": "Function", "lineno": 300}]}, {"nodeid": "tests/test_phase2_client_management.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal", "type": "Class"}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases", "type": "Class"}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "type": "Function", "lineno": 53}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "type": "Function", "lineno": 110}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "type": "Function", "lineno": 144}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "type": "Function", "lineno": 169}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "type": "Function", "lineno": 223}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "type": "Function", "lineno": 248}]}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "type": "Function", "lineno": 283}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "type": "Function", "lineno": 313}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "type": "Function", "lineno": 334}]}, {"nodeid": "tests/test_phase3_scheduling.py", "outcome": "passed", "result": [{"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal", "type": "Class"}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation", "type": "Class"}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "type": "Function", "lineno": 120}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "type": "Function", "lineno": 143}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "type": "Function", "lineno": 159}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "type": "Function", "lineno": 181}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "type": "Function", "lineno": 206}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "type": "Function", "lineno": 224}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "type": "Function", "lineno": 240}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "type": "Function", "lineno": 257}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "type": "Function", "lineno": 278}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "type": "Function", "lineno": 298}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "type": "Function", "lineno": 314}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "type": "Function", "lineno": 334}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "type": "Function", "lineno": 350}]}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "type": "Function", "lineno": 370}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "type": "Function", "lineno": 388}]}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "type": "Function", "lineno": 408}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "type": "Function", "lineno": 438}]}, {"nodeid": "tests/test_refiloe_complete.py", "outcome": "passed", "result": [{"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures", "type": "Class"}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs", "type": "Class"}]}, {"nodeid": "tests/__init__.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_flows.py", "type": "Module"}, {"nodeid": "tests/test_debug.py", "type": "Module"}, {"nodeid": "tests/test_phase1_registration.py", "type": "Module"}, {"nodeid": "tests/test_phase2_client_management.py", "type": "Module"}, {"nodeid": "tests/test_phase3_scheduling.py", "type": "Module"}, {"nodeid": "tests/test_refiloe_complete.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_imports_work", "lineno": 130, "outcome": "passed", "keywords": ["test_imports_work", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005296580000049289, "outcome": "passed"}, "call": {"duration": 0.03330090600002222, "outcome": "passed"}, "teardown": {"duration": 1.8763883220000253, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_mock_message", "lineno": 136, "outcome": "passed", "keywords": ["test_mock_message", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032764200000201527, "outcome": "passed"}, "call": {"duration": 0.022794178000026477, "outcome": "passed"}, "teardown": {"duration": 1.7901614139999538, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestBasicFunctionality::test_trainer_registration_mock", "lineno": 143, "outcome": "passed", "keywords": ["test_trainer_registration_mock", "TestBasicFunctionality", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032170099996164936, "outcome": "passed"}, "call": {"duration": 0.022039690999918093, "outcome": "passed"}, "teardown": {"duration": 2.0397198079999725, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_basic_setup", "lineno": 165, "outcome": "passed", "keywords": ["test_basic_setup", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022797984000021643, "outcome": "passed"}, "call": {"duration": 0.00010412500000711589, "outcome": "passed"}, "teardown": {"duration": 1.741293642999949, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_flows.py::TestPhase1_Registration::test_mock_registration_flow", "lineno": 170, "outcome": "passed", "keywords": ["test_mock_registration_flow", "TestPhase1_Registration", "test_conversation_flows.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02217862299994522, "outcome": "passed"}, "call": {"duration": 0.00019424300000991934, "outcome": "passed"}, "teardown": {"duration": 1.7450057019999576, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_python_version", "lineno": 9, "outcome": "passed", "keywords": ["test_python_version", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00028555299991239735, "outcome": "passed"}, "call": {"duration": 0.00010548699992796173, "outcome": "passed"}, "teardown": {"duration": 1.1063838430000033, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_basic_modules", "lineno": 14, "outcome": "passed", "keywords": ["test_can_import_basic_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003025549999620125, "outcome": "passed"}, "call": {"duration": 0.00010814200004460872, "outcome": "passed"}, "teardown": {"duration": 2.040558573999988, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_project_structure", "lineno": 28, "outcome": "passed", "keywords": ["test_project_structure", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002811960000599356, "outcome": "passed"}, "call": {"duration": 0.00022173400009251054, "outcome": "passed"}, "teardown": {"duration": 1.7056321979999893, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_can_import_refiloe_modules", "lineno": 48, "outcome": "passed", "keywords": ["test_can_import_refiloe_modules", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00029753599994819524, "outcome": "passed"}, "call": {"duration": 0.0004274589999795353, "outcome": "passed"}, "teardown": {"duration": 2.102200258000039, "outcome": "passed"}}, {"nodeid": "tests/test_debug.py::test_check_requirements", "lineno": 84, "outcome": "passed", "keywords": ["test_check_requirements", "test_debug.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002682909999975891, "outcome": "passed"}, "call": {"duration": 0.07489692599995124, "outcome": "passed"}, "teardown": {"duration": 1.3986534319999464, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_complete_trainer_registration_flow", "lineno": 46, "outcome": "failed", "keywords": ["test_complete_trainer_registration_flow", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0016517029999931765, "outcome": "passed"}, "call": {"duration": 0.002131287999986853, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 107, "message": "assert False == True"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 107, "message": "in test_complete_trainer_registration_flow"}], "log": [{"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552719.6722364, "msecs": 672.0, "relativeCreated": 18614.396333694458, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552719.672497, "msecs": 672.0, "relativeCreated": 18614.656925201416, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552719.6727087, "msecs": 672.0, "relativeCreated": 18614.86864089966, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552719.6730373, "msecs": 673.0, "relativeCreated": 18615.19718170166, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552719.673231, "msecs": 673.0, "relativeCreated": 18615.39077758789, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase1_registration.py:107: in test_complete_trainer_registration_flow\n    assert result['success'] == True\nE   assert False == True"}, "teardown": {"duration": 1.5108007789999647, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_currency_parsing_variations", "lineno": 140, "outcome": "passed", "keywords": ["test_currency_parsing_variations", "critical", "pytestmark", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001589447000014843, "outcome": "passed"}, "call": {"duration": 0.012140147999957662, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2476785, "msecs": 247.0, "relativeCreated": 20189.838409423828, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2487936, "msecs": 248.0, "relativeCreated": 20190.953493118286, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.249318, "msecs": 249.0, "relativeCreated": 20191.47777557373, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2498357, "msecs": 249.0, "relativeCreated": 20191.99562072754, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2503037, "msecs": 250.0, "relativeCreated": 20192.463636398315, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2507875, "msecs": 250.0, "relativeCreated": 20192.947387695312, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.251396, "msecs": 251.0, "relativeCreated": 20193.55583190918, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.251874, "msecs": 251.0, "relativeCreated": 20194.03386116028, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2523258, "msecs": 252.0, "relativeCreated": 20194.485664367676, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.25279, "msecs": 252.0, "relativeCreated": 20194.949865341187, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.253234, "msecs": 253.0, "relativeCreated": 20195.393800735474, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2536986, "msecs": 253.0, "relativeCreated": 20195.858478546143, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2541518, "msecs": 254.0, "relativeCreated": 20196.311712265015, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2547517, "msecs": 254.0, "relativeCreated": 20196.911573410034, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.255201, "msecs": 255.0, "relativeCreated": 20197.36099243164, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2556672, "msecs": 255.0, "relativeCreated": 20197.827100753784, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552721.2561433, "msecs": 256.0, "relativeCreated": 20198.30322265625, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 1.6876165039999478, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_with_missing_fields", "lineno": 199, "outcome": "passed", "keywords": ["test_registration_with_missing_fields", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.003761329999974805, "outcome": "passed"}, "call": {"duration": 0.0008440450000080091, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552722.9491332, "msecs": 949.0, "relativeCreated": 21891.293048858643, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 1.0794768789999125, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_trainer_recognition_after_registration", "lineno": 214, "outcome": "failed", "keywords": ["test_trainer_recognition_after_registration", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.003653749000022799, "outcome": "passed"}, "call": {"duration": 4.061794680000048, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 231, "message": "AssertionError: Should recognize and greet trainer by name\nassert ('john' in '' or 'welcome back' in '')\n +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3b7cc940>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3b7cc940> = {'response': \"Hello there!\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3b7cc940>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3b7cc940> = {'response': \"Hello there!\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 231, "message": "in test_trainer_recognition_after_registration"}], "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552724.6915412, "msecs": 691.0, "relativeCreated": 23633.70108604431, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Background scheduler started", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552724.7185328, "msecs": 718.0, "relativeCreated": 23660.69269180298, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Routes setup complete", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552724.7194586, "msecs": 719.0, "relativeCreated": 23661.61847114563, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552724.724912, "msecs": 724.0, "relativeCreated": 23667.07181930542, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552724.7255733, "msecs": 725.0, "relativeCreated": 23667.733192443848, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: greeting with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552727.9966989, "msecs": 996.0, "relativeCreated": 26938.8587474823, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AzjQz0strdJVRMBJBnaiQKr\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552728.0932744, "msecs": 93.0, "relativeCreated": 27035.434246063232, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Created new conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552728.0941072, "msecs": 94.0, "relativeCreated": 27036.267042160034, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase1_registration.py:231: in test_trainer_recognition_after_registration\n    assert 'john' in response.get('message', '').lower() or \\\nE   AssertionError: Should recognize and greet trainer by name\nE   assert ('john' in '' or 'welcome back' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3b7cc940>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3b7cc940> = {'response': \"Hello there!\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3b7cc940>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3b7cc940> = {'response': \"Hello there!\\n\\nLet's get you started on your fitness journey! \ud83d\ude80\\n\\nHow can I help you today?\", 'success': True}.get"}, "teardown": {"duration": 1.1424939769999582, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestTrainerRegistrationReal::test_registration_saves_all_fields_correctly", "lineno": 234, "outcome": "passed", "keywords": ["test_registration_saves_all_fields_correctly", "TestTrainerRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.001642564000007951, "outcome": "passed"}, "call": {"duration": 0.0031159440000010363, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Trainer registered: John Smith (trainer-123)", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552729.2472086, "msecs": 247.0, "relativeCreated": 28189.36848640442, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8500146590000668, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestClientRegistrationReal::test_client_receives_welcome_after_registration", "lineno": 288, "outcome": "failed", "keywords": ["test_client_receives_welcome_after_registration", "TestClientRegistrationReal", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00130955300005553, "outcome": "passed"}, "call": {"duration": 4.47445020400005, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 297, "message": "assert ('added' in '' or 'registered' in '')\n +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3b859840>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3b859840> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3b859840>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3b859840> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 297, "message": "in test_client_receives_welcome_after_registration"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552730.1032994, "msecs": 103.0, "relativeCreated": 29045.459270477295, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552730.1041784, "msecs": 104.0, "relativeCreated": 29046.338319778442, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552734.3786802, "msecs": 378.0, "relativeCreated": 33320.84012031555, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ABrGf6meRL56zyPP0Oxz6Vp\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552734.573535, "msecs": 573.0, "relativeCreated": 33515.69485664368, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase1_registration.py:297: in test_client_receives_welcome_after_registration\n    assert 'added' in response.get('message', '').lower() or \\\nE   assert ('added' in '' or 'registered' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3b859840>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3b859840> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3b859840>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3b859840> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.8262207069999477, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_duplicate_registration_attempt", "lineno": 324, "outcome": "failed", "keywords": ["test_duplicate_registration_attempt", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0006080739999561047, "outcome": "passed"}, "call": {"duration": 0.0040042440000434, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 339, "message": "assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\n +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x557afc3760a0>()\n +    where <built-in method lower of str object at 0x557afc3760a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\n +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x557afc3760a0>()\n +    where <built-in method lower of str object at 0x557afc3760a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 339, "message": "in test_duplicate_registration_attempt"}], "log": [{"name": "refiloe", "msg": "Error checking existing registration: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552735.4079788, "msecs": 407.0, "relativeCreated": 34350.138664245605, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting session from database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552735.4107459, "msecs": 410.0, "relativeCreated": 34352.90575027466, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase1_registration.py:339: in test_duplicate_registration_attempt\n    assert 'already' in response.lower() or \\\nE   assert ('already' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" or 'welcome back' in \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\")\nE    +  where \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x557afc3760a0>()\nE    +    where <built-in method lower of str object at 0x557afc3760a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower\nE    +  and   \"\ud83c\udf89 i'm so excited to help you grow your personal training business! let's get you set up in just a few quick steps. don't worry, this set up is free\\n\\n\ud83d\udcdd *step 1 of 7*\\n\\nfirst things first - what's your name and surname? \ud83d\ude0a\" = <built-in method lower of str object at 0x557afc3760a0>()\nE    +    where <built-in method lower of str object at 0x557afc3760a0> = \"\ud83c\udf89 I'm so excited to help you grow your personal training business! Let's get you set up in just a few quick steps. Don't worry, this set up is free\\n\\n\ud83d\udcdd *Step 1 of 7*\\n\\nFirst things first - what's your name and surname? \ud83d\ude0a\".lower"}, "teardown": {"duration": 1.753172941999992, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_invalid_email_format", "lineno": 341, "outcome": "passed", "keywords": ["test_invalid_email_format", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005063950000021578, "outcome": "passed"}, "call": {"duration": 0.0002712360000032277, "outcome": "passed"}, "teardown": {"duration": 1.0699321659999441, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_extremely_long_input", "lineno": 366, "outcome": "failed", "keywords": ["test_extremely_long_input", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005175049999479597, "outcome": "passed"}, "call": {"duration": 0.0012315980000039417, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase1_registration.py", "lineno": 382, "message": "AssertionError: assert 500 <= 255\n +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "traceback": [{"path": "tests/test_phase1_registration.py", "lineno": 382, "message": "in test_extremely_long_input"}], "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552738.2427626, "msecs": 242.0, "relativeCreated": 37184.92245674133, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase1_registration.py:382: in test_extremely_long_input\n    assert len(result['data']['name']) <= 255  # Reasonable limit\nE   AssertionError: assert 500 <= 255\nE    +  where 500 = len('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')"}, "teardown": {"duration": 1.3898360959999536, "outcome": "passed"}}, {"nodeid": "tests/test_phase1_registration.py::TestRegistrationEdgeCases::test_special_characters_in_name", "lineno": 385, "outcome": "passed", "keywords": ["test_special_characters_in_name", "TestRegistrationEdgeCases", "test_phase1_registration.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005082380000658304, "outcome": "passed"}, "call": {"duration": 0.0038315209999382205, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.6395586, "msecs": 639.0, "relativeCreated": 38581.71844482422, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.639785, "msecs": 639.0, "relativeCreated": 38581.944942474365, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.6417348, "msecs": 641.0, "relativeCreated": 38583.89472961426, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.6419125, "msecs": 641.0, "relativeCreated": 38584.07235145569, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.6420703, "msecs": 642.0, "relativeCreated": 38584.230184555054, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error saving session to database for 27731863036: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552739.642221, "msecs": 642.0, "relativeCreated": 38584.380865097046, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 1.4174560100000235, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_command_variations", "lineno": 47, "outcome": "passed", "keywords": ["test_add_client_command_variations", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023471681000046374, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552741.0836577, "msecs": 83.0, "relativeCreated": 40025.81763267517, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 36.66341447299999, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552741.0846097, "msecs": 84.0, "relativeCreated": 40026.76963806152, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552741.085266, "msecs": 85.0, "relativeCreated": 40027.42600440979, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552744.1622565, "msecs": 162.0, "relativeCreated": 43104.416370391846, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A1rh77xn-5oY51w8ofyXr0S\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552744.2542815, "msecs": 254.0, "relativeCreated": 43196.441411972046, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552744.25522, "msecs": 255.0, "relativeCreated": 43197.37982749939, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552744.2553978, "msecs": 255.0, "relativeCreated": 43197.5576877594, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552748.151693, "msecs": 151.0, "relativeCreated": 47093.85299682617, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AZo56i1jgeCZEe7QA3A25Lm\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552748.2458172, "msecs": 245.0, "relativeCreated": 47187.97707557678, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552748.2468274, "msecs": 246.0, "relativeCreated": 47188.987255096436, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552748.247008, "msecs": 247.0, "relativeCreated": 47189.167976379395, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552751.4334888, "msecs": 433.0, "relativeCreated": 50375.648736953735, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AS3-DlaeARiGItFZEN_ffeh\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552751.5277414, "msecs": 527.0, "relativeCreated": 50469.90132331848, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552751.5288224, "msecs": 528.0, "relativeCreated": 50470.98231315613, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552751.5289943, "msecs": 528.0, "relativeCreated": 50471.15421295166, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552754.6533039, "msecs": 653.0, "relativeCreated": 53595.46375274658, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AKxO2zlSZm84oFOPI1UHkJI\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552754.7502112, "msecs": 750.0, "relativeCreated": 53692.371129989624, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552754.7855778, "msecs": 785.0, "relativeCreated": 53727.73766517639, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552754.7858431, "msecs": 785.0, "relativeCreated": 53728.00302505493, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552759.1674585, "msecs": 167.0, "relativeCreated": 58109.61842536926, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ArWZ6NZyL7LBJyPlzlgrUAG\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552759.317178, "msecs": 317.0, "relativeCreated": 58259.33790206909, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552759.3184235, "msecs": 318.0, "relativeCreated": 58260.58340072632, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552759.3186388, "msecs": 318.0, "relativeCreated": 58260.79869270325, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552763.6400533, "msecs": 640.0, "relativeCreated": 62582.213163375854, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AnjUx_5Wyu3bF5ygzl1CyGS\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552763.7319138, "msecs": 731.0, "relativeCreated": 62674.073696136475, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552763.7330759, "msecs": 733.0, "relativeCreated": 62675.235748291016, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552763.733318, "msecs": 733.0, "relativeCreated": 62675.47798156738, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552767.0716588, "msecs": 71.0, "relativeCreated": 66013.81874084473, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A5A6b_JT1prLRdN7X3qWmkH\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552767.1656327, "msecs": 165.0, "relativeCreated": 66107.7926158905, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552767.1667633, "msecs": 166.0, "relativeCreated": 66108.9231967926, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552767.16695, "msecs": 166.0, "relativeCreated": 66109.10987854004, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_client with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552771.0221465, "msecs": 22.0, "relativeCreated": 69964.3063545227, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ah3lZ0OPoOr3aEtqCm8HuO-\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552771.115544, "msecs": 115.0, "relativeCreated": 70057.7039718628, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552771.1167457, "msecs": 116.0, "relativeCreated": 70058.90560150146, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552771.1169183, "msecs": 116.0, "relativeCreated": 70059.07821655273, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552774.3971863, "msecs": 397.0, "relativeCreated": 73339.34617042542, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AleDSK5mD7ugU1r_UedFrpl\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552774.488578, "msecs": 488.0, "relativeCreated": 73430.73797225952, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552774.4896173, "msecs": 489.0, "relativeCreated": 73431.77723884583, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552774.4898825, "msecs": 489.0, "relativeCreated": 73432.04236030579, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552777.6520686, "msecs": 652.0, "relativeCreated": 76594.22850608826, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AX8CpVMHwtHdutWoJPGcSjH\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552777.746214, "msecs": 746.0, "relativeCreated": 76688.3738040924, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8683610260000023, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_phone_number_normalization", "lineno": 75, "outcome": "failed", "keywords": ["test_phone_number_normalization", "critical", "pytestmark", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022822515000029853, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552778.6390004, "msecs": 639.0, "relativeCreated": 77581.16030693054, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 0.0027891279999039398, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 98, "message": "AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nassert '+27821234567' == '27821234567'\n  - 27821234567\n  + +27821234567\n  ? +"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 98, "message": "in test_phone_number_normalization"}], "longrepr": "tests/test_phase2_client_management.py:98: in test_phone_number_normalization\n    assert normalized == expected_phone, \\\nE   AssertionError: Expected 27821234567 but got +27821234567 for 0821234567\nE   assert '+27821234567' == '27821234567'\nE     - 27821234567\nE     + +27821234567\nE     ? +"}, "teardown": {"duration": 1.1336217470000065, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestAddClientReal::test_add_client_with_special_names", "lineno": 100, "outcome": "passed", "keywords": ["test_add_client_with_special_names", "TestAddClientReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022557752000011533, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552779.8034728, "msecs": 803.0, "relativeCreated": 78745.63264846802, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 25.51255082099999, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552779.8068414, "msecs": 806.0, "relativeCreated": 78749.00126457214, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552779.8074355, "msecs": 807.0, "relativeCreated": 78749.59540367126, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552782.6607301, "msecs": 660.0, "relativeCreated": 81602.89001464844, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A9LN6enDZi881HBFTaw0kvW\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552782.7542808, "msecs": 754.0, "relativeCreated": 81696.44069671631, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552782.755205, "msecs": 755.0, "relativeCreated": 81697.3648071289, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552782.7554514, "msecs": 755.0, "relativeCreated": 81697.6113319397, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552785.8651977, "msecs": 865.0, "relativeCreated": 84807.35754966736, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A5jKNrcRHmvTM8ABx3EAI5W\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552785.9587033, "msecs": 958.0, "relativeCreated": 84900.86317062378, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552785.9596376, "msecs": 959.0, "relativeCreated": 84901.79753303528, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552785.9598203, "msecs": 959.0, "relativeCreated": 84901.98016166687, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552789.1757789, "msecs": 175.0, "relativeCreated": 88117.93875694275, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"APipOw616oOCwIxl9b8xWNn\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552789.2747984, "msecs": 274.0, "relativeCreated": 88216.95828437805, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552789.2758658, "msecs": 275.0, "relativeCreated": 88218.02568435669, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552789.2760456, "msecs": 276.0, "relativeCreated": 88218.20545196533, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552792.2569377, "msecs": 256.0, "relativeCreated": 91199.09763336182, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AVeGOhKSxSu9uIVauLPaMV8\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552792.3500512, "msecs": 350.0, "relativeCreated": 91292.21105575562, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552792.3512034, "msecs": 351.0, "relativeCreated": 91293.36333274841, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552792.3513823, "msecs": 351.0, "relativeCreated": 91293.54214668274, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552797.0437434, "msecs": 43.0, "relativeCreated": 95985.90326309204, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ARuX9D1-blV3KXfkg8N3l-2\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552797.1822379, "msecs": 182.0, "relativeCreated": 96124.39775466919, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552797.1833827, "msecs": 183.0, "relativeCreated": 96125.54264068604, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552797.1835585, "msecs": 183.0, "relativeCreated": 96125.71835517883, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552801.2420964, "msecs": 242.0, "relativeCreated": 100184.25631523132, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A8hKsZ417dGptUhnPTQHs1E\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552801.3346949, "msecs": 334.0, "relativeCreated": 100276.85475349426, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552801.336063, "msecs": 336.0, "relativeCreated": 100278.22279930115, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552801.3362424, "msecs": 336.0, "relativeCreated": 100278.40232849121, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552805.2215548, "msecs": 221.0, "relativeCreated": 104163.71464729309, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AJs_ZDfW1zqd9Vaq41zw92X\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552805.3152432, "msecs": 315.0, "relativeCreated": 104257.40313529968, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.906809118999945, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestViewClientsReal::test_view_clients_commands", "lineno": 140, "outcome": "failed", "keywords": ["test_view_clients_commands", "TestViewClientsReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0010256850000587292, "outcome": "passed"}, "call": {"duration": 4.748638950999975, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 160, "message": "AssertionError: Failed to list clients with command: Show my clients\nassert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 160, "message": "in test_view_clients_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552806.2257528, "msecs": 225.0, "relativeCreated": 105167.91272163391, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552806.2263691, "msecs": 226.0, "relativeCreated": 105168.52903366089, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552810.8780248, "msecs": 878.0, "relativeCreated": 109820.1847076416, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AtGvXxUBs825JzfwhRRzeYL\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552810.9712262, "msecs": 971.0, "relativeCreated": 109913.38610649109, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552810.9731336, "msecs": 973.0, "relativeCreated": 109915.2934551239, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase2_client_management.py:160: in test_view_clients_commands\n    assert 'sarah' in message or 'john' in message or 'mike' in message or \\\nE   AssertionError: Failed to list clients with command: Show my clients\nE   assert ('sarah' in '' or 'john' in '' or 'mike' in '' or 'client' in '')"}, "teardown": {"duration": 0.8033813319999581, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_set_custom_pricing_variations", "lineno": 188, "outcome": "passed", "keywords": ["test_set_custom_pricing_variations", "critical", "pytestmark", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013920390000521365, "outcome": "passed"}, "call": {"duration": 32.636665730999994, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552811.7840402, "msecs": 784.0, "relativeCreated": 110726.20010375977, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552811.7868676, "msecs": 786.0, "relativeCreated": 110729.02750968933, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552817.0661533, "msecs": 66.0, "relativeCreated": 116008.31317901611, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AiPjW3gpQsXHmaYUW6Vf0Gs\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552817.1599033, "msecs": 159.0, "relativeCreated": 116102.06317901611, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552817.1610677, "msecs": 161.0, "relativeCreated": 116103.22761535645, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552817.1613154, "msecs": 161.0, "relativeCreated": 116103.47533226013, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552821.1431072, "msecs": 143.0, "relativeCreated": 120085.26706695557, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A4O3uF03hUHZX81YOhq569a\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552821.2376916, "msecs": 237.0, "relativeCreated": 120179.85153198242, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552821.2387333, "msecs": 238.0, "relativeCreated": 120180.89318275452, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552821.238913, "msecs": 238.0, "relativeCreated": 120181.07295036316, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552824.8851018, "msecs": 885.0, "relativeCreated": 123827.26168632507, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AtWb1PIEilSmzCHPt-NFX8q\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552824.9788055, "msecs": 978.0, "relativeCreated": 123920.96543312073, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552824.979936, "msecs": 979.0, "relativeCreated": 123922.09577560425, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552824.980136, "msecs": 980.0, "relativeCreated": 123922.29580879211, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552829.4590237, "msecs": 459.0, "relativeCreated": 128401.18360519409, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A2OU5MjcA-GiUNhzdGHDx1_\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552829.553482, "msecs": 553.0, "relativeCreated": 128495.6419467926, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552829.5547955, "msecs": 554.0, "relativeCreated": 128496.95539474487, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552829.5549738, "msecs": 554.0, "relativeCreated": 128497.13373184204, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552833.286571, "msecs": 286.0, "relativeCreated": 132228.73091697693, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ArxplYn-vqpQ5jC6XETyvxw\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552833.3787417, "msecs": 378.0, "relativeCreated": 132320.90163230896, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552833.3800437, "msecs": 380.0, "relativeCreated": 132322.20363616943, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552833.38055, "msecs": 380.0, "relativeCreated": 132322.70979881287, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552837.5346177, "msecs": 534.0, "relativeCreated": 136476.77755355835, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AIjAChy6Qyy_J07LuBtfjtx\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552837.6277165, "msecs": 627.0, "relativeCreated": 136569.87643241882, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552837.6288385, "msecs": 628.0, "relativeCreated": 136570.99843025208, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552837.6292, "msecs": 629.0, "relativeCreated": 136571.359872818, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552840.3676817, "msecs": 367.0, "relativeCreated": 139309.84163284302, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AiMoka3KpuhboMLUFZMAgQK\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552840.460977, "msecs": 460.0, "relativeCreated": 139403.13696861267, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552840.4622316, "msecs": 462.0, "relativeCreated": 139404.3915271759, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552840.462521, "msecs": 462.0, "relativeCreated": 139404.68096733093, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_update with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552844.3269143, "msecs": 326.0, "relativeCreated": 143269.07420158386, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AfRchjp1YEz2za36PFQTGGd\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552844.4188864, "msecs": 418.0, "relativeCreated": 143361.0463142395, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.897567413000047, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestCustomPricingReal::test_check_client_pricing", "lineno": 220, "outcome": "failed", "keywords": ["test_check_client_pricing", "TestCustomPricingReal", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0013970779999681326, "outcome": "passed"}, "call": {"duration": 6.4329402319999645, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 239, "message": "AssertionError: Failed to show pricing with: What is Sarah's rate?\nassert ('r' in '' or 'rand' in '' or False)\n +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f6f4a533060>)"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 239, "message": "in test_check_client_pricing"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552845.3227372, "msecs": 322.0, "relativeCreated": 144264.897108078, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552845.3233757, "msecs": 323.0, "relativeCreated": 144265.53559303284, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552851.6589358, "msecs": 658.0, "relativeCreated": 150601.09567642212, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AczV6GH1WN-21Huv5H_inZy\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552851.7515435, "msecs": 751.0, "relativeCreated": 150693.70341300964, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase2_client_management.py:239: in test_check_client_pricing\n    assert 'r' in message or 'rand' in message or \\\nE   AssertionError: Failed to show pricing with: What is Sarah's rate?\nE   assert ('r' in '' or 'rand' in '' or False)\nE    +  where False = any(<generator object TestCustomPricingReal.test_check_client_pricing.<locals>.<genexpr> at 0x7f6f4a533060>)"}, "teardown": {"duration": 1.176487232999989, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_add_client_with_duplicate_phone", "lineno": 253, "outcome": "failed", "keywords": ["test_add_client_with_duplicate_phone", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005149610000216853, "outcome": "passed"}, "call": {"duration": 3.182157212999982, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 268, "message": "assert ('already' in '' or 'exists' in '')\n +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3a618bc0>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3a618bc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3a618bc0>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3a618bc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 268, "message": "in test_add_client_with_duplicate_phone"}], "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552852.9359827, "msecs": 935.0, "relativeCreated": 151878.14259529114, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552852.9389627, "msecs": 938.0, "relativeCreated": 151881.12258911133, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: registration_trainer with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552856.0224874, "msecs": 22.0, "relativeCreated": 154964.64729309082, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AcRhJY9U8ofIFnaaKug-B-6\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552856.1156728, "msecs": 115.0, "relativeCreated": 155057.8327178955, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase2_client_management.py:268: in test_add_client_with_duplicate_phone\n    assert 'already' in response.get('message', '').lower() or \\\nE   assert ('already' in '' or 'exists' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3a618bc0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3a618bc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3a618bc0>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3a618bc0> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 0.8934194409999918, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_invalid_phone_numbers", "lineno": 270, "outcome": "passed", "keywords": ["test_invalid_phone_numbers", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000516202999961024, "outcome": "passed"}, "call": {"duration": 0.00011537499995029066, "outcome": "passed"}, "teardown": {"duration": 0.8482601079999768, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_set_negative_pricing", "lineno": 286, "outcome": "passed", "keywords": ["test_set_negative_pricing", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005055640000364292, "outcome": "passed"}, "call": {"duration": 0.00010559700001522287, "outcome": "passed"}, "teardown": {"duration": 0.8569608560000006, "outcome": "passed"}}, {"nodeid": "tests/test_phase2_client_management.py::TestClientManagementEdgeCases::test_client_not_found", "lineno": 300, "outcome": "failed", "keywords": ["test_client_not_found", "TestClientManagementEdgeCases", "test_phase2_client_management.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.000452324999969278, "outcome": "passed"}, "call": {"duration": 4.883569512999998, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase2_client_management.py", "lineno": 311, "message": "assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\n +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\n +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\n +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\n +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\n +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "traceback": [{"path": "tests/test_phase2_client_management.py", "lineno": 311, "message": "in test_client_not_found"}], "log": [{"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552858.7276206, "msecs": 727.0, "relativeCreated": 157669.7804927826, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error creating conversation state: 'Mock' object is not subscriptable", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552858.7282212, "msecs": 728.0, "relativeCreated": 157670.38106918335, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: pricing_inquiry with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552863.4616256, "msecs": 461.0, "relativeCreated": 162403.78546714783, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"As-dGkH7-XfPvPfD_UcyFXv\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552863.6061852, "msecs": 606.0, "relativeCreated": 162548.34508895874, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase2_client_management.py:311: in test_client_not_found\n    assert 'not found' in response.get('message', '').lower() or \\\nE   assert ('not found' in '' or \"doesn't exist\" in '' or 'no client' in '')\nE    +  where '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get\nE    +  and   '' = <built-in method lower of str object at 0x7f6f4e33fba0>()\nE    +    where <built-in method lower of str object at 0x7f6f4e33fba0> = ''.lower\nE    +      where '' = <built-in method get of dict object at 0x7f6f3a5d1140>('message', '')\nE    +        where <built-in method get of dict object at 0x7f6f3a5d1140> = {'response': \"My apologies, I'm having trouble understanding this request. I'll let Support know about this. In the meantime, are you looking to manage clients, check your schedule, or something else?\", 'success': True}.get"}, "teardown": {"duration": 1.2215892650000342, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestViewScheduleReal::test_view_schedule_commands", "lineno": 53, "outcome": "failed", "keywords": ["test_view_schedule_commands", "TestViewScheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0021228629999541226, "outcome": "passed"}, "call": {"duration": 3.9967952429999514, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 74, "message": "AssertionError: Failed to show schedule with: Show my schedule\nassert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 74, "message": "in test_view_schedule_commands"}], "log": [{"name": "refiloe", "msg": "Error getting user context: Mock.keys() returned a non-iterable (type Mock)", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552864.8377068, "msecs": 837.0, "relativeCreated": 163779.86669540405, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552864.8412178, "msecs": 841.0, "relativeCreated": 163783.3776473999, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552868.7250433, "msecs": 725.0, "relativeCreated": 167667.2031879425, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AqBN574Bw_o_mabQ6V7Y5JG\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552868.830863, "msecs": 830.0, "relativeCreated": 167773.02289009094, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552868.8326006, "msecs": 832.0, "relativeCreated": 167774.76048469543, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}], "longrepr": "tests/test_phase3_scheduling.py:74: in test_view_schedule_commands\n    assert 'schedule' in message or 'booking' in message or \\\nE   AssertionError: Failed to show schedule with: Show my schedule\nE   assert ('schedule' in '' or 'booking' in '' or 'session' in '' or 'appointment' in '' or 'no bookings' in '' or 'free' in '')"}, "teardown": {"duration": 1.5055144609999616, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_book_session_natural_language", "lineno": 110, "outcome": "passed", "keywords": ["test_book_session_natural_language", "critical", "pytestmark", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.02356918999998925, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552870.3666408, "msecs": 366.0, "relativeCreated": 169308.80069732666, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 1.2377776839999797, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZweWZynRtZX5kuYaJ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZweWZynRtZX5kuYaJ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552870.5037208, "msecs": 503.0, "relativeCreated": 169445.880651474, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZx92m2RW2v2EcdAbZ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZx92m2RW2v2EcdAbZ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552870.6189113, "msecs": 618.0, "relativeCreated": 169561.07115745544, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZxc4Pog4GUmSUHhR4'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZxc4Pog4GUmSUHhR4'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552870.7371764, "msecs": 737.0, "relativeCreated": 169679.33630943298, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZy7pRkaVxYqUdZiLx'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZy7pRkaVxYqUdZiLx'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552870.8424125, "msecs": 842.0, "relativeCreated": 169784.57236289978, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZyZ7AYYcco9gukhUP'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZyZ7AYYcco9gukhUP'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552870.9543273, "msecs": 954.0, "relativeCreated": 169896.48723602295, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZz2tJ4hVKf7HFn5my'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZz2tJ4hVKf7HFn5my'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.0514138, "msecs": 51.0, "relativeCreated": 169993.5736656189, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZzWuDYacbrR9a9fjQ'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPdZzWuDYacbrR9a9fjQ'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.1893709, "msecs": 189.0, "relativeCreated": 170131.53076171875, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda13f3hv7ZcZkUYUbr'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda13f3hv7ZcZkUYUbr'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.28945, "msecs": 289.0, "relativeCreated": 170231.60982131958, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda1UhdgB6zqJKod3tc'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda1UhdgB6zqJKod3tc'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.4018078, "msecs": 401.0, "relativeCreated": 170343.96767616272, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda1wj9RvTusZkPYjeq'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda1wj9RvTusZkPYjeq'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.5041692, "msecs": 504.0, "relativeCreated": 170446.3291168213, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI intent understanding failed: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda2PmYJgUaqVwDu2Kz'}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/ai_intent_handler.py\", line 64, in understand_message\n    response = self.client.messages.create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_utils/_utils.py\", line 275, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/resources/messages.py\", line 888, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1277, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 954, in request\n    return self._request(\n           ^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/anthropic/_base_client.py\", line 1058, in _request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.AuthenticationError: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CTPda2PmYJgUaqVwDu2Kz'}", "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552871.6040945, "msecs": 604.0, "relativeCreated": 170546.2543964386, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8723238139999694, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_time_formats", "lineno": 144, "outcome": "failed", "keywords": ["test_booking_time_formats", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.022766934000060246, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552872.500435, "msecs": 500.0, "relativeCreated": 171442.5950050354, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 0.0010116790000438414, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_phase3_scheduling.py", "lineno": 168, "message": "AssertionError: Failed to validate time: 9am\nassert False == True"}, "traceback": [{"path": "tests/test_phase3_scheduling.py", "lineno": 168, "message": "in test_booking_time_formats"}], "longrepr": "tests/test_phase3_scheduling.py:168: in test_booking_time_formats\n    assert is_valid == True, f\"Failed to validate time: {time_format}\"\nE   AssertionError: Failed to validate time: 9am\nE   assert False == True"}, "teardown": {"duration": 1.1000543569999763, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookSessionsReal::test_booking_date_parsing", "lineno": 169, "outcome": "passed", "keywords": ["test_booking_date_parsing", "TestBookSessionsReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.023743347000049653, "outcome": "passed", "log": [{"name": "refiloe", "msg": "AI Intent Handler initialized with Claude", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552873.6298637, "msecs": 629.0, "relativeCreated": 172572.0236301422, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "call": {"duration": 0.00043567299996993825, "outcome": "passed"}, "teardown": {"duration": 0.8750146449999647, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_cancel_booking_variations", "lineno": 223, "outcome": "passed", "keywords": ["test_cancel_booking_variations", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011462499999197462, "outcome": "passed"}, "call": {"duration": 28.16408590100002, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552874.507961, "msecs": 507.0, "relativeCreated": 173450.12092590332, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552874.5087469, "msecs": 508.0, "relativeCreated": 173450.90675354004, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552878.2620504, "msecs": 262.0, "relativeCreated": 177204.21028137207, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AF6_CPS-86U5shKQPGkMYF0\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552878.3554258, "msecs": 355.0, "relativeCreated": 177297.5857257843, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552878.356316, "msecs": 356.0, "relativeCreated": 177298.47598075867, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552878.356493, "msecs": 356.0, "relativeCreated": 177298.65288734436, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552881.129745, "msecs": 129.0, "relativeCreated": 180071.90489768982, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Asbzr3Qe-qxqphWt3ir_zkj\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552881.2234788, "msecs": 223.0, "relativeCreated": 180165.63868522644, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552881.2245476, "msecs": 224.0, "relativeCreated": 180166.70751571655, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552881.2247798, "msecs": 224.0, "relativeCreated": 180166.9397354126, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: schedule_modification with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552884.4286113, "msecs": 428.0, "relativeCreated": 183370.77116966248, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AUbD9mTD6T3dD7e3jUTLGtm\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552884.5219696, "msecs": 521.0, "relativeCreated": 183464.129447937, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552884.5229676, "msecs": 522.0, "relativeCreated": 183465.12746810913, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552884.5231564, "msecs": 523.0, "relativeCreated": 183465.31629562378, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: booking_cancellation with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552887.788618, "msecs": 788.0, "relativeCreated": 186730.7779788971, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AGRTmcebZIBH2PtCDZf_7ld\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552887.8827689, "msecs": 882.0, "relativeCreated": 186824.92876052856, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552887.884002, "msecs": 884.0, "relativeCreated": 186826.16186141968, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552887.8841887, "msecs": 884.0, "relativeCreated": 186826.3485431671, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552890.8690224, "msecs": 869.0, "relativeCreated": 189811.1822605133, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AMw4ur_6ABWWgwkXEoZ5xlZ\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552890.9633517, "msecs": 963.0, "relativeCreated": 189905.51161766052, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552890.9699225, "msecs": 969.0, "relativeCreated": 189912.08243370056, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552890.9716384, "msecs": 971.0, "relativeCreated": 189913.79833221436, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552895.0614116, "msecs": 61.0, "relativeCreated": 194003.57151031494, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"ADI1Q-KKZgAgp9phCn80f0z\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552895.156315, "msecs": 156.0, "relativeCreated": 194098.47497940063, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552895.1576765, "msecs": 157.0, "relativeCreated": 194099.8363494873, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552895.1578937, "msecs": 157.0, "relativeCreated": 194100.05354881287, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: session_cancellation with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552899.0617633, "msecs": 61.0, "relativeCreated": 198003.92317771912, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AplLZiD3iUVjyc5Merpk_vx\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552899.1537926, "msecs": 153.0, "relativeCreated": 198095.95251083374, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552899.1549506, "msecs": 154.0, "relativeCreated": 198097.11050987244, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552899.1551735, "msecs": 155.0, "relativeCreated": 198097.3334312439, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: cancel_booking with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552902.56396, "msecs": 563.0, "relativeCreated": 201506.11996650696, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"AjH3wJEzPsM2REQ9DzxH1t7\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552902.6703637, "msecs": 670.0, "relativeCreated": 201612.52355575562, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8604967480000596, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestCancelRescheduleReal::test_reschedule_booking", "lineno": 248, "outcome": "passed", "keywords": ["test_reschedule_booking", "TestCancelRescheduleReal", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0011792809999633391, "outcome": "passed"}, "call": {"duration": 19.420903907000024, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552903.5345469, "msecs": 534.0, "relativeCreated": 202476.70674324036, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552903.5375125, "msecs": 537.0, "relativeCreated": 202479.6724319458, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552906.8349135, "msecs": 834.0, "relativeCreated": 205777.0733833313, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A1JlQYdCzhdzW_D5zUdS1iE\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552906.9328597, "msecs": 932.0, "relativeCreated": 205875.0195503235, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552906.9339573, "msecs": 933.0, "relativeCreated": 205876.11722946167, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552906.9341402, "msecs": 934.0, "relativeCreated": 205876.30009651184, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.95", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552910.1331897, "msecs": 133.0, "relativeCreated": 209075.34956932068, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aqc7qmvxlv51Q2QlRX54SjT\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552910.2266796, "msecs": 226.0, "relativeCreated": 209168.83945465088, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552910.2276978, "msecs": 227.0, "relativeCreated": 209169.85774040222, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552910.227883, "msecs": 227.0, "relativeCreated": 209170.04299163818, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: schedule_change with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552912.938344, "msecs": 938.0, "relativeCreated": 211880.50389289856, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Aakw1UEK4MLsYjXBc0qpTcx\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552913.0343993, "msecs": 34.0, "relativeCreated": 211976.5591621399, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552913.0353765, "msecs": 35.0, "relativeCreated": 211977.53643989563, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552913.0355694, "msecs": 35.0, "relativeCreated": 211977.72932052612, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: general_question with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552919.0238929, "msecs": 23.0, "relativeCreated": 217966.05277061462, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send button message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"A7jDVgZjIG2fpurdeoBA_Bl\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552919.118555, "msecs": 118.0, "relativeCreated": 218060.71496009827, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Updated conversation state for 27731863036: AWAITING_REGISTRATION_CHOICE", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552919.120393, "msecs": 120.0, "relativeCreated": 218062.55292892456, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting user context: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552919.1208212, "msecs": 120.0, "relativeCreated": 218062.98112869263, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error getting conversation history: 'Mock' object is not reversible", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552919.1209962, "msecs": 120.0, "relativeCreated": 218063.1561279297, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Error parsing datetime 'afternoon': String does not contain a date: afternoon", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552922.8593495, "msecs": 859.0, "relativeCreated": 221801.50938034058, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "AI Intent detected: session_reschedule with confidence 0.85", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 21, "funcName": "log_info", "created": 1758552922.859446, "msecs": 859.0, "relativeCreated": 221801.6059398651, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}, {"name": "refiloe", "msg": "Failed to send message: {\"error\":{\"message\":\"Invalid OAuth access token - Cannot parse access token\",\"type\":\"OAuthException\",\"code\":190,\"fbtrace_id\":\"Ag-aNKMyO5tp4Y8PWNrw4sp\"}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552922.9537199, "msecs": 953.0, "relativeCreated": 221895.8797454834, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8943835559999798, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_double_booking_prevention", "lineno": 283, "outcome": "passed", "keywords": ["test_double_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005613179999954809, "outcome": "passed"}, "call": {"duration": 0.0014420319999999265, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552923.8519, "msecs": 851.0, "relativeCreated": 222794.05999183655, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 1.4418741380000029, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_past_date_booking_prevention", "lineno": 313, "outcome": "passed", "keywords": ["test_past_date_booking_prevention", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0005918540000493522, "outcome": "passed"}, "call": {"duration": 0.0012893870000425522, "outcome": "passed", "log": [{"name": "refiloe", "msg": "Error checking booking conflict: object of type 'Mock' has no len()", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/utils/logger.py", "filename": "logger.py", "module": "logger", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 25, "funcName": "log_error", "created": 1758552925.296288, "msecs": 296.0, "relativeCreated": 224238.4479045868, "thread": 140116031347584, "threadName": "MainThread", "processName": "MainProcess", "process": 2244}]}, "teardown": {"duration": 0.8186540760000298, "outcome": "passed"}}, {"nodeid": "tests/test_phase3_scheduling.py::TestBookingConflictsAndValidation::test_invalid_time_slots", "lineno": 334, "outcome": "passed", "keywords": ["test_invalid_time_slots", "TestBookingConflictsAndValidation", "test_phase3_scheduling.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0006216109999286346, "outcome": "passed"}, "call": {"duration": 0.00018644800002221018, "outcome": "passed"}, "teardown": {"duration": 0.8554696520000107, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_new_trainer_onboarding", "lineno": 79, "outcome": "failed", "keywords": ["test_new_trainer_onboarding", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003458459999592378, "outcome": "passed"}, "call": {"duration": 0.0013885930000014923, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 89, "message": "AssertionError: assert 'welcome' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f6f3a4ceab0>()\n +    where <built-in method lower of str object at 0x7f6f3a4ceab0> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 89, "message": "in test_new_trainer_onboarding"}], "longrepr": "tests/test_refiloe_complete.py:89: in test_new_trainer_onboarding\n    assert \"welcome\" in response['message'].lower()\nE   AssertionError: assert 'welcome' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f6f3a4ceab0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4ceab0> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 0.8618876549999186, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase1_UserRegistration::test_trainer_recognition", "lineno": 120, "outcome": "failed", "keywords": ["test_trainer_recognition", "TestPhase1_UserRegistration", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032740199992531416, "outcome": "passed"}, "call": {"duration": 0.0013646680000647393, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 134, "message": "AssertionError: assert 'john' in 'mock response to: hi'\n +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f6f3a549430>()\n +    where <built-in method lower of str object at 0x7f6f3a549430> = 'Mock response to: Hi'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 134, "message": "in test_trainer_recognition"}], "longrepr": "tests/test_refiloe_complete.py:134: in test_trainer_recognition\n    assert \"john\" in response['message'].lower()\nE   AssertionError: assert 'john' in 'mock response to: hi'\nE    +  where 'mock response to: hi' = <built-in method lower of str object at 0x7f6f3a549430>()\nE    +    where <built-in method lower of str object at 0x7f6f3a549430> = 'Mock response to: Hi'.lower"}, "teardown": {"duration": 0.866627231999928, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_add_client_variations", "lineno": 143, "outcome": "failed", "keywords": ["test_add_client_variations", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00034292999998797313, "outcome": "passed"}, "call": {"duration": 0.0008398779999652106, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 158, "message": "AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\n +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f6f3a473990>()\n +    where <built-in method lower of str object at 0x7f6f3a473990> = 'Mock response to: Add client Sarah 0821234567'.lower\n +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f6f3a473990>()\n +    where <built-in method lower of str object at 0x7f6f3a473990> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 158, "message": "in test_add_client_variations"}], "longrepr": "tests/test_refiloe_complete.py:158: in test_add_client_variations\n    assert \"added\" in response['message'].lower() or \"registered\" in response['message'].lower()\nE   AssertionError: assert ('added' in 'mock response to: add client sarah 0821234567' or 'registered' in 'mock response to: add client sarah 0821234567')\nE    +  where 'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f6f3a473990>()\nE    +    where <built-in method lower of str object at 0x7f6f3a473990> = 'Mock response to: Add client Sarah 0821234567'.lower\nE    +  and   'mock response to: add client sarah 0821234567' = <built-in method lower of str object at 0x7f6f3a473990>()\nE    +    where <built-in method lower of str object at 0x7f6f3a473990> = 'Mock response to: Add client Sarah 0821234567'.lower"}, "teardown": {"duration": 1.2001842480000278, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_view_clients", "lineno": 159, "outcome": "failed", "keywords": ["test_view_clients", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00032165000004624744, "outcome": "passed"}, "call": {"duration": 0.001250334000019393, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 179, "message": "AssertionError: assert 'sarah' in 'mock response to: show my clients'\n +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f6f3a565890>()\n +    where <built-in method lower of str object at 0x7f6f3a565890> = 'Mock response to: Show my clients'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 179, "message": "in test_view_clients"}], "longrepr": "tests/test_refiloe_complete.py:179: in test_view_clients\n    assert \"sarah\" in response['message'].lower()\nE   AssertionError: assert 'sarah' in 'mock response to: show my clients'\nE    +  where 'mock response to: show my clients' = <built-in method lower of str object at 0x7f6f3a565890>()\nE    +    where <built-in method lower of str object at 0x7f6f3a565890> = 'Mock response to: Show my clients'.lower"}, "teardown": {"duration": 0.8631239449999839, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase2_ClientManagement::test_set_custom_pricing", "lineno": 181, "outcome": "failed", "keywords": ["test_set_custom_pricing", "TestPhase2_ClientManagement", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00035732699996060546, "outcome": "passed"}, "call": {"duration": 0.0010744259999455608, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 196, "message": "assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\n +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f6f3a4b81f0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b81f0> = \"Mock response to: Change John's price to R500 per session\".lower\n +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f6f3a4b81f0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b81f0> = \"Mock response to: Change John's price to R500 per session\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 196, "message": "in test_set_custom_pricing"}], "longrepr": "tests/test_refiloe_complete.py:196: in test_set_custom_pricing\n    assert \"updated\" in response['message'].lower() or \"set\" in response['message'].lower()\nE   assert ('updated' in \"mock response to: change john's price to r500 per session\" or 'set' in \"mock response to: change john's price to r500 per session\")\nE    +  where \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f6f3a4b81f0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b81f0> = \"Mock response to: Change John's price to R500 per session\".lower\nE    +  and   \"mock response to: change john's price to r500 per session\" = <built-in method lower of str object at 0x7f6f3a4b81f0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b81f0> = \"Mock response to: Change John's price to R500 per session\".lower"}, "teardown": {"duration": 1.1331891720000158, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_view_schedule", "lineno": 206, "outcome": "failed", "keywords": ["test_view_schedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002897809999922174, "outcome": "passed"}, "call": {"duration": 0.0008811449999939214, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 223, "message": "assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\n +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f6f3a564570>()\n +    where <built-in method lower of str object at 0x7f6f3a564570> = \"Mock response to: What's on today\".lower\n +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f6f3a564570>()\n +    where <built-in method lower of str object at 0x7f6f3a564570> = \"Mock response to: What's on today\".lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 223, "message": "in test_view_schedule"}], "longrepr": "tests/test_refiloe_complete.py:223: in test_view_schedule\n    assert \"schedule\" in response['message'].lower() or \"booking\" in response['message'].lower()\nE   assert ('schedule' in \"mock response to: what's on today\" or 'booking' in \"mock response to: what's on today\")\nE    +  where \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f6f3a564570>()\nE    +    where <built-in method lower of str object at 0x7f6f3a564570> = \"Mock response to: What's on today\".lower\nE    +  and   \"mock response to: what's on today\" = <built-in method lower of str object at 0x7f6f3a564570>()\nE    +    where <built-in method lower of str object at 0x7f6f3a564570> = \"Mock response to: What's on today\".lower"}, "teardown": {"duration": 0.827046002999964, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_book_sessions", "lineno": 224, "outcome": "failed", "keywords": ["test_book_sessions", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002943499999901178, "outcome": "passed"}, "call": {"duration": 0.0008736209999824496, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 239, "message": "AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\n +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f6f3a4b8dc0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b8dc0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\n +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f6f3a4b8dc0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b8dc0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 239, "message": "in test_book_sessions"}], "longrepr": "tests/test_refiloe_complete.py:239: in test_book_sessions\n    assert \"booked\" in response['message'].lower() or \"scheduled\" in response['message'].lower()\nE   AssertionError: assert ('booked' in 'mock response to: book sarah for tomorrow at 9am' or 'scheduled' in 'mock response to: book sarah for tomorrow at 9am')\nE    +  where 'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f6f3a4b8dc0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b8dc0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower\nE    +  and   'mock response to: book sarah for tomorrow at 9am' = <built-in method lower of str object at 0x7f6f3a4b8dc0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b8dc0> = 'Mock response to: Book Sarah for tomorrow at 9am'.lower"}, "teardown": {"duration": 1.1219287990001021, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase3_SchedulingBookings::test_cancel_reschedule", "lineno": 240, "outcome": "passed", "keywords": ["test_cancel_reschedule", "TestPhase3_SchedulingBookings", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00028887899998153443, "outcome": "passed"}, "call": {"duration": 0.0008077880000882942, "outcome": "passed"}, "teardown": {"duration": 0.8320052289999467, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase4_HabitTracking::test_setup_habits", "lineno": 257, "outcome": "failed", "keywords": ["test_setup_habits", "TestPhase4_HabitTracking", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002955420000034792, "outcome": "passed"}, "call": {"duration": 0.005098899000017809, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 273, "message": "AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\n +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f6f3a4b86c0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b86c0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\n +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f6f3a4b86c0>()\n +    where <built-in method lower of str object at 0x7f6f3a4b86c0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 273, "message": "in test_setup_habits"}], "longrepr": "tests/test_refiloe_complete.py:273: in test_setup_habits\n    assert \"habit\" in response['message'].lower() or \"tracking\" in response['message'].lower()\nE   AssertionError: assert ('habit' in 'mock response to: sarah needs to track steps target 10000' or 'tracking' in 'mock response to: sarah needs to track steps target 10000')\nE    +  where 'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f6f3a4b86c0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b86c0> = 'Mock response to: Sarah needs to track steps target 10000'.lower\nE    +  and   'mock response to: sarah needs to track steps target 10000' = <built-in method lower of str object at 0x7f6f3a4b86c0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a4b86c0> = 'Mock response to: Sarah needs to track steps target 10000'.lower"}, "teardown": {"duration": 0.8096969700000045, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase5_WorkoutsAssessments::test_send_workouts", "lineno": 278, "outcome": "failed", "keywords": ["test_send_workouts", "TestPhase5_WorkoutsAssessments", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003152179999688087, "outcome": "passed"}, "call": {"duration": 0.0009269299999914438, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 293, "message": "AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\n +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f6f3a5644b0>()\n +    where <built-in method lower of str object at 0x7f6f3a5644b0> = 'Mock response to: Send Mike a cardio program'.lower\n +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f6f3a5644b0>()\n +    where <built-in method lower of str object at 0x7f6f3a5644b0> = 'Mock response to: Send Mike a cardio program'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 293, "message": "in test_send_workouts"}], "longrepr": "tests/test_refiloe_complete.py:293: in test_send_workouts\n    assert \"workout\" in response['message'].lower() or \"sent\" in response['message'].lower()\nE   AssertionError: assert ('workout' in 'mock response to: send mike a cardio program' or 'sent' in 'mock response to: send mike a cardio program')\nE    +  where 'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f6f3a5644b0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a5644b0> = 'Mock response to: Send Mike a cardio program'.lower\nE    +  and   'mock response to: send mike a cardio program' = <built-in method lower of str object at 0x7f6f3a5644b0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a5644b0> = 'Mock response to: Send Mike a cardio program'.lower"}, "teardown": {"duration": 0.8334516250000661, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_request_payment", "lineno": 298, "outcome": "failed", "keywords": ["test_request_payment", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002942690000509174, "outcome": "passed"}, "call": {"duration": 0.0008282860000008441, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 313, "message": "AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\n +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f6f3a3d7990>()\n +    where <built-in method lower of str object at 0x7f6f3a3d7990> = 'Mock response to: Bill Mike for this month'.lower\n +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f6f3a3d7990>()\n +    where <built-in method lower of str object at 0x7f6f3a3d7990> = 'Mock response to: Bill Mike for this month'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 313, "message": "in test_request_payment"}], "longrepr": "tests/test_refiloe_complete.py:313: in test_request_payment\n    assert \"payment\" in response['message'].lower() or \"invoice\" in response['message'].lower()\nE   AssertionError: assert ('payment' in 'mock response to: bill mike for this month' or 'invoice' in 'mock response to: bill mike for this month')\nE    +  where 'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f6f3a3d7990>()\nE    +    where <built-in method lower of str object at 0x7f6f3a3d7990> = 'Mock response to: Bill Mike for this month'.lower\nE    +  and   'mock response to: bill mike for this month' = <built-in method lower of str object at 0x7f6f3a3d7990>()\nE    +    where <built-in method lower of str object at 0x7f6f3a3d7990> = 'Mock response to: Bill Mike for this month'.lower"}, "teardown": {"duration": 0.7904569539999784, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase6_PaymentsRevenue::test_check_revenue", "lineno": 314, "outcome": "passed", "keywords": ["test_check_revenue", "TestPhase6_PaymentsRevenue", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003171719999954803, "outcome": "passed"}, "call": {"duration": 0.000737948000050892, "outcome": "passed"}, "teardown": {"duration": 0.8561490260000255, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_booking", "lineno": 334, "outcome": "failed", "keywords": ["test_client_booking", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002752540000301451, "outcome": "passed"}, "call": {"duration": 0.00487781599997561, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 349, "message": "AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\n +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f6f3a565a70>()\n +    where <built-in method lower of str object at 0x7f6f3a565a70> = 'Mock response to: I want to train tomorrow'.lower\n +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f6f3a565a70>()\n +    where <built-in method lower of str object at 0x7f6f3a565a70> = 'Mock response to: I want to train tomorrow'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 349, "message": "in test_client_booking"}], "longrepr": "tests/test_refiloe_complete.py:349: in test_client_booking\n    assert \"book\" in response['message'].lower() or \"session\" in response['message'].lower()\nE   AssertionError: assert ('book' in 'mock response to: i want to train tomorrow' or 'session' in 'mock response to: i want to train tomorrow')\nE    +  where 'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f6f3a565a70>()\nE    +    where <built-in method lower of str object at 0x7f6f3a565a70> = 'Mock response to: I want to train tomorrow'.lower\nE    +  and   'mock response to: i want to train tomorrow' = <built-in method lower of str object at 0x7f6f3a565a70>()\nE    +    where <built-in method lower of str object at 0x7f6f3a565a70> = 'Mock response to: I want to train tomorrow'.lower"}, "teardown": {"duration": 0.8143196439999656, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase8_ClientFeatures::test_client_habit_logging", "lineno": 350, "outcome": "failed", "keywords": ["test_client_habit_logging", "TestPhase8_ClientFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002931269999635333, "outcome": "passed"}, "call": {"duration": 0.0008648639999364605, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 365, "message": "AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\n +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f6f3a55baf0>()\n +    where <built-in method lower of str object at 0x7f6f3a55baf0> = 'Mock response to: 7 yes no'.lower\n +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f6f3a55baf0>()\n +    where <built-in method lower of str object at 0x7f6f3a55baf0> = 'Mock response to: 7 yes no'.lower"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 365, "message": "in test_client_habit_logging"}], "longrepr": "tests/test_refiloe_complete.py:365: in test_client_habit_logging\n    assert \"logged\" in response['message'].lower() or \"recorded\" in response['message'].lower()\nE   AssertionError: assert ('logged' in 'mock response to: 7 yes no' or 'recorded' in 'mock response to: 7 yes no')\nE    +  where 'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f6f3a55baf0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a55baf0> = 'Mock response to: 7 yes no'.lower\nE    +  and   'mock response to: 7 yes no' = <built-in method lower of str object at 0x7f6f3a55baf0>()\nE    +    where <built-in method lower of str object at 0x7f6f3a55baf0> = 'Mock response to: 7 yes no'.lower"}, "teardown": {"duration": 0.835350080000012, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_natural_language_understanding", "lineno": 370, "outcome": "passed", "keywords": ["test_natural_language_understanding", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002933380000058605, "outcome": "passed"}, "call": {"duration": 0.0008013460000029227, "outcome": "passed"}, "teardown": {"duration": 0.9176914280000119, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestPhase10_AdvancedFeatures::test_error_handling", "lineno": 388, "outcome": "failed", "keywords": ["test_error_handling", "TestPhase10_AdvancedFeatures", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.00028792700004487415, "outcome": "passed"}, "call": {"duration": 0.00502865800001473, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 403, "message": "assert False\n +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f6f3a649d20>)"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 403, "message": "in test_error_handling"}], "longrepr": "tests/test_refiloe_complete.py:403: in test_error_handling\n    assert any(word in response['message'].lower() for word in expected_words)\nE   assert False\nE    +  where False = any(<generator object TestPhase10_AdvancedFeatures.test_error_handling.<locals>.<genexpr> at 0x7f6f3a649d20>)"}, "teardown": {"duration": 0.8543975420000152, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_trainer_registration_step_7_currency_parsing", "lineno": 408, "outcome": "failed", "keywords": ["test_trainer_registration_step_7_currency_parsing", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0003115519999710159, "outcome": "passed"}, "call": {"duration": 0.0009411769999587705, "outcome": "failed", "crash": {"path": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/tests/test_refiloe_complete.py", "lineno": 437, "message": "TypeError: 'Mock' object is not subscriptable"}, "traceback": [{"path": "tests/test_refiloe_complete.py", "lineno": 437, "message": "in test_trainer_registration_step_7_currency_parsing"}], "longrepr": "tests/test_refiloe_complete.py:437: in test_trainer_registration_step_7_currency_parsing\n    assert result['data'].get('pricing') == expected_value\nE   TypeError: 'Mock' object is not subscriptable"}, "teardown": {"duration": 0.7784941970001, "outcome": "passed"}}, {"nodeid": "tests/test_refiloe_complete.py::TestCriticalBugs::test_ai_responds_naturally_not_rigid_commands", "lineno": 438, "outcome": "passed", "keywords": ["test_ai_responds_naturally_not_rigid_commands", "TestCriticalBugs", "test_refiloe_complete.py", "tests/__init__.py", "whatsapp-ai-assistant"], "setup": {"duration": 0.0002984279999509454, "outcome": "passed"}, "call": {"duration": 0.0007519239999282945, "outcome": "passed"}, "teardown": {"duration": 1.0777249730000449, "outcome": "passed"}}], "warnings": [{"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "The `update_forward_refs` method is deprecated; use `model_rebuild` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/", "category": "PydanticDeprecatedSince20", "when": "collect", "filename": "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/gotrue/types.py", "lineno": 679}, {"message": "\nPyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),\n(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)\nbut was not found to be installed on your system.\nIf this would cause problems for you,\nplease provide us feedback at https://github.com/pandas-dev/pandas/issues/54466\n        ", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/runner/work/whatsapp-ai-assistant/whatsapp-ai-assistant/services/analytics.py", "lineno": 7}]}